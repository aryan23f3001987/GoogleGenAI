(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function Jw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var rm={exports:{}},xl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0;function eA(){if(y0)return xl;y0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var d in o)d!=="key"&&(u[d]=o[d])}else u=o;return o=u.ref,{$$typeof:n,type:s,key:c,ref:o!==void 0?o:null,props:u}}return xl.Fragment=e,xl.jsx=t,xl.jsxs=t,xl}var _0;function tA(){return _0||(_0=1,rm.exports=eA()),rm.exports}var G=tA(),sm={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v0;function nA(){if(v0)return Ce;v0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function w(k){return k===null||typeof k!="object"?null:(k=T&&k[T]||k["@@iterator"],typeof k=="function"?k:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,M={};function N(k,ie,ce){this.props=k,this.context=ie,this.refs=M,this.updater=ce||S}N.prototype.isReactComponent={},N.prototype.setState=function(k,ie){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,ie,"setState")},N.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function B(){}B.prototype=N.prototype;function X(k,ie,ce){this.props=k,this.context=ie,this.refs=M,this.updater=ce||S}var Q=X.prototype=new B;Q.constructor=X,C(Q,N.prototype),Q.isPureReactComponent=!0;var se=Array.isArray,re={H:null,A:null,T:null,S:null,V:null},oe=Object.prototype.hasOwnProperty;function V(k,ie,ce,le,_e,Ne){return ce=Ne.ref,{$$typeof:n,type:k,key:ie,ref:ce!==void 0?ce:null,props:Ne}}function R(k,ie){return V(k.type,ie,void 0,void 0,void 0,k.props)}function I(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function O(k){var ie={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(ce){return ie[ce]})}var P=/\/+/g;function U(k,ie){return typeof k=="object"&&k!==null&&k.key!=null?O(""+k.key):ie.toString(36)}function x(){}function me(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(x,x):(k.status="pending",k.then(function(ie){k.status==="pending"&&(k.status="fulfilled",k.value=ie)},function(ie){k.status==="pending"&&(k.status="rejected",k.reason=ie)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function Le(k,ie,ce,le,_e){var Ne=typeof k;(Ne==="undefined"||Ne==="boolean")&&(k=null);var be=!1;if(k===null)be=!0;else switch(Ne){case"bigint":case"string":case"number":be=!0;break;case"object":switch(k.$$typeof){case n:case e:be=!0;break;case _:return be=k._init,Le(be(k._payload),ie,ce,le,_e)}}if(be)return _e=_e(k),be=le===""?"."+U(k,0):le,se(_e)?(ce="",be!=null&&(ce=be.replace(P,"$&/")+"/"),Le(_e,ie,ce,"",function(Kn){return Kn})):_e!=null&&(I(_e)&&(_e=R(_e,ce+(_e.key==null||k&&k.key===_e.key?"":(""+_e.key).replace(P,"$&/")+"/")+be)),ie.push(_e)),1;be=0;var Mt=le===""?".":le+":";if(se(k))for(var et=0;et<k.length;et++)le=k[et],Ne=Mt+U(le,et),be+=Le(le,ie,ce,Ne,_e);else if(et=w(k),typeof et=="function")for(k=et.call(k),et=0;!(le=k.next()).done;)le=le.value,Ne=Mt+U(le,et++),be+=Le(le,ie,ce,Ne,_e);else if(Ne==="object"){if(typeof k.then=="function")return Le(me(k),ie,ce,le,_e);throw ie=String(k),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return be}function $(k,ie,ce){if(k==null)return k;var le=[],_e=0;return Le(k,le,"","",function(Ne){return ie.call(ce,Ne,_e++)}),le}function ae(k){if(k._status===-1){var ie=k._result;ie=ie(),ie.then(function(ce){(k._status===0||k._status===-1)&&(k._status=1,k._result=ce)},function(ce){(k._status===0||k._status===-1)&&(k._status=2,k._result=ce)}),k._status===-1&&(k._status=0,k._result=ie)}if(k._status===1)return k._result.default;throw k._result}var he=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function Ie(){}return Ce.Children={map:$,forEach:function(k,ie,ce){$(k,function(){ie.apply(this,arguments)},ce)},count:function(k){var ie=0;return $(k,function(){ie++}),ie},toArray:function(k){return $(k,function(ie){return ie})||[]},only:function(k){if(!I(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Ce.Component=N,Ce.Fragment=t,Ce.Profiler=o,Ce.PureComponent=X,Ce.StrictMode=s,Ce.Suspense=m,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=re,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(k){return re.H.useMemoCache(k)}},Ce.cache=function(k){return function(){return k.apply(null,arguments)}},Ce.cloneElement=function(k,ie,ce){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var le=C({},k.props),_e=k.key,Ne=void 0;if(ie!=null)for(be in ie.ref!==void 0&&(Ne=void 0),ie.key!==void 0&&(_e=""+ie.key),ie)!oe.call(ie,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&ie.ref===void 0||(le[be]=ie[be]);var be=arguments.length-2;if(be===1)le.children=ce;else if(1<be){for(var Mt=Array(be),et=0;et<be;et++)Mt[et]=arguments[et+2];le.children=Mt}return V(k.type,_e,void 0,void 0,Ne,le)},Ce.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:u,_context:k},k},Ce.createElement=function(k,ie,ce){var le,_e={},Ne=null;if(ie!=null)for(le in ie.key!==void 0&&(Ne=""+ie.key),ie)oe.call(ie,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(_e[le]=ie[le]);var be=arguments.length-2;if(be===1)_e.children=ce;else if(1<be){for(var Mt=Array(be),et=0;et<be;et++)Mt[et]=arguments[et+2];_e.children=Mt}if(k&&k.defaultProps)for(le in be=k.defaultProps,be)_e[le]===void 0&&(_e[le]=be[le]);return V(k,Ne,void 0,void 0,null,_e)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(k){return{$$typeof:d,render:k}},Ce.isValidElement=I,Ce.lazy=function(k){return{$$typeof:_,_payload:{_status:-1,_result:k},_init:ae}},Ce.memo=function(k,ie){return{$$typeof:g,type:k,compare:ie===void 0?null:ie}},Ce.startTransition=function(k){var ie=re.T,ce={};re.T=ce;try{var le=k(),_e=re.S;_e!==null&&_e(ce,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Ie,he)}catch(Ne){he(Ne)}finally{re.T=ie}},Ce.unstable_useCacheRefresh=function(){return re.H.useCacheRefresh()},Ce.use=function(k){return re.H.use(k)},Ce.useActionState=function(k,ie,ce){return re.H.useActionState(k,ie,ce)},Ce.useCallback=function(k,ie){return re.H.useCallback(k,ie)},Ce.useContext=function(k){return re.H.useContext(k)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(k,ie){return re.H.useDeferredValue(k,ie)},Ce.useEffect=function(k,ie,ce){var le=re.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(k,ie)},Ce.useId=function(){return re.H.useId()},Ce.useImperativeHandle=function(k,ie,ce){return re.H.useImperativeHandle(k,ie,ce)},Ce.useInsertionEffect=function(k,ie){return re.H.useInsertionEffect(k,ie)},Ce.useLayoutEffect=function(k,ie){return re.H.useLayoutEffect(k,ie)},Ce.useMemo=function(k,ie){return re.H.useMemo(k,ie)},Ce.useOptimistic=function(k,ie){return re.H.useOptimistic(k,ie)},Ce.useReducer=function(k,ie,ce){return re.H.useReducer(k,ie,ce)},Ce.useRef=function(k){return re.H.useRef(k)},Ce.useState=function(k){return re.H.useState(k)},Ce.useSyncExternalStore=function(k,ie,ce){return re.H.useSyncExternalStore(k,ie,ce)},Ce.useTransition=function(){return re.H.useTransition()},Ce.version="19.1.1",Ce}var E0;function op(){return E0||(E0=1,sm.exports=nA()),sm.exports}var K=op();const qs=Jw(K);var am={exports:{}},Nl={},om={exports:{}},lm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0;function iA(){return T0||(T0=1,(function(n){function e($,ae){var he=$.length;$.push(ae);e:for(;0<he;){var Ie=he-1>>>1,k=$[Ie];if(0<o(k,ae))$[Ie]=ae,$[he]=k,he=Ie;else break e}}function t($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var ae=$[0],he=$.pop();if(he!==ae){$[0]=he;e:for(var Ie=0,k=$.length,ie=k>>>1;Ie<ie;){var ce=2*(Ie+1)-1,le=$[ce],_e=ce+1,Ne=$[_e];if(0>o(le,he))_e<k&&0>o(Ne,le)?($[Ie]=Ne,$[_e]=he,Ie=_e):($[Ie]=le,$[ce]=he,Ie=ce);else if(_e<k&&0>o(Ne,he))$[Ie]=Ne,$[_e]=he,Ie=_e;else break e}}return ae}function o($,ae){var he=$.sortIndex-ae.sortIndex;return he!==0?he:$.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],g=[],_=1,T=null,w=3,S=!1,C=!1,M=!1,N=!1,B=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function se($){for(var ae=t(g);ae!==null;){if(ae.callback===null)s(g);else if(ae.startTime<=$)s(g),ae.sortIndex=ae.expirationTime,e(m,ae);else break;ae=t(g)}}function re($){if(M=!1,se($),!C)if(t(m)!==null)C=!0,oe||(oe=!0,U());else{var ae=t(g);ae!==null&&Le(re,ae.startTime-$)}}var oe=!1,V=-1,R=5,I=-1;function O(){return N?!0:!(n.unstable_now()-I<R)}function P(){if(N=!1,oe){var $=n.unstable_now();I=$;var ae=!0;try{e:{C=!1,M&&(M=!1,X(V),V=-1),S=!0;var he=w;try{t:{for(se($),T=t(m);T!==null&&!(T.expirationTime>$&&O());){var Ie=T.callback;if(typeof Ie=="function"){T.callback=null,w=T.priorityLevel;var k=Ie(T.expirationTime<=$);if($=n.unstable_now(),typeof k=="function"){T.callback=k,se($),ae=!0;break t}T===t(m)&&s(m),se($)}else s(m);T=t(m)}if(T!==null)ae=!0;else{var ie=t(g);ie!==null&&Le(re,ie.startTime-$),ae=!1}}break e}finally{T=null,w=he,S=!1}ae=void 0}}finally{ae?U():oe=!1}}}var U;if(typeof Q=="function")U=function(){Q(P)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,me=x.port2;x.port1.onmessage=P,U=function(){me.postMessage(null)}}else U=function(){B(P,0)};function Le($,ae){V=B(function(){$(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function($){switch(w){case 1:case 2:case 3:var ae=3;break;default:ae=w}var he=w;w=ae;try{return $()}finally{w=he}},n.unstable_requestPaint=function(){N=!0},n.unstable_runWithPriority=function($,ae){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var he=w;w=$;try{return ae()}finally{w=he}},n.unstable_scheduleCallback=function($,ae,he){var Ie=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Ie+he:Ie):he=Ie,$){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=he+k,$={id:_++,callback:ae,priorityLevel:$,startTime:he,expirationTime:k,sortIndex:-1},he>Ie?($.sortIndex=he,e(g,$),t(m)===null&&$===t(g)&&(M?(X(V),V=-1):M=!0,Le(re,he-Ie))):($.sortIndex=k,e(m,$),C||S||(C=!0,oe||(oe=!0,U()))),$},n.unstable_shouldYield=O,n.unstable_wrapCallback=function($){var ae=w;return function(){var he=w;w=ae;try{return $.apply(this,arguments)}finally{w=he}}}})(lm)),lm}var w0;function rA(){return w0||(w0=1,om.exports=iA()),om.exports}var um={exports:{}},$t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A0;function sA(){if(A0)return $t;A0=1;var n=op();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(m,g,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:m,containerInfo:g,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return $t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,$t.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(m,g,null,_)},$t.flushSync=function(m){var g=c.T,_=s.p;try{if(c.T=null,s.p=2,m)return m()}finally{c.T=g,s.p=_,s.d.f()}},$t.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(m,g))},$t.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},$t.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?s.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:w,fetchPriority:S}):_==="script"&&s.d.X(m,{crossOrigin:T,integrity:w,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},$t.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);s.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(m)},$t.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin);s.d.L(m,_,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},$t.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=d(g.as,g.crossOrigin);s.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(m)},$t.requestFormReset=function(m){s.d.r(m)},$t.unstable_batchedUpdates=function(m,g){return m(g)},$t.useFormState=function(m,g,_){return c.H.useFormState(m,g,_)},$t.useFormStatus=function(){return c.H.useHostTransitionStatus()},$t.version="19.1.1",$t}var b0;function aA(){if(b0)return um.exports;b0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),um.exports=sA(),um.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0;function oA(){if(S0)return Nl;S0=1;var n=rA(),e=op(),t=aA();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function u(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(u(i)!==i)throw Error(s(188))}function m(i){var r=i.alternate;if(!r){if(r=u(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,l=r;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return d(f),i;if(p===l)return d(f),r;p=p.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=p;else{for(var E=!1,A=f.child;A;){if(A===a){E=!0,a=f,l=p;break}if(A===l){E=!0,l=f,a=p;break}A=A.sibling}if(!E){for(A=p.child;A;){if(A===a){E=!0,a=p,l=f;break}if(A===l){E=!0,l=p,a=f;break}A=A.sibling}if(!E)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function g(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=g(i),r!==null)return r;i=i.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),X=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=P&&i[P]||i["@@iterator"],typeof i=="function"?i:null)}var x=Symbol.for("react.client.reference");function me(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===x?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case C:return"Fragment";case N:return"Profiler";case M:return"StrictMode";case re:return"Suspense";case oe:return"SuspenseList";case I:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case Q:return(i.displayName||"Context")+".Provider";case X:return(i._context.displayName||"Context")+".Consumer";case se:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case V:return r=i.displayName||null,r!==null?r:me(i.type)||"Memo";case R:r=i._payload,i=i._init;try{return me(i(r))}catch{}}return null}var Le=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Ie=[],k=-1;function ie(i){return{current:i}}function ce(i){0>k||(i.current=Ie[k],Ie[k]=null,k--)}function le(i,r){k++,Ie[k]=i.current,i.current=r}var _e=ie(null),Ne=ie(null),be=ie(null),Mt=ie(null);function et(i,r){switch(le(be,r),le(Ne,i),le(_e,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?G_(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=G_(r),i=Y_(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ce(_e),le(_e,i)}function Kn(){ce(_e),ce(Ne),ce(be)}function or(i){i.memoizedState!==null&&le(Mt,i);var r=_e.current,a=Y_(r,i.type);r!==a&&(le(Ne,i),le(_e,a))}function Ei(i){Ne.current===i&&(ce(_e),ce(Ne)),Mt.current===i&&(ce(Mt),bl._currentValue=he)}var ts=Object.prototype.hasOwnProperty,ns=n.unstable_scheduleCallback,is=n.unstable_cancelCallback,To=n.unstable_shouldYield,vu=n.unstable_requestPaint,Tn=n.unstable_now,rf=n.unstable_getCurrentPriorityLevel,wo=n.unstable_ImmediatePriority,ta=n.unstable_UserBlockingPriority,rs=n.unstable_NormalPriority,sf=n.unstable_LowPriority,na=n.unstable_IdlePriority,Ao=n.log,Eu=n.unstable_setDisableYieldValue,ut=null,Ye=null;function cn(i){if(typeof Ao=="function"&&Eu(i),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(ut,i)}catch{}}var Qt=Math.clz32?Math.clz32:ss,Tu=Math.log,af=Math.LN2;function ss(i){return i>>>=0,i===0?32:31-(Tu(i)/af|0)|0}var as=256,os=4194304;function Ln(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ia(i,r,a){var l=i.pendingLanes;if(l===0)return 0;var f=0,p=i.suspendedLanes,E=i.pingedLanes;i=i.warmLanes;var A=l&134217727;return A!==0?(l=A&~p,l!==0?f=Ln(l):(E&=A,E!==0?f=Ln(E):a||(a=A&~i,a!==0&&(f=Ln(a))))):(A=l&~p,A!==0?f=Ln(A):E!==0?f=Ln(E):a||(a=l&~i,a!==0&&(f=Ln(a)))),f===0?0:r!==0&&r!==f&&(r&p)===0&&(p=f&-f,a=r&-r,p>=a||p===32&&(a&4194048)!==0)?r:f}function ls(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function bo(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function So(){var i=as;return as<<=1,(as&4194048)===0&&(as=256),i}function Ro(){var i=os;return os<<=1,(os&62914560)===0&&(os=4194304),i}function Ti(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function wi(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Co(i,r,a,l,f,p){var E=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var A=i.entanglements,D=i.expirationTimes,F=i.hiddenUpdates;for(a=E&~a;0<a;){var Z=31-Qt(a),te=1<<Z;A[Z]=0,D[Z]=-1;var H=F[Z];if(H!==null)for(F[Z]=null,Z=0;Z<H.length;Z++){var Y=H[Z];Y!==null&&(Y.lane&=-536870913)}a&=~te}l!==0&&$n(i,l,0),p!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=p&~(E&~r))}function $n(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var l=31-Qt(r);i.entangledLanes|=r,i.entanglements[l]=i.entanglements[l]|1073741824|a&4194090}function Io(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var l=31-Qt(a),f=1<<l;f&r|i[l]&r&&(i[l]|=r),a&=~f}}function lr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ra(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ur(){var i=ae.p;return i!==0?i:(i=window.event,i===void 0?32:h0(i.type))}function wu(i,r){var a=ae.p;try{return ae.p=i,r()}finally{ae.p=a}}var rt=Math.random().toString(36).slice(2),St="__reactFiber$"+rt,yt="__reactProps$"+rt,wn="__reactContainer$"+rt,xo="__reactEvents$"+rt,of="__reactListeners$"+rt,cr="__reactHandles$"+rt,Au="__reactResources$"+rt,us="__reactMarker$"+rt;function hr(i){delete i[St],delete i[yt],delete i[xo],delete i[of],delete i[cr]}function Ai(i){var r=i[St];if(r)return r;for(var a=i.parentNode;a;){if(r=a[wn]||a[St]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=X_(i);i!==null;){if(a=i[St])return a;i=X_(i)}return r}i=a,a=i.parentNode}return null}function Xn(i){if(i=i[St]||i[wn]){var r=i.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return i}return null}function Wn(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function en(i){var r=i[Au];return r||(r=i[Au]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function ft(i){i[us]=!0}var No=new Set,sa={};function Un(i,r){bi(i,r),bi(i+"Capture",r)}function bi(i,r){for(sa[i]=r,i=0;i<r.length;i++)No.add(r[i])}var bu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Su={},cs={};function Ru(i){return ts.call(cs,i)?!0:ts.call(Su,i)?!1:bu.test(i)?cs[i]=!0:(Su[i]=!0,!1)}function fr(i,r,a){if(Ru(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function Zn(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function zt(i,r,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+l)}}var hs,Cu;function Si(i){if(hs===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);hs=r&&r[1]||"",Cu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hs+i+Cu}var aa=!1;function oa(i,r){if(!i||aa)return"";aa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(Y){var H=Y}Reflect.construct(i,[],te)}else{try{te.call()}catch(Y){H=Y}i.call(te.prototype)}}else{try{throw Error()}catch(Y){H=Y}(te=i())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(Y){if(Y&&H&&typeof Y.stack=="string")return[Y.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),E=p[0],A=p[1];if(E&&A){var D=E.split(`
`),F=A.split(`
`);for(f=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(l===D.length||f===F.length)for(l=D.length-1,f=F.length-1;1<=l&&0<=f&&D[l]!==F[f];)f--;for(;1<=l&&0<=f;l--,f--)if(D[l]!==F[f]){if(l!==1||f!==1)do if(l--,f--,0>f||D[l]!==F[f]){var Z=`
`+D[l].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=l&&0<=f);break}}}finally{aa=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?Si(a):""}function Do(i){switch(i.tag){case 26:case 27:case 5:return Si(i.type);case 16:return Si("Lazy");case 13:return Si("Suspense");case 19:return Si("SuspenseList");case 0:case 15:return oa(i.type,!1);case 11:return oa(i.type.render,!1);case 1:return oa(i.type,!0);case 31:return Si("Activity");default:return""}}function la(i){try{var r="";do r+=Do(i),i=i.return;while(i);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function tn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Mo(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function lf(i){var r=Mo(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,r),l=""+i[r];if(!i.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,p=a.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return f.call(this)},set:function(E){l=""+E,p.call(this,E)}}),Object.defineProperty(i,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function ua(i){i._valueTracker||(i._valueTracker=lf(i))}function Oo(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return i&&(l=Mo(i)?i.checked?"true":"false":i.value),i=l,i!==a?(r.setValue(i),!0):!1}function fs(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var uf=/[\n"\\]/g;function _t(i){return i.replace(uf,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function hn(i,r,a,l,f,p,E,A){i.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.type=E:i.removeAttribute("type"),r!=null?E==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+tn(r)):i.value!==""+tn(r)&&(i.value=""+tn(r)):E!=="submit"&&E!=="reset"||i.removeAttribute("value"),r!=null?dr(i,E,tn(r)):a!=null?dr(i,E,tn(a)):l!=null&&i.removeAttribute("value"),f==null&&p!=null&&(i.defaultChecked=!!p),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+tn(A):i.removeAttribute("name")}function ds(i,r,a,l,f,p,E,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),r!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||r!=null))return;a=a!=null?""+tn(a):"",r=r!=null?""+tn(r):a,A||r===i.value||(i.value=r),i.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,i.checked=A?i.checked:!!l,i.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.name=E)}function dr(i,r,a){r==="number"&&fs(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Ri(i,r,a,l){if(i=i.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<i.length;a++)f=r.hasOwnProperty("$"+i[a].value),i[a].selected!==f&&(i[a].selected=f),f&&l&&(i[a].defaultSelected=!0)}else{for(a=""+tn(a),r=null,f=0;f<i.length;f++){if(i[f].value===a){i[f].selected=!0,l&&(i[f].defaultSelected=!0);return}r!==null||i[f].disabled||(r=i[f])}r!==null&&(r.selected=!0)}}function $e(i,r,a){if(r!=null&&(r=""+tn(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+tn(a):""}function ms(i,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Le(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=tn(r),i.defaultValue=a,l=i.textContent,l===a&&l!==""&&l!==null&&(i.value=l)}function An(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var ps=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Iu(i,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":l?i.setProperty(r,a):typeof a!="number"||a===0||ps.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function Vo(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&Iu(i,f,l)}else for(var p in r)r.hasOwnProperty(p)&&Iu(i,p,r[p])}function Po(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ca(i){return hf.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Ci=null;function bn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ii=null,xi=null;function ko(i){var r=Xn(i);if(r&&(i=r.stateNode)){var a=i[yt]||null;e:switch(i=r.stateNode,r.type){case"input":if(hn(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+_t(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==i&&l.form===i.form){var f=l[yt]||null;if(!f)throw Error(s(90));hn(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===i.form&&Oo(l)}break e;case"textarea":$e(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Ri(i,!!a.multiple,r,!1)}}}var Jn=!1;function xu(i,r,a){if(Jn)return i(r,a);Jn=!0;try{var l=i(r);return l}finally{if(Jn=!1,(Ii!==null||xi!==null)&&(wc(),Ii&&(r=Ii,i=xi,xi=Ii=null,ko(r),i)))for(r=0;r<i.length;r++)ko(i[r])}}function gs(i,r){var a=i.stateNode;if(a===null)return null;var l=a[yt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(i=i.type,l=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!l;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sn=!1;if(zn)try{var ys={};Object.defineProperty(ys,"passive",{get:function(){Sn=!0}}),window.addEventListener("test",ys,ys),window.removeEventListener("test",ys,ys)}catch{Sn=!1}var ei=null,mr=null,Ni=null;function Lo(){if(Ni)return Ni;var i,r=mr,a=r.length,l,f="value"in ei?ei.value:ei.textContent,p=f.length;for(i=0;i<a&&r[i]===f[i];i++);var E=a-i;for(l=1;l<=E&&r[a-l]===f[p-l];l++);return Ni=f.slice(i,1<l?1-l:void 0)}function ti(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function ni(){return!0}function Uo(){return!1}function Ot(i){function r(a,l,f,p,E){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(a=i[A],this[A]=a?a(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ni:Uo,this.isPropagationStopped=Uo,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),r}var He={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ha=Ot(He),_s=_({},He,{view:0,detail:0}),Nu=Ot(_s),fa,da,ii,vs=_({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ws,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ii&&(ii&&i.type==="mousemove"?(fa=i.screenX-ii.screenX,da=i.screenY-ii.screenY):da=fa=0,ii=i),fa)},movementY:function(i){return"movementY"in i?i.movementY:da}}),Rn=Ot(vs),Du=_({},vs,{dataTransfer:0}),ff=Ot(Du),Es=_({},_s,{relatedTarget:0}),ma=Ot(Es),zo=_({},He,{animationName:0,elapsedTime:0,pseudoElement:0}),pa=Ot(zo),Mu=_({},He,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),ga=Ot(Mu),df=_({},He,{data:0}),Bo=Ot(df),Ts={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ou={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jo(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Vu[i])?!!r[i]:!1}function ws(){return jo}var Pu=_({},_s,{key:function(i){if(i.key){var r=Ts[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=ti(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ou[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ws,charCode:function(i){return i.type==="keypress"?ti(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ti(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ya=Ot(Pu),ku=_({},vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qo=Ot(ku),Di=_({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ws}),Lu=Ot(Di),Uu=_({},He,{propertyName:0,elapsedTime:0,pseudoElement:0}),zu=Ot(Uu),Bu=_({},vs,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),_a=Ot(Bu),nn=_({},He,{newState:0,oldState:0}),ju=Ot(nn),qu=[9,13,27,32],ri=zn&&"CompositionEvent"in window,h=null;zn&&"documentMode"in document&&(h=document.documentMode);var y=zn&&"TextEvent"in window&&!h,v=zn&&(!ri||h&&8<h&&11>=h),b=" ",j=!1;function W(i,r){switch(i){case"keyup":return qu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ue(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ue=!1;function Rt(i,r){switch(i){case"compositionend":return ue(r);case"keypress":return r.which!==32?null:(j=!0,b);case"textInput":return i=r.data,i===b&&j?null:i;default:return null}}function ze(i,r){if(Ue)return i==="compositionend"||!ri&&W(i,r)?(i=Lo(),Ni=mr=ei=null,Ue=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return v&&r.locale!=="ko"?null:r.data;default:return null}}var Vt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ct(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!Vt[i.type]:r==="textarea"}function Mi(i,r,a,l){Ii?xi?xi.push(l):xi=[l]:Ii=l,r=Ic(r,"onChange"),0<r.length&&(a=new ha("onChange","change",null,a,l),i.push({event:a,listeners:r}))}var Bt=null,si=null;function Fo(i){B_(i,0)}function Fu(i){var r=Wn(i);if(Oo(r))return i}function og(i,r){if(i==="change")return r}var lg=!1;if(zn){var mf;if(zn){var pf="oninput"in document;if(!pf){var ug=document.createElement("div");ug.setAttribute("oninput","return;"),pf=typeof ug.oninput=="function"}mf=pf}else mf=!1;lg=mf&&(!document.documentMode||9<document.documentMode)}function cg(){Bt&&(Bt.detachEvent("onpropertychange",hg),si=Bt=null)}function hg(i){if(i.propertyName==="value"&&Fu(si)){var r=[];Mi(r,si,i,bn(i)),xu(Fo,r)}}function x2(i,r,a){i==="focusin"?(cg(),Bt=r,si=a,Bt.attachEvent("onpropertychange",hg)):i==="focusout"&&cg()}function N2(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Fu(si)}function D2(i,r){if(i==="click")return Fu(r)}function M2(i,r){if(i==="input"||i==="change")return Fu(r)}function O2(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var fn=typeof Object.is=="function"?Object.is:O2;function Ho(i,r){if(fn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!ts.call(r,f)||!fn(i[f],r[f]))return!1}return!0}function fg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function dg(i,r){var a=fg(i);i=0;for(var l;a;){if(a.nodeType===3){if(l=i+a.textContent.length,i<=r&&l>=r)return{node:a,offset:r-i};i=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=fg(a)}}function mg(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?mg(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function pg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=fs(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=fs(i.document)}return r}function gf(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var V2=zn&&"documentMode"in document&&11>=document.documentMode,va=null,yf=null,Go=null,_f=!1;function gg(i,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;_f||va==null||va!==fs(l)||(l=va,"selectionStart"in l&&gf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Go&&Ho(Go,l)||(Go=l,l=Ic(yf,"onSelect"),0<l.length&&(r=new ha("onSelect","select",null,r,a),i.push({event:r,listeners:l}),r.target=va)))}function As(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var Ea={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionrun:As("Transition","TransitionRun"),transitionstart:As("Transition","TransitionStart"),transitioncancel:As("Transition","TransitionCancel"),transitionend:As("Transition","TransitionEnd")},vf={},yg={};zn&&(yg=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);function bs(i){if(vf[i])return vf[i];if(!Ea[i])return i;var r=Ea[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in yg)return vf[i]=r[a];return i}var _g=bs("animationend"),vg=bs("animationiteration"),Eg=bs("animationstart"),P2=bs("transitionrun"),k2=bs("transitionstart"),L2=bs("transitioncancel"),Tg=bs("transitionend"),wg=new Map,Ef="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ef.push("scrollEnd");function Bn(i,r){wg.set(i,r),Un(r,[i])}var Ag=new WeakMap;function Cn(i,r){if(typeof i=="object"&&i!==null){var a=Ag.get(i);return a!==void 0?a:(r={value:i,source:r,stack:la(r)},Ag.set(i,r),r)}return{value:i,source:r,stack:la(r)}}var In=[],Ta=0,Tf=0;function Hu(){for(var i=Ta,r=Tf=Ta=0;r<i;){var a=In[r];In[r++]=null;var l=In[r];In[r++]=null;var f=In[r];In[r++]=null;var p=In[r];if(In[r++]=null,l!==null&&f!==null){var E=l.pending;E===null?f.next=f:(f.next=E.next,E.next=f),l.pending=f}p!==0&&bg(a,f,p)}}function Gu(i,r,a,l){In[Ta++]=i,In[Ta++]=r,In[Ta++]=a,In[Ta++]=l,Tf|=l,i.lanes|=l,i=i.alternate,i!==null&&(i.lanes|=l)}function wf(i,r,a,l){return Gu(i,r,a,l),Yu(i)}function wa(i,r){return Gu(i,null,null,r),Yu(i)}function bg(i,r,a){i.lanes|=a;var l=i.alternate;l!==null&&(l.lanes|=a);for(var f=!1,p=i.return;p!==null;)p.childLanes|=a,l=p.alternate,l!==null&&(l.childLanes|=a),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(f=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,f&&r!==null&&(f=31-Qt(a),i=p.hiddenUpdates,l=i[f],l===null?i[f]=[r]:l.push(r),r.lane=a|536870912),p):null}function Yu(i){if(50<gl)throw gl=0,Id=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Aa={};function U2(i,r,a,l){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(i,r,a,l){return new U2(i,r,a,l)}function Af(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Oi(i,r){var a=i.alternate;return a===null?(a=dn(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Sg(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Qu(i,r,a,l,f,p){var E=0;if(l=i,typeof i=="function")Af(i)&&(E=1);else if(typeof i=="string")E=Bw(i,a,_e.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case I:return i=dn(31,a,r,f),i.elementType=I,i.lanes=p,i;case C:return Ss(a.children,f,p,r);case M:E=8,f|=24;break;case N:return i=dn(12,a,r,f|2),i.elementType=N,i.lanes=p,i;case re:return i=dn(13,a,r,f),i.elementType=re,i.lanes=p,i;case oe:return i=dn(19,a,r,f),i.elementType=oe,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:case Q:E=10;break e;case X:E=9;break e;case se:E=11;break e;case V:E=14;break e;case R:E=16,l=null;break e}E=29,a=Error(s(130,i===null?"null":typeof i,"")),l=null}return r=dn(E,a,r,f),r.elementType=i,r.type=l,r.lanes=p,r}function Ss(i,r,a,l){return i=dn(7,i,l,r),i.lanes=a,i}function bf(i,r,a){return i=dn(6,i,null,r),i.lanes=a,i}function Sf(i,r,a){return r=dn(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var ba=[],Sa=0,Ku=null,$u=0,xn=[],Nn=0,Rs=null,Vi=1,Pi="";function Cs(i,r){ba[Sa++]=$u,ba[Sa++]=Ku,Ku=i,$u=r}function Rg(i,r,a){xn[Nn++]=Vi,xn[Nn++]=Pi,xn[Nn++]=Rs,Rs=i;var l=Vi;i=Pi;var f=32-Qt(l)-1;l&=~(1<<f),a+=1;var p=32-Qt(r)+f;if(30<p){var E=f-f%5;p=(l&(1<<E)-1).toString(32),l>>=E,f-=E,Vi=1<<32-Qt(r)+f|a<<f|l,Pi=p+i}else Vi=1<<p|a<<f|l,Pi=i}function Rf(i){i.return!==null&&(Cs(i,1),Rg(i,1,0))}function Cf(i){for(;i===Ku;)Ku=ba[--Sa],ba[Sa]=null,$u=ba[--Sa],ba[Sa]=null;for(;i===Rs;)Rs=xn[--Nn],xn[Nn]=null,Pi=xn[--Nn],xn[Nn]=null,Vi=xn[--Nn],xn[Nn]=null}var rn=null,ct=null,Fe=!1,Is=null,ai=!1,If=Error(s(519));function xs(i){var r=Error(s(418,""));throw Ko(Cn(r,i)),If}function Cg(i){var r=i.stateNode,a=i.type,l=i.memoizedProps;switch(r[St]=i,r[yt]=l,a){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(a=0;a<_l.length;a++)Oe(_l[a],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Oe("invalid",r),ds(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ua(r);break;case"select":Oe("invalid",r);break;case"textarea":Oe("invalid",r),ms(r,l.value,l.defaultValue,l.children),ua(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||H_(r.textContent,a)?(l.popover!=null&&(Oe("beforetoggle",r),Oe("toggle",r)),l.onScroll!=null&&Oe("scroll",r),l.onScrollEnd!=null&&Oe("scrollend",r),l.onClick!=null&&(r.onclick=xc),r=!0):r=!1,r||xs(i)}function Ig(i){for(rn=i.return;rn;)switch(rn.tag){case 5:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:rn=rn.return}}function Yo(i){if(i!==rn)return!1;if(!Fe)return Ig(i),Fe=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Hd(i.type,i.memoizedProps)),a=!a),a&&ct&&xs(i),Ig(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,r=0;i;){if(i.nodeType===8)if(a=i.data,a==="/$"){if(r===0){ct=qn(i.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;i=i.nextSibling}ct=null}}else r===27?(r=ct,Nr(i.type)?(i=Kd,Kd=null,ct=i):ct=r):ct=rn?qn(i.stateNode.nextSibling):null;return!0}function Qo(){ct=rn=null,Fe=!1}function xg(){var i=Is;return i!==null&&(on===null?on=i:on.push.apply(on,i),Is=null),i}function Ko(i){Is===null?Is=[i]:Is.push(i)}var xf=ie(null),Ns=null,ki=null;function pr(i,r,a){le(xf,r._currentValue),r._currentValue=a}function Li(i){i._currentValue=xf.current,ce(xf)}function Nf(i,r,a){for(;i!==null;){var l=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),i===a)break;i=i.return}}function Df(i,r,a,l){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var p=f.dependencies;if(p!==null){var E=f.child;p=p.firstContext;e:for(;p!==null;){var A=p;p=f;for(var D=0;D<r.length;D++)if(A.context===r[D]){p.lanes|=a,A=p.alternate,A!==null&&(A.lanes|=a),Nf(p.return,a,i),l||(E=null);break e}p=A.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(s(341));E.lanes|=a,p=E.alternate,p!==null&&(p.lanes|=a),Nf(E,a,i),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===i){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function $o(i,r,a,l){i=null;for(var f=r,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var A=f.type;fn(f.pendingProps.value,E.value)||(i!==null?i.push(A):i=[A])}}else if(f===Mt.current){if(E=f.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(bl):i=[bl])}f=f.return}i!==null&&Df(r,i,a,l),r.flags|=262144}function Xu(i){for(i=i.firstContext;i!==null;){if(!fn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ds(i){Ns=i,ki=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Kt(i){return Ng(Ns,i)}function Wu(i,r){return Ns===null&&Ds(i),Ng(i,r)}function Ng(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ki===null){if(i===null)throw Error(s(308));ki=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else ki=ki.next=r;return a}var z2=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,l){i.push(l)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},B2=n.unstable_scheduleCallback,j2=n.unstable_NormalPriority,It={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mf(){return{controller:new z2,data:new Map,refCount:0}}function Xo(i){i.refCount--,i.refCount===0&&B2(j2,function(){i.controller.abort()})}var Wo=null,Of=0,Ra=0,Ca=null;function q2(i,r){if(Wo===null){var a=Wo=[];Of=0,Ra=Pd(),Ca={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Of++,r.then(Dg,Dg),r}function Dg(){if(--Of===0&&Wo!==null){Ca!==null&&(Ca.status="fulfilled");var i=Wo;Wo=null,Ra=0,Ca=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function F2(i,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return i.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Mg=$.S;$.S=function(i,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&q2(i,r),Mg!==null&&Mg(i,r)};var Ms=ie(null);function Vf(){var i=Ms.current;return i!==null?i:tt.pooledCache}function Zu(i,r){r===null?le(Ms,Ms.current):le(Ms,r.pool)}function Og(){var i=Vf();return i===null?null:{parent:It._currentValue,pool:i}}var Zo=Error(s(460)),Vg=Error(s(474)),Ju=Error(s(542)),Pf={then:function(){}};function Pg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function ec(){}function kg(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(ec,ec),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Ug(i),i;default:if(typeof r.status=="string")r.then(ec,ec);else{if(i=tt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Ug(i),i}throw Jo=r,Zo}}var Jo=null;function Lg(){if(Jo===null)throw Error(s(459));var i=Jo;return Jo=null,i}function Ug(i){if(i===Zo||i===Ju)throw Error(s(483))}var gr=!1;function kf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lf(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function yr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function _r(i,r,a){var l=i.updateQueue;if(l===null)return null;if(l=l.shared,(Qe&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=Yu(i),bg(i,null,a),r}return Gu(i,l,r,a),Yu(i)}function el(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=i.pendingLanes,a|=l,r.lanes=a,Io(i,a)}}function Uf(i,r){var a=i.updateQueue,l=i.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=E:p=p.next=E,a=a.next}while(a!==null);p===null?f=p=r:p=p.next=r}else f=p=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var zf=!1;function tl(){if(zf){var i=Ca;if(i!==null)throw i}}function nl(i,r,a,l){zf=!1;var f=i.updateQueue;gr=!1;var p=f.firstBaseUpdate,E=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var D=A,F=D.next;D.next=null,E===null?p=F:E.next=F,E=D;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,A=Z.lastBaseUpdate,A!==E&&(A===null?Z.firstBaseUpdate=F:A.next=F,Z.lastBaseUpdate=D))}if(p!==null){var te=f.baseState;E=0,Z=F=D=null,A=p;do{var H=A.lane&-536870913,Y=H!==A.lane;if(Y?(Be&H)===H:(l&H)===H){H!==0&&H===Ra&&(zf=!0),Z!==null&&(Z=Z.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Ae=i,ve=A;H=r;var Ze=a;switch(ve.tag){case 1:if(Ae=ve.payload,typeof Ae=="function"){te=Ae.call(Ze,te,H);break e}te=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=ve.payload,H=typeof Ae=="function"?Ae.call(Ze,te,H):Ae,H==null)break e;te=_({},te,H);break e;case 2:gr=!0}}H=A.callback,H!==null&&(i.flags|=64,Y&&(i.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[H]:Y.push(H))}else Y={lane:H,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Z===null?(F=Z=Y,D=te):Z=Z.next=Y,E|=H;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;Y=A,A=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);Z===null&&(D=te),f.baseState=D,f.firstBaseUpdate=F,f.lastBaseUpdate=Z,p===null&&(f.shared.lanes=0),Rr|=E,i.lanes=E,i.memoizedState=te}}function zg(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Bg(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)zg(a[i],r)}var Ia=ie(null),tc=ie(0);function jg(i,r){i=Hi,le(tc,i),le(Ia,r),Hi=i|r.baseLanes}function Bf(){le(tc,Hi),le(Ia,Ia.current)}function jf(){Hi=tc.current,ce(Ia),ce(tc)}var vr=0,xe=null,Xe=null,vt=null,nc=!1,xa=!1,Os=!1,ic=0,il=0,Na=null,H2=0;function dt(){throw Error(s(321))}function qf(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!fn(i[a],r[a]))return!1;return!0}function Ff(i,r,a,l,f,p){return vr=p,xe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,$.H=i===null||i.memoizedState===null?by:Sy,Os=!1,p=a(l,f),Os=!1,xa&&(p=Fg(r,a,l,f)),qg(i),p}function qg(i){$.H=uc;var r=Xe!==null&&Xe.next!==null;if(vr=0,vt=Xe=xe=null,nc=!1,il=0,Na=null,r)throw Error(s(300));i===null||Pt||(i=i.dependencies,i!==null&&Xu(i)&&(Pt=!0))}function Fg(i,r,a,l){xe=i;var f=0;do{if(xa&&(Na=null),il=0,xa=!1,25<=f)throw Error(s(301));if(f+=1,vt=Xe=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}$.H=W2,p=r(a,l)}while(xa);return p}function G2(){var i=$.H,r=i.useState()[0];return r=typeof r.then=="function"?rl(r):r,i=i.useState()[0],(Xe!==null?Xe.memoizedState:null)!==i&&(xe.flags|=1024),r}function Hf(){var i=ic!==0;return ic=0,i}function Gf(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function Yf(i){if(nc){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}nc=!1}vr=0,vt=Xe=xe=null,xa=!1,il=ic=0,Na=null}function sn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?xe.memoizedState=vt=i:vt=vt.next=i,vt}function Et(){if(Xe===null){var i=xe.alternate;i=i!==null?i.memoizedState:null}else i=Xe.next;var r=vt===null?xe.memoizedState:vt.next;if(r!==null)vt=r,Xe=i;else{if(i===null)throw xe.alternate===null?Error(s(467)):Error(s(310));Xe=i,i={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},vt===null?xe.memoizedState=vt=i:vt=vt.next=i}return vt}function Qf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rl(i){var r=il;return il+=1,Na===null&&(Na=[]),i=kg(Na,i,r),r=xe,(vt===null?r.memoizedState:vt.next)===null&&(r=r.alternate,$.H=r===null||r.memoizedState===null?by:Sy),i}function rc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return rl(i);if(i.$$typeof===Q)return Kt(i)}throw Error(s(438,String(i)))}function Kf(i){var r=null,a=xe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=xe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Qf(),xe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),l=0;l<i;l++)a[l]=O;return r.index++,a}function Ui(i,r){return typeof r=="function"?r(i):r}function sc(i){var r=Et();return $f(r,Xe,i)}function $f(i,r,a){var l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=i.baseQueue,p=l.pending;if(p!==null){if(f!==null){var E=f.next;f.next=p.next,p.next=E}r.baseQueue=f=p,l.pending=null}if(p=i.baseState,f===null)i.memoizedState=p;else{r=f.next;var A=E=null,D=null,F=r,Z=!1;do{var te=F.lane&-536870913;if(te!==F.lane?(Be&te)===te:(vr&te)===te){var H=F.revertLane;if(H===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),te===Ra&&(Z=!0);else if((vr&H)===H){F=F.next,H===Ra&&(Z=!0);continue}else te={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(A=D=te,E=p):D=D.next=te,xe.lanes|=H,Rr|=H;te=F.action,Os&&a(p,te),p=F.hasEagerState?F.eagerState:a(p,te)}else H={lane:te,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(A=D=H,E=p):D=D.next=H,xe.lanes|=te,Rr|=te;F=F.next}while(F!==null&&F!==r);if(D===null?E=p:D.next=A,!fn(p,i.memoizedState)&&(Pt=!0,Z&&(a=Ca,a!==null)))throw a;i.memoizedState=p,i.baseState=E,i.baseQueue=D,l.lastRenderedState=p}return f===null&&(l.lanes=0),[i.memoizedState,l.dispatch]}function Xf(i){var r=Et(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var l=a.dispatch,f=a.pending,p=r.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do p=i(p,E.action),E=E.next;while(E!==f);fn(p,r.memoizedState)||(Pt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,l]}function Hg(i,r,a){var l=xe,f=Et(),p=Fe;if(p){if(a===void 0)throw Error(s(407));a=a()}else a=r();var E=!fn((Xe||f).memoizedState,a);E&&(f.memoizedState=a,Pt=!0),f=f.queue;var A=Qg.bind(null,l,f,i);if(sl(2048,8,A,[i]),f.getSnapshot!==r||E||vt!==null&&vt.memoizedState.tag&1){if(l.flags|=2048,Da(9,ac(),Yg.bind(null,l,f,a,r),null),tt===null)throw Error(s(349));p||(vr&124)!==0||Gg(l,r,a)}return a}function Gg(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=xe.updateQueue,r===null?(r=Qf(),xe.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function Yg(i,r,a,l){r.value=a,r.getSnapshot=l,Kg(r)&&$g(i)}function Qg(i,r,a){return a(function(){Kg(r)&&$g(i)})}function Kg(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!fn(i,a)}catch{return!0}}function $g(i){var r=wa(i,2);r!==null&&_n(r,i,2)}function Wf(i){var r=sn();if(typeof i=="function"){var a=i;if(i=a(),Os){cn(!0);try{a()}finally{cn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:i},r}function Xg(i,r,a,l){return i.baseState=a,$f(i,Xe,typeof l=="function"?l:Ui)}function Y2(i,r,a,l,f){if(lc(i))throw Error(s(485));if(i=r.action,i!==null){var p={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};$.T!==null?a(!0):p.isTransition=!1,l(p),a=r.pending,a===null?(p.next=r.pending=p,Wg(r,p)):(p.next=a.next,r.pending=a.next=p)}}function Wg(i,r){var a=r.action,l=r.payload,f=i.state;if(r.isTransition){var p=$.T,E={};$.T=E;try{var A=a(f,l),D=$.S;D!==null&&D(E,A),Zg(i,r,A)}catch(F){Zf(i,r,F)}finally{$.T=p}}else try{p=a(f,l),Zg(i,r,p)}catch(F){Zf(i,r,F)}}function Zg(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Jg(i,r,l)},function(l){return Zf(i,r,l)}):Jg(i,r,a)}function Jg(i,r,a){r.status="fulfilled",r.value=a,ey(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,Wg(i,a)))}function Zf(i,r,a){var l=i.pending;if(i.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,ey(r),r=r.next;while(r!==l)}i.action=null}function ey(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function ty(i,r){return r}function ny(i,r){if(Fe){var a=tt.formState;if(a!==null){e:{var l=xe;if(Fe){if(ct){t:{for(var f=ct,p=ai;f.nodeType!==8;){if(!p){f=null;break t}if(f=qn(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){ct=qn(f.nextSibling),l=f.data==="F!";break e}}xs(l)}l=!1}l&&(r=a[0])}}return a=sn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ty,lastRenderedState:r},a.queue=l,a=Ty.bind(null,xe,l),l.dispatch=a,l=Wf(!1),p=id.bind(null,xe,!1,l.queue),l=sn(),f={state:r,dispatch:null,action:i,pending:null},l.queue=f,a=Y2.bind(null,xe,f,p,a),f.dispatch=a,l.memoizedState=i,[r,a,!1]}function iy(i){var r=Et();return ry(r,Xe,i)}function ry(i,r,a){if(r=$f(i,r,ty)[0],i=sc(Ui)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=rl(r)}catch(E){throw E===Zo?Ju:E}else l=r;r=Et();var f=r.queue,p=f.dispatch;return a!==r.memoizedState&&(xe.flags|=2048,Da(9,ac(),Q2.bind(null,f,a),null)),[l,p,i]}function Q2(i,r){i.action=r}function sy(i){var r=Et(),a=Xe;if(a!==null)return ry(r,a,i);Et(),r=r.memoizedState,a=Et();var l=a.queue.dispatch;return a.memoizedState=i,[r,l,!1]}function Da(i,r,a,l){return i={tag:i,create:a,deps:l,inst:r,next:null},r=xe.updateQueue,r===null&&(r=Qf(),xe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(l=a.next,a.next=i,i.next=l,r.lastEffect=i),i}function ac(){return{destroy:void 0,resource:void 0}}function ay(){return Et().memoizedState}function oc(i,r,a,l){var f=sn();l=l===void 0?null:l,xe.flags|=i,f.memoizedState=Da(1|r,ac(),a,l)}function sl(i,r,a,l){var f=Et();l=l===void 0?null:l;var p=f.memoizedState.inst;Xe!==null&&l!==null&&qf(l,Xe.memoizedState.deps)?f.memoizedState=Da(r,p,a,l):(xe.flags|=i,f.memoizedState=Da(1|r,p,a,l))}function oy(i,r){oc(8390656,8,i,r)}function ly(i,r){sl(2048,8,i,r)}function uy(i,r){return sl(4,2,i,r)}function cy(i,r){return sl(4,4,i,r)}function hy(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function fy(i,r,a){a=a!=null?a.concat([i]):null,sl(4,4,hy.bind(null,r,i),a)}function Jf(){}function dy(i,r){var a=Et();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&qf(r,l[1])?l[0]:(a.memoizedState=[i,r],i)}function my(i,r){var a=Et();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&qf(r,l[1]))return l[0];if(l=i(),Os){cn(!0);try{i()}finally{cn(!1)}}return a.memoizedState=[l,r],l}function ed(i,r,a){return a===void 0||(vr&1073741824)!==0?i.memoizedState=r:(i.memoizedState=a,i=y_(),xe.lanes|=i,Rr|=i,a)}function py(i,r,a,l){return fn(a,r)?a:Ia.current!==null?(i=ed(i,a,l),fn(i,r)||(Pt=!0),i):(vr&42)===0?(Pt=!0,i.memoizedState=a):(i=y_(),xe.lanes|=i,Rr|=i,r)}function gy(i,r,a,l,f){var p=ae.p;ae.p=p!==0&&8>p?p:8;var E=$.T,A={};$.T=A,id(i,!1,r,a);try{var D=f(),F=$.S;if(F!==null&&F(A,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=F2(D,l);al(i,r,Z,yn(i))}else al(i,r,l,yn(i))}catch(te){al(i,r,{then:function(){},status:"rejected",reason:te},yn())}finally{ae.p=p,$.T=E}}function K2(){}function td(i,r,a,l){if(i.tag!==5)throw Error(s(476));var f=yy(i).queue;gy(i,f,r,he,a===null?K2:function(){return _y(i),a(l)})}function yy(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:he},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function _y(i){var r=yy(i).next.queue;al(i,r,{},yn())}function nd(){return Kt(bl)}function vy(){return Et().memoizedState}function Ey(){return Et().memoizedState}function $2(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=yn();i=yr(a);var l=_r(r,i,a);l!==null&&(_n(l,r,a),el(l,r,a)),r={cache:Mf()},i.payload=r;return}r=r.return}}function X2(i,r,a){var l=yn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},lc(i)?wy(r,a):(a=wf(i,r,a,l),a!==null&&(_n(a,i,l),Ay(a,r,l)))}function Ty(i,r,a){var l=yn();al(i,r,a,l)}function al(i,r,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(lc(i))wy(r,f);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var E=r.lastRenderedState,A=p(E,a);if(f.hasEagerState=!0,f.eagerState=A,fn(A,E))return Gu(i,r,f,0),tt===null&&Hu(),!1}catch{}finally{}if(a=wf(i,r,f,l),a!==null)return _n(a,i,l),Ay(a,r,l),!0}return!1}function id(i,r,a,l){if(l={lane:2,revertLane:Pd(),action:l,hasEagerState:!1,eagerState:null,next:null},lc(i)){if(r)throw Error(s(479))}else r=wf(i,a,l,2),r!==null&&_n(r,i,2)}function lc(i){var r=i.alternate;return i===xe||r!==null&&r===xe}function wy(i,r){xa=nc=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function Ay(i,r,a){if((a&4194048)!==0){var l=r.lanes;l&=i.pendingLanes,a|=l,r.lanes=a,Io(i,a)}}var uc={readContext:Kt,use:rc,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt},by={readContext:Kt,use:rc,useCallback:function(i,r){return sn().memoizedState=[i,r===void 0?null:r],i},useContext:Kt,useEffect:oy,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,oc(4194308,4,hy.bind(null,r,i),a)},useLayoutEffect:function(i,r){return oc(4194308,4,i,r)},useInsertionEffect:function(i,r){oc(4,2,i,r)},useMemo:function(i,r){var a=sn();r=r===void 0?null:r;var l=i();if(Os){cn(!0);try{i()}finally{cn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(i,r,a){var l=sn();if(a!==void 0){var f=a(r);if(Os){cn(!0);try{a(r)}finally{cn(!1)}}}else f=r;return l.memoizedState=l.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},l.queue=i,i=i.dispatch=X2.bind(null,xe,i),[l.memoizedState,i]},useRef:function(i){var r=sn();return i={current:i},r.memoizedState=i},useState:function(i){i=Wf(i);var r=i.queue,a=Ty.bind(null,xe,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:Jf,useDeferredValue:function(i,r){var a=sn();return ed(a,i,r)},useTransition:function(){var i=Wf(!1);return i=gy.bind(null,xe,i.queue,!0,!1),sn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var l=xe,f=sn();if(Fe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),tt===null)throw Error(s(349));(Be&124)!==0||Gg(l,r,a)}f.memoizedState=a;var p={value:a,getSnapshot:r};return f.queue=p,oy(Qg.bind(null,l,p,i),[i]),l.flags|=2048,Da(9,ac(),Yg.bind(null,l,p,a,r),null),a},useId:function(){var i=sn(),r=tt.identifierPrefix;if(Fe){var a=Pi,l=Vi;a=(l&~(1<<32-Qt(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=ic++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=H2++,r="«"+r+"r"+a.toString(32)+"»";return i.memoizedState=r},useHostTransitionStatus:nd,useFormState:ny,useActionState:ny,useOptimistic:function(i){var r=sn();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=id.bind(null,xe,!0,a),a.dispatch=r,[i,r]},useMemoCache:Kf,useCacheRefresh:function(){return sn().memoizedState=$2.bind(null,xe)}},Sy={readContext:Kt,use:rc,useCallback:dy,useContext:Kt,useEffect:ly,useImperativeHandle:fy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:my,useReducer:sc,useRef:ay,useState:function(){return sc(Ui)},useDebugValue:Jf,useDeferredValue:function(i,r){var a=Et();return py(a,Xe.memoizedState,i,r)},useTransition:function(){var i=sc(Ui)[0],r=Et().memoizedState;return[typeof i=="boolean"?i:rl(i),r]},useSyncExternalStore:Hg,useId:vy,useHostTransitionStatus:nd,useFormState:iy,useActionState:iy,useOptimistic:function(i,r){var a=Et();return Xg(a,Xe,i,r)},useMemoCache:Kf,useCacheRefresh:Ey},W2={readContext:Kt,use:rc,useCallback:dy,useContext:Kt,useEffect:ly,useImperativeHandle:fy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:my,useReducer:Xf,useRef:ay,useState:function(){return Xf(Ui)},useDebugValue:Jf,useDeferredValue:function(i,r){var a=Et();return Xe===null?ed(a,i,r):py(a,Xe.memoizedState,i,r)},useTransition:function(){var i=Xf(Ui)[0],r=Et().memoizedState;return[typeof i=="boolean"?i:rl(i),r]},useSyncExternalStore:Hg,useId:vy,useHostTransitionStatus:nd,useFormState:sy,useActionState:sy,useOptimistic:function(i,r){var a=Et();return Xe!==null?Xg(a,Xe,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Kf,useCacheRefresh:Ey},Ma=null,ol=0;function cc(i){var r=ol;return ol+=1,Ma===null&&(Ma=[]),kg(Ma,i,r)}function ll(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function hc(i,r){throw r.$$typeof===T?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Ry(i){var r=i._init;return r(i._payload)}function Cy(i){function r(z,L){if(i){var q=z.deletions;q===null?(z.deletions=[L],z.flags|=16):q.push(L)}}function a(z,L){if(!i)return null;for(;L!==null;)r(z,L),L=L.sibling;return null}function l(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function f(z,L){return z=Oi(z,L),z.index=0,z.sibling=null,z}function p(z,L,q){return z.index=q,i?(q=z.alternate,q!==null?(q=q.index,q<L?(z.flags|=67108866,L):q):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function E(z){return i&&z.alternate===null&&(z.flags|=67108866),z}function A(z,L,q,J){return L===null||L.tag!==6?(L=bf(q,z.mode,J),L.return=z,L):(L=f(L,q),L.return=z,L)}function D(z,L,q,J){var pe=q.type;return pe===C?Z(z,L,q.props.children,J,q.key):L!==null&&(L.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===R&&Ry(pe)===L.type)?(L=f(L,q.props),ll(L,q),L.return=z,L):(L=Qu(q.type,q.key,q.props,null,z.mode,J),ll(L,q),L.return=z,L)}function F(z,L,q,J){return L===null||L.tag!==4||L.stateNode.containerInfo!==q.containerInfo||L.stateNode.implementation!==q.implementation?(L=Sf(q,z.mode,J),L.return=z,L):(L=f(L,q.children||[]),L.return=z,L)}function Z(z,L,q,J,pe){return L===null||L.tag!==7?(L=Ss(q,z.mode,J,pe),L.return=z,L):(L=f(L,q),L.return=z,L)}function te(z,L,q){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=bf(""+L,z.mode,q),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case w:return q=Qu(L.type,L.key,L.props,null,z.mode,q),ll(q,L),q.return=z,q;case S:return L=Sf(L,z.mode,q),L.return=z,L;case R:var J=L._init;return L=J(L._payload),te(z,L,q)}if(Le(L)||U(L))return L=Ss(L,z.mode,q,null),L.return=z,L;if(typeof L.then=="function")return te(z,cc(L),q);if(L.$$typeof===Q)return te(z,Wu(z,L),q);hc(z,L)}return null}function H(z,L,q,J){var pe=L!==null?L.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return pe!==null?null:A(z,L,""+q,J);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case w:return q.key===pe?D(z,L,q,J):null;case S:return q.key===pe?F(z,L,q,J):null;case R:return pe=q._init,q=pe(q._payload),H(z,L,q,J)}if(Le(q)||U(q))return pe!==null?null:Z(z,L,q,J,null);if(typeof q.then=="function")return H(z,L,cc(q),J);if(q.$$typeof===Q)return H(z,L,Wu(z,q),J);hc(z,q)}return null}function Y(z,L,q,J,pe){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return z=z.get(q)||null,A(L,z,""+J,pe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case w:return z=z.get(J.key===null?q:J.key)||null,D(L,z,J,pe);case S:return z=z.get(J.key===null?q:J.key)||null,F(L,z,J,pe);case R:var De=J._init;return J=De(J._payload),Y(z,L,q,J,pe)}if(Le(J)||U(J))return z=z.get(q)||null,Z(L,z,J,pe,null);if(typeof J.then=="function")return Y(z,L,q,cc(J),pe);if(J.$$typeof===Q)return Y(z,L,q,Wu(L,J),pe);hc(L,J)}return null}function Ae(z,L,q,J){for(var pe=null,De=null,ge=L,Ee=L=0,Lt=null;ge!==null&&Ee<q.length;Ee++){ge.index>Ee?(Lt=ge,ge=null):Lt=ge.sibling;var qe=H(z,ge,q[Ee],J);if(qe===null){ge===null&&(ge=Lt);break}i&&ge&&qe.alternate===null&&r(z,ge),L=p(qe,L,Ee),De===null?pe=qe:De.sibling=qe,De=qe,ge=Lt}if(Ee===q.length)return a(z,ge),Fe&&Cs(z,Ee),pe;if(ge===null){for(;Ee<q.length;Ee++)ge=te(z,q[Ee],J),ge!==null&&(L=p(ge,L,Ee),De===null?pe=ge:De.sibling=ge,De=ge);return Fe&&Cs(z,Ee),pe}for(ge=l(ge);Ee<q.length;Ee++)Lt=Y(ge,z,Ee,q[Ee],J),Lt!==null&&(i&&Lt.alternate!==null&&ge.delete(Lt.key===null?Ee:Lt.key),L=p(Lt,L,Ee),De===null?pe=Lt:De.sibling=Lt,De=Lt);return i&&ge.forEach(function(Pr){return r(z,Pr)}),Fe&&Cs(z,Ee),pe}function ve(z,L,q,J){if(q==null)throw Error(s(151));for(var pe=null,De=null,ge=L,Ee=L=0,Lt=null,qe=q.next();ge!==null&&!qe.done;Ee++,qe=q.next()){ge.index>Ee?(Lt=ge,ge=null):Lt=ge.sibling;var Pr=H(z,ge,qe.value,J);if(Pr===null){ge===null&&(ge=Lt);break}i&&ge&&Pr.alternate===null&&r(z,ge),L=p(Pr,L,Ee),De===null?pe=Pr:De.sibling=Pr,De=Pr,ge=Lt}if(qe.done)return a(z,ge),Fe&&Cs(z,Ee),pe;if(ge===null){for(;!qe.done;Ee++,qe=q.next())qe=te(z,qe.value,J),qe!==null&&(L=p(qe,L,Ee),De===null?pe=qe:De.sibling=qe,De=qe);return Fe&&Cs(z,Ee),pe}for(ge=l(ge);!qe.done;Ee++,qe=q.next())qe=Y(ge,z,Ee,qe.value,J),qe!==null&&(i&&qe.alternate!==null&&ge.delete(qe.key===null?Ee:qe.key),L=p(qe,L,Ee),De===null?pe=qe:De.sibling=qe,De=qe);return i&&ge.forEach(function(Zw){return r(z,Zw)}),Fe&&Cs(z,Ee),pe}function Ze(z,L,q,J){if(typeof q=="object"&&q!==null&&q.type===C&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case w:e:{for(var pe=q.key;L!==null;){if(L.key===pe){if(pe=q.type,pe===C){if(L.tag===7){a(z,L.sibling),J=f(L,q.props.children),J.return=z,z=J;break e}}else if(L.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===R&&Ry(pe)===L.type){a(z,L.sibling),J=f(L,q.props),ll(J,q),J.return=z,z=J;break e}a(z,L);break}else r(z,L);L=L.sibling}q.type===C?(J=Ss(q.props.children,z.mode,J,q.key),J.return=z,z=J):(J=Qu(q.type,q.key,q.props,null,z.mode,J),ll(J,q),J.return=z,z=J)}return E(z);case S:e:{for(pe=q.key;L!==null;){if(L.key===pe)if(L.tag===4&&L.stateNode.containerInfo===q.containerInfo&&L.stateNode.implementation===q.implementation){a(z,L.sibling),J=f(L,q.children||[]),J.return=z,z=J;break e}else{a(z,L);break}else r(z,L);L=L.sibling}J=Sf(q,z.mode,J),J.return=z,z=J}return E(z);case R:return pe=q._init,q=pe(q._payload),Ze(z,L,q,J)}if(Le(q))return Ae(z,L,q,J);if(U(q)){if(pe=U(q),typeof pe!="function")throw Error(s(150));return q=pe.call(q),ve(z,L,q,J)}if(typeof q.then=="function")return Ze(z,L,cc(q),J);if(q.$$typeof===Q)return Ze(z,L,Wu(z,q),J);hc(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,L!==null&&L.tag===6?(a(z,L.sibling),J=f(L,q),J.return=z,z=J):(a(z,L),J=bf(q,z.mode,J),J.return=z,z=J),E(z)):a(z,L)}return function(z,L,q,J){try{ol=0;var pe=Ze(z,L,q,J);return Ma=null,pe}catch(ge){if(ge===Zo||ge===Ju)throw ge;var De=dn(29,ge,null,z.mode);return De.lanes=J,De.return=z,De}finally{}}}var Oa=Cy(!0),Iy=Cy(!1),Dn=ie(null),oi=null;function Er(i){var r=i.alternate;le(xt,xt.current&1),le(Dn,i),oi===null&&(r===null||Ia.current!==null||r.memoizedState!==null)&&(oi=i)}function xy(i){if(i.tag===22){if(le(xt,xt.current),le(Dn,i),oi===null){var r=i.alternate;r!==null&&r.memoizedState!==null&&(oi=i)}}else Tr()}function Tr(){le(xt,xt.current),le(Dn,Dn.current)}function zi(i){ce(Dn),oi===i&&(oi=null),ce(xt)}var xt=ie(0);function fc(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Qd(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function rd(i,r,a,l){r=i.memoizedState,a=a(l,r),a=a==null?r:_({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var sd={enqueueSetState:function(i,r,a){i=i._reactInternals;var l=yn(),f=yr(l);f.payload=r,a!=null&&(f.callback=a),r=_r(i,f,l),r!==null&&(_n(r,i,l),el(r,i,l))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var l=yn(),f=yr(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=_r(i,f,l),r!==null&&(_n(r,i,l),el(r,i,l))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=yn(),l=yr(a);l.tag=2,r!=null&&(l.callback=r),r=_r(i,l,a),r!==null&&(_n(r,i,a),el(r,i,a))}};function Ny(i,r,a,l,f,p,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(l,p,E):r.prototype&&r.prototype.isPureReactComponent?!Ho(a,l)||!Ho(f,p):!0}function Dy(i,r,a,l){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==i&&sd.enqueueReplaceState(r,r.state,null)}function Vs(i,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(i=i.defaultProps){a===r&&(a=_({},a));for(var f in i)a[f]===void 0&&(a[f]=i[f])}return a}var dc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function My(i){dc(i)}function Oy(i){console.error(i)}function Vy(i){dc(i)}function mc(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Py(i,r,a){try{var l=i.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function ad(i,r,a){return a=yr(a),a.tag=3,a.payload={element:null},a.callback=function(){mc(i,r)},a}function ky(i){return i=yr(i),i.tag=3,i}function Ly(i,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=l.value;i.payload=function(){return f(p)},i.callback=function(){Py(r,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(i.callback=function(){Py(r,a,l),typeof f!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function Z2(i,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&$o(r,a,f,!0),a=Dn.current,a!==null){switch(a.tag){case 13:return oi===null?Nd():a.alternate===null&&ht===0&&(ht=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Pf?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Md(i,l,f)),!1;case 22:return a.flags|=65536,l===Pf?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Md(i,l,f)),!1}throw Error(s(435,a.tag))}return Md(i,l,f),Nd(),!1}if(Fe)return r=Dn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==If&&(i=Error(s(422),{cause:l}),Ko(Cn(i,a)))):(l!==If&&(r=Error(s(423),{cause:l}),Ko(Cn(r,a))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,l=Cn(l,a),f=ad(i.stateNode,l,f),Uf(i,f),ht!==4&&(ht=2)),!1;var p=Error(s(520),{cause:l});if(p=Cn(p,a),pl===null?pl=[p]:pl.push(p),ht!==4&&(ht=2),r===null)return!0;l=Cn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=f&-f,a.lanes|=i,i=ad(a.stateNode,l,i),Uf(a,i),!1;case 1:if(r=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Cr===null||!Cr.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=ky(f),Ly(f,i,a,l),Uf(a,f),!1}a=a.return}while(a!==null);return!1}var Uy=Error(s(461)),Pt=!1;function jt(i,r,a,l){r.child=i===null?Iy(r,null,a,l):Oa(r,i.child,a,l)}function zy(i,r,a,l,f){a=a.render;var p=r.ref;if("ref"in l){var E={};for(var A in l)A!=="ref"&&(E[A]=l[A])}else E=l;return Ds(r),l=Ff(i,r,a,E,p,f),A=Hf(),i!==null&&!Pt?(Gf(i,r,f),Bi(i,r,f)):(Fe&&A&&Rf(r),r.flags|=1,jt(i,r,l,f),r.child)}function By(i,r,a,l,f){if(i===null){var p=a.type;return typeof p=="function"&&!Af(p)&&p.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=p,jy(i,r,p,l,f)):(i=Qu(a.type,null,l,r,r.mode,f),i.ref=r.ref,i.return=r,r.child=i)}if(p=i.child,!md(i,f)){var E=p.memoizedProps;if(a=a.compare,a=a!==null?a:Ho,a(E,l)&&i.ref===r.ref)return Bi(i,r,f)}return r.flags|=1,i=Oi(p,l),i.ref=r.ref,i.return=r,r.child=i}function jy(i,r,a,l,f){if(i!==null){var p=i.memoizedProps;if(Ho(p,l)&&i.ref===r.ref)if(Pt=!1,r.pendingProps=l=p,md(i,f))(i.flags&131072)!==0&&(Pt=!0);else return r.lanes=i.lanes,Bi(i,r,f)}return od(i,r,a,l,f)}function qy(i,r,a){var l=r.pendingProps,f=l.children,p=i!==null?i.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=p!==null?p.baseLanes|a:a,i!==null){for(f=r.child=i.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;r.childLanes=p&~l}else r.childLanes=0,r.child=null;return Fy(i,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Zu(r,p!==null?p.cachePool:null),p!==null?jg(r,p):Bf(),xy(r);else return r.lanes=r.childLanes=536870912,Fy(i,r,p!==null?p.baseLanes|a:a,a)}else p!==null?(Zu(r,p.cachePool),jg(r,p),Tr(),r.memoizedState=null):(i!==null&&Zu(r,null),Bf(),Tr());return jt(i,r,f,a),r.child}function Fy(i,r,a,l){var f=Vf();return f=f===null?null:{parent:It._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},i!==null&&Zu(r,null),Bf(),xy(r),i!==null&&$o(i,r,l,!0),null}function pc(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function od(i,r,a,l,f){return Ds(r),a=Ff(i,r,a,l,void 0,f),l=Hf(),i!==null&&!Pt?(Gf(i,r,f),Bi(i,r,f)):(Fe&&l&&Rf(r),r.flags|=1,jt(i,r,a,f),r.child)}function Hy(i,r,a,l,f,p){return Ds(r),r.updateQueue=null,a=Fg(r,l,a,f),qg(i),l=Hf(),i!==null&&!Pt?(Gf(i,r,p),Bi(i,r,p)):(Fe&&l&&Rf(r),r.flags|=1,jt(i,r,a,p),r.child)}function Gy(i,r,a,l,f){if(Ds(r),r.stateNode===null){var p=Aa,E=a.contextType;typeof E=="object"&&E!==null&&(p=Kt(E)),p=new a(l,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=sd,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=l,p.state=r.memoizedState,p.refs={},kf(r),E=a.contextType,p.context=typeof E=="object"&&E!==null?Kt(E):Aa,p.state=r.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(rd(r,a,E,l),p.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&sd.enqueueReplaceState(p,p.state,null),nl(r,l,p,f),tl(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(i===null){p=r.stateNode;var A=r.memoizedProps,D=Vs(a,A);p.props=D;var F=p.context,Z=a.contextType;E=Aa,typeof Z=="object"&&Z!==null&&(E=Kt(Z));var te=a.getDerivedStateFromProps;Z=typeof te=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=r.pendingProps!==A,Z||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||F!==E)&&Dy(r,p,l,E),gr=!1;var H=r.memoizedState;p.state=H,nl(r,l,p,f),tl(),F=r.memoizedState,A||H!==F||gr?(typeof te=="function"&&(rd(r,a,te,l),F=r.memoizedState),(D=gr||Ny(r,a,D,l,H,F,E))?(Z||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=F),p.props=l,p.state=F,p.context=E,l=D):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{p=r.stateNode,Lf(i,r),E=r.memoizedProps,Z=Vs(a,E),p.props=Z,te=r.pendingProps,H=p.context,F=a.contextType,D=Aa,typeof F=="object"&&F!==null&&(D=Kt(F)),A=a.getDerivedStateFromProps,(F=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==te||H!==D)&&Dy(r,p,l,D),gr=!1,H=r.memoizedState,p.state=H,nl(r,l,p,f),tl();var Y=r.memoizedState;E!==te||H!==Y||gr||i!==null&&i.dependencies!==null&&Xu(i.dependencies)?(typeof A=="function"&&(rd(r,a,A,l),Y=r.memoizedState),(Z=gr||Ny(r,a,Z,l,H,Y,D)||i!==null&&i.dependencies!==null&&Xu(i.dependencies))?(F||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,Y,D),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,Y,D)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===i.memoizedProps&&H===i.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&H===i.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=Y),p.props=l,p.state=Y,p.context=D,l=Z):(typeof p.componentDidUpdate!="function"||E===i.memoizedProps&&H===i.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&H===i.memoizedState||(r.flags|=1024),l=!1)}return p=l,pc(i,r),l=(r.flags&128)!==0,p||l?(p=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,i!==null&&l?(r.child=Oa(r,i.child,null,f),r.child=Oa(r,null,a,f)):jt(i,r,a,f),r.memoizedState=p.state,i=r.child):i=Bi(i,r,f),i}function Yy(i,r,a,l){return Qo(),r.flags|=256,jt(i,r,a,l),r.child}var ld={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ud(i){return{baseLanes:i,cachePool:Og()}}function cd(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=Mn),i}function Qy(i,r,a){var l=r.pendingProps,f=!1,p=(r.flags&128)!==0,E;if((E=p)||(E=i!==null&&i.memoizedState===null?!1:(xt.current&2)!==0),E&&(f=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,i===null){if(Fe){if(f?Er(r):Tr(),Fe){var A=ct,D;if(D=A){e:{for(D=A,A=ai;D.nodeType!==8;){if(!A){A=null;break e}if(D=qn(D.nextSibling),D===null){A=null;break e}}A=D}A!==null?(r.memoizedState={dehydrated:A,treeContext:Rs!==null?{id:Vi,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},D=dn(18,null,null,0),D.stateNode=A,D.return=r,r.child=D,rn=r,ct=null,D=!0):D=!1}D||xs(r)}if(A=r.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return Qd(A)?r.lanes=32:r.lanes=536870912,null;zi(r)}return A=l.children,l=l.fallback,f?(Tr(),f=r.mode,A=gc({mode:"hidden",children:A},f),l=Ss(l,f,a,null),A.return=r,l.return=r,A.sibling=l,r.child=A,f=r.child,f.memoizedState=ud(a),f.childLanes=cd(i,E,a),r.memoizedState=ld,l):(Er(r),hd(r,A))}if(D=i.memoizedState,D!==null&&(A=D.dehydrated,A!==null)){if(p)r.flags&256?(Er(r),r.flags&=-257,r=fd(i,r,a)):r.memoizedState!==null?(Tr(),r.child=i.child,r.flags|=128,r=null):(Tr(),f=l.fallback,A=r.mode,l=gc({mode:"visible",children:l.children},A),f=Ss(f,A,a,null),f.flags|=2,l.return=r,f.return=r,l.sibling=f,r.child=l,Oa(r,i.child,null,a),l=r.child,l.memoizedState=ud(a),l.childLanes=cd(i,E,a),r.memoizedState=ld,r=f);else if(Er(r),Qd(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var F=E.dgst;E=F,l=Error(s(419)),l.stack="",l.digest=E,Ko({value:l,source:null,stack:null}),r=fd(i,r,a)}else if(Pt||$o(i,r,a,!1),E=(a&i.childLanes)!==0,Pt||E){if(E=tt,E!==null&&(l=a&-a,l=(l&42)!==0?1:lr(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==D.retryLane))throw D.retryLane=l,wa(i,l),_n(E,i,l),Uy;A.data==="$?"||Nd(),r=fd(i,r,a)}else A.data==="$?"?(r.flags|=192,r.child=i.child,r=null):(i=D.treeContext,ct=qn(A.nextSibling),rn=r,Fe=!0,Is=null,ai=!1,i!==null&&(xn[Nn++]=Vi,xn[Nn++]=Pi,xn[Nn++]=Rs,Vi=i.id,Pi=i.overflow,Rs=r),r=hd(r,l.children),r.flags|=4096);return r}return f?(Tr(),f=l.fallback,A=r.mode,D=i.child,F=D.sibling,l=Oi(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,F!==null?f=Oi(F,f):(f=Ss(f,A,a,null),f.flags|=2),f.return=r,l.return=r,l.sibling=f,r.child=l,l=f,f=r.child,A=i.child.memoizedState,A===null?A=ud(a):(D=A.cachePool,D!==null?(F=It._currentValue,D=D.parent!==F?{parent:F,pool:F}:D):D=Og(),A={baseLanes:A.baseLanes|a,cachePool:D}),f.memoizedState=A,f.childLanes=cd(i,E,a),r.memoizedState=ld,l):(Er(r),a=i.child,i=a.sibling,a=Oi(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,i!==null&&(E=r.deletions,E===null?(r.deletions=[i],r.flags|=16):E.push(i)),r.child=a,r.memoizedState=null,a)}function hd(i,r){return r=gc({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function gc(i,r){return i=dn(22,i,null,r),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function fd(i,r,a){return Oa(r,i.child,null,a),i=hd(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function Ky(i,r,a){i.lanes|=r;var l=i.alternate;l!==null&&(l.lanes|=r),Nf(i.return,r,a)}function dd(i,r,a,l,f){var p=i.memoizedState;p===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=a,p.tailMode=f)}function $y(i,r,a){var l=r.pendingProps,f=l.revealOrder,p=l.tail;if(jt(i,r,l.children,a),l=xt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ky(i,a,r);else if(i.tag===19)Ky(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}l&=1}switch(le(xt,l),f){case"forwards":for(a=r.child,f=null;a!==null;)i=a.alternate,i!==null&&fc(i)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),dd(r,!1,f,a,p);break;case"backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(i=f.alternate,i!==null&&fc(i)===null){r.child=f;break}i=f.sibling,f.sibling=a,a=f,f=i}dd(r,!0,a,null,p);break;case"together":dd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Bi(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),Rr|=r.lanes,(a&r.childLanes)===0)if(i!==null){if($o(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=Oi(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=Oi(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function md(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Xu(i)))}function J2(i,r,a){switch(r.tag){case 3:et(r,r.stateNode.containerInfo),pr(r,It,i.memoizedState.cache),Qo();break;case 27:case 5:or(r);break;case 4:et(r,r.stateNode.containerInfo);break;case 10:pr(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Er(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Qy(i,r,a):(Er(r),i=Bi(i,r,a),i!==null?i.sibling:null);Er(r);break;case 19:var f=(i.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||($o(i,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return $y(i,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(xt,xt.current),l)break;return null;case 22:case 23:return r.lanes=0,qy(i,r,a);case 24:pr(r,It,i.memoizedState.cache)}return Bi(i,r,a)}function Xy(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Pt=!0;else{if(!md(i,a)&&(r.flags&128)===0)return Pt=!1,J2(i,r,a);Pt=(i.flags&131072)!==0}else Pt=!1,Fe&&(r.flags&1048576)!==0&&Rg(r,$u,r.index);switch(r.lanes=0,r.tag){case 16:e:{i=r.pendingProps;var l=r.elementType,f=l._init;if(l=f(l._payload),r.type=l,typeof l=="function")Af(l)?(i=Vs(l,i),r.tag=1,r=Gy(null,r,l,i,a)):(r.tag=0,r=od(null,r,l,i,a));else{if(l!=null){if(f=l.$$typeof,f===se){r.tag=11,r=zy(null,r,l,i,a);break e}else if(f===V){r.tag=14,r=By(null,r,l,i,a);break e}}throw r=me(l)||l,Error(s(306,r,""))}}return r;case 0:return od(i,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=Vs(l,r.pendingProps),Gy(i,r,l,f,a);case 3:e:{if(et(r,r.stateNode.containerInfo),i===null)throw Error(s(387));l=r.pendingProps;var p=r.memoizedState;f=p.element,Lf(i,r),nl(r,l,null,a);var E=r.memoizedState;if(l=E.cache,pr(r,It,l),l!==p.cache&&Df(r,[It],a,!0),tl(),l=E.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=Yy(i,r,l,a);break e}else if(l!==f){f=Cn(Error(s(424)),r),Ko(f),r=Yy(i,r,l,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ct=qn(i.firstChild),rn=r,Fe=!0,Is=null,ai=!0,a=Iy(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Qo(),l===f){r=Bi(i,r,a);break e}jt(i,r,l,a)}r=r.child}return r;case 26:return pc(i,r),i===null?(a=e0(r.type,null,r.pendingProps,null))?r.memoizedState=a:Fe||(a=r.type,i=r.pendingProps,l=Nc(be.current).createElement(a),l[St]=r,l[yt]=i,Ft(l,a,i),ft(l),r.stateNode=l):r.memoizedState=e0(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return or(r),i===null&&Fe&&(l=r.stateNode=W_(r.type,r.pendingProps,be.current),rn=r,ai=!0,f=ct,Nr(r.type)?(Kd=f,ct=qn(l.firstChild)):ct=f),jt(i,r,r.pendingProps.children,a),pc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Fe&&((f=l=ct)&&(l=Cw(l,r.type,r.pendingProps,ai),l!==null?(r.stateNode=l,rn=r,ct=qn(l.firstChild),ai=!1,f=!0):f=!1),f||xs(r)),or(r),f=r.type,p=r.pendingProps,E=i!==null?i.memoizedProps:null,l=p.children,Hd(f,p)?l=null:E!==null&&Hd(f,E)&&(r.flags|=32),r.memoizedState!==null&&(f=Ff(i,r,G2,null,null,a),bl._currentValue=f),pc(i,r),jt(i,r,l,a),r.child;case 6:return i===null&&Fe&&((i=a=ct)&&(a=Iw(a,r.pendingProps,ai),a!==null?(r.stateNode=a,rn=r,ct=null,i=!0):i=!1),i||xs(r)),null;case 13:return Qy(i,r,a);case 4:return et(r,r.stateNode.containerInfo),l=r.pendingProps,i===null?r.child=Oa(r,null,l,a):jt(i,r,l,a),r.child;case 11:return zy(i,r,r.type,r.pendingProps,a);case 7:return jt(i,r,r.pendingProps,a),r.child;case 8:return jt(i,r,r.pendingProps.children,a),r.child;case 12:return jt(i,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,pr(r,r.type,l.value),jt(i,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,Ds(r),f=Kt(f),l=l(f),r.flags|=1,jt(i,r,l,a),r.child;case 14:return By(i,r,r.type,r.pendingProps,a);case 15:return jy(i,r,r.type,r.pendingProps,a);case 19:return $y(i,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},i===null?(a=gc(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=Oi(i.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return qy(i,r,a);case 24:return Ds(r),l=Kt(It),i===null?(f=Vf(),f===null&&(f=tt,p=Mf(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),r.memoizedState={parent:l,cache:f},kf(r),pr(r,It,f)):((i.lanes&a)!==0&&(Lf(i,r),nl(r,null,null,a),tl()),f=i.memoizedState,p=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),pr(r,It,l)):(l=p.cache,pr(r,It,l),l!==f.cache&&Df(r,[It],a,!0))),jt(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ji(i){i.flags|=4}function Wy(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!s0(r)){if(r=Dn.current,r!==null&&((Be&4194048)===Be?oi!==null:(Be&62914560)!==Be&&(Be&536870912)===0||r!==oi))throw Jo=Pf,Vg;i.flags|=8192}}function yc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Ro():536870912,i.lanes|=r,La|=r)}function ul(i,r){if(!Fe)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:l.sibling=null}}function ot(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,l=0;if(r)for(var f=i.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=l,i.childLanes=a,r}function ew(i,r,a){var l=r.pendingProps;switch(Cf(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(r),null;case 1:return ot(r),null;case 3:return a=r.stateNode,l=null,i!==null&&(l=i.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Li(It),Kn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Yo(r)?ji(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,xg())),ot(r),null;case 26:return a=r.memoizedState,i===null?(ji(r),a!==null?(ot(r),Wy(r,a)):(ot(r),r.flags&=-16777217)):a?a!==i.memoizedState?(ji(r),ot(r),Wy(r,a)):(ot(r),r.flags&=-16777217):(i.memoizedProps!==l&&ji(r),ot(r),r.flags&=-16777217),null;case 27:Ei(r),a=be.current;var f=r.type;if(i!==null&&r.stateNode!=null)i.memoizedProps!==l&&ji(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ot(r),null}i=_e.current,Yo(r)?Cg(r):(i=W_(f,l,a),r.stateNode=i,ji(r))}return ot(r),null;case 5:if(Ei(r),a=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==l&&ji(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ot(r),null}if(i=_e.current,Yo(r))Cg(r);else{switch(f=Nc(be.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?i.multiple=!0:l.size&&(i.size=l.size);break;default:i=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}i[St]=r,i[yt]=l;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=i;e:switch(Ft(i,a,l),a){case"button":case"input":case"select":case"textarea":i=!!l.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&ji(r)}}return ot(r),r.flags&=-16777217,null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==l&&ji(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(i=be.current,Yo(r)){if(i=r.stateNode,a=r.memoizedProps,l=null,f=rn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}i[St]=r,i=!!(i.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||H_(i.nodeValue,a)),i||xs(r)}else i=Nc(i).createTextNode(l),i[St]=r,r.stateNode=i}return ot(r),null;case 13:if(l=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=Yo(r),l!==null&&l.dehydrated!==null){if(i===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[St]=r}else Qo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ot(r),f=!1}else f=xg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(zi(r),r):(zi(r),null)}if(zi(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,i=i!==null&&i.memoizedState!==null,a){l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var p=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048)}return a!==i&&a&&(r.child.flags|=8192),yc(r,r.updateQueue),ot(r),null;case 4:return Kn(),i===null&&zd(r.stateNode.containerInfo),ot(r),null;case 10:return Li(r.type),ot(r),null;case 19:if(ce(xt),f=r.memoizedState,f===null)return ot(r),null;if(l=(r.flags&128)!==0,p=f.rendering,p===null)if(l)ul(f,!1);else{if(ht!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(p=fc(i),p!==null){for(r.flags|=128,ul(f,!1),i=p.updateQueue,r.updateQueue=i,yc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)Sg(a,i),a=a.sibling;return le(xt,xt.current&1|2),r.child}i=i.sibling}f.tail!==null&&Tn()>Ec&&(r.flags|=128,l=!0,ul(f,!1),r.lanes=4194304)}else{if(!l)if(i=fc(p),i!==null){if(r.flags|=128,l=!0,i=i.updateQueue,r.updateQueue=i,yc(r,i),ul(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Fe)return ot(r),null}else 2*Tn()-f.renderingStartTime>Ec&&a!==536870912&&(r.flags|=128,l=!0,ul(f,!1),r.lanes=4194304);f.isBackwards?(p.sibling=r.child,r.child=p):(i=f.last,i!==null?i.sibling=p:r.child=p,f.last=p)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=Tn(),r.sibling=null,i=xt.current,le(xt,l?i&1|2:i&1),r):(ot(r),null);case 22:case 23:return zi(r),jf(),l=r.memoizedState!==null,i!==null?i.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(ot(r),r.subtreeFlags&6&&(r.flags|=8192)):ot(r),a=r.updateQueue,a!==null&&yc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),i!==null&&ce(Ms),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Li(It),ot(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function tw(i,r){switch(Cf(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Li(It),Kn(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Ei(r),null;case 13:if(zi(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Qo()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ce(xt),null;case 4:return Kn(),null;case 10:return Li(r.type),null;case 22:case 23:return zi(r),jf(),i!==null&&ce(Ms),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Li(It),null;case 25:return null;default:return null}}function Zy(i,r){switch(Cf(r),r.tag){case 3:Li(It),Kn();break;case 26:case 27:case 5:Ei(r);break;case 4:Kn();break;case 13:zi(r);break;case 19:ce(xt);break;case 10:Li(r.type);break;case 22:case 23:zi(r),jf(),i!==null&&ce(Ms);break;case 24:Li(It)}}function cl(i,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&i)===i){l=void 0;var p=a.create,E=a.inst;l=p(),E.destroy=l}a=a.next}while(a!==f)}}catch(A){Je(r,r.return,A)}}function wr(i,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var p=f.next;l=p;do{if((l.tag&i)===i){var E=l.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,f=r;var D=a,F=A;try{F()}catch(Z){Je(f,D,Z)}}}l=l.next}while(l!==p)}}catch(Z){Je(r,r.return,Z)}}function Jy(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{Bg(r,a)}catch(l){Je(i,i.return,l)}}}function e_(i,r,a){a.props=Vs(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(l){Je(i,r,l)}}function hl(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var l=i.stateNode;break;case 30:l=i.stateNode;break;default:l=i.stateNode}typeof a=="function"?i.refCleanup=a(l):a.current=l}}catch(f){Je(i,r,f)}}function li(i,r){var a=i.ref,l=i.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Je(i,r,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Je(i,r,f)}else a.current=null}function t_(i){var r=i.type,a=i.memoizedProps,l=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Je(i,i.return,f)}}function pd(i,r,a){try{var l=i.stateNode;ww(l,i.type,a,r),l[yt]=r}catch(f){Je(i,i.return,f)}}function n_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Nr(i.type)||i.tag===4}function gd(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||n_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Nr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function yd(i,r,a){var l=i.tag;if(l===5||l===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=xc));else if(l!==4&&(l===27&&Nr(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(yd(i,r,a),i=i.sibling;i!==null;)yd(i,r,a),i=i.sibling}function _c(i,r,a){var l=i.tag;if(l===5||l===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(l!==4&&(l===27&&Nr(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(_c(i,r,a),i=i.sibling;i!==null;)_c(i,r,a),i=i.sibling}function i_(i){var r=i.stateNode,a=i.memoizedProps;try{for(var l=i.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Ft(r,l,a),r[St]=i,r[yt]=a}catch(p){Je(i,i.return,p)}}var qi=!1,mt=!1,_d=!1,r_=typeof WeakSet=="function"?WeakSet:Set,kt=null;function nw(i,r){if(i=i.containerInfo,qd=kc,i=pg(i),gf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var E=0,A=-1,D=-1,F=0,Z=0,te=i,H=null;t:for(;;){for(var Y;te!==a||f!==0&&te.nodeType!==3||(A=E+f),te!==p||l!==0&&te.nodeType!==3||(D=E+l),te.nodeType===3&&(E+=te.nodeValue.length),(Y=te.firstChild)!==null;)H=te,te=Y;for(;;){if(te===i)break t;if(H===a&&++F===f&&(A=E),H===p&&++Z===l&&(D=E),(Y=te.nextSibling)!==null)break;te=H,H=te.parentNode}te=Y}a=A===-1||D===-1?null:{start:A,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Fd={focusedElem:i,selectionRange:a},kc=!1,kt=r;kt!==null;)if(r=kt,i=r.child,(r.subtreeFlags&1024)!==0&&i!==null)i.return=r,kt=i;else for(;kt!==null;){switch(r=kt,p=r.alternate,i=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,a=r,f=p.memoizedProps,p=p.memoizedState,l=a.stateNode;try{var Ae=Vs(a.type,f,a.elementType===a.type);i=l.getSnapshotBeforeUpdate(Ae,p),l.__reactInternalSnapshotBeforeUpdate=i}catch(ve){Je(a,a.return,ve)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)Yd(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Yd(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,kt=i;break}kt=r.return}}function s_(i,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ar(i,a),l&4&&cl(5,a);break;case 1:if(Ar(i,a),l&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(E){Je(a,a.return,E)}else{var f=Vs(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(f,r,i.__reactInternalSnapshotBeforeUpdate)}catch(E){Je(a,a.return,E)}}l&64&&Jy(a),l&512&&hl(a,a.return);break;case 3:if(Ar(i,a),l&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Bg(i,r)}catch(E){Je(a,a.return,E)}}break;case 27:r===null&&l&4&&i_(a);case 26:case 5:Ar(i,a),r===null&&l&4&&t_(a),l&512&&hl(a,a.return);break;case 12:Ar(i,a);break;case 13:Ar(i,a),l&4&&l_(i,a),l&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=hw.bind(null,a),xw(i,a))));break;case 22:if(l=a.memoizedState!==null||qi,!l){r=r!==null&&r.memoizedState!==null||mt,f=qi;var p=mt;qi=l,(mt=r)&&!p?br(i,a,(a.subtreeFlags&8772)!==0):Ar(i,a),qi=f,mt=p}break;case 30:break;default:Ar(i,a)}}function a_(i){var r=i.alternate;r!==null&&(i.alternate=null,a_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&hr(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var st=null,an=!1;function Fi(i,r,a){for(a=a.child;a!==null;)o_(i,r,a),a=a.sibling}function o_(i,r,a){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(ut,a)}catch{}switch(a.tag){case 26:mt||li(a,r),Fi(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:mt||li(a,r);var l=st,f=an;Nr(a.type)&&(st=a.stateNode,an=!1),Fi(i,r,a),El(a.stateNode),st=l,an=f;break;case 5:mt||li(a,r);case 6:if(l=st,f=an,st=null,Fi(i,r,a),st=l,an=f,st!==null)if(an)try{(st.nodeType===9?st.body:st.nodeName==="HTML"?st.ownerDocument.body:st).removeChild(a.stateNode)}catch(p){Je(a,r,p)}else try{st.removeChild(a.stateNode)}catch(p){Je(a,r,p)}break;case 18:st!==null&&(an?(i=st,$_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Il(i)):$_(st,a.stateNode));break;case 4:l=st,f=an,st=a.stateNode.containerInfo,an=!0,Fi(i,r,a),st=l,an=f;break;case 0:case 11:case 14:case 15:mt||wr(2,a,r),mt||wr(4,a,r),Fi(i,r,a);break;case 1:mt||(li(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&e_(a,r,l)),Fi(i,r,a);break;case 21:Fi(i,r,a);break;case 22:mt=(l=mt)||a.memoizedState!==null,Fi(i,r,a),mt=l;break;default:Fi(i,r,a)}}function l_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Il(i)}catch(a){Je(r,r.return,a)}}function iw(i){switch(i.tag){case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new r_),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new r_),r;default:throw Error(s(435,i.tag))}}function vd(i,r){var a=iw(i);r.forEach(function(l){var f=fw.bind(null,i,l);a.has(l)||(a.add(l),l.then(f,f))})}function mn(i,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],p=i,E=r,A=E;e:for(;A!==null;){switch(A.tag){case 27:if(Nr(A.type)){st=A.stateNode,an=!1;break e}break;case 5:st=A.stateNode,an=!1;break e;case 3:case 4:st=A.stateNode.containerInfo,an=!0;break e}A=A.return}if(st===null)throw Error(s(160));o_(p,E,f),st=null,an=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)u_(r,i),r=r.sibling}var jn=null;function u_(i,r){var a=i.alternate,l=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:mn(r,i),pn(i),l&4&&(wr(3,i,i.return),cl(3,i),wr(5,i,i.return));break;case 1:mn(r,i),pn(i),l&512&&(mt||a===null||li(a,a.return)),l&64&&qi&&(i=i.updateQueue,i!==null&&(l=i.callbacks,l!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=jn;if(mn(r,i),pn(i),l&512&&(mt||a===null||li(a,a.return)),l&4){var p=a!==null?a.memoizedState:null;if(l=i.memoizedState,a===null)if(l===null)if(i.stateNode===null){e:{l=i.type,a=i.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":p=f.getElementsByTagName("title")[0],(!p||p[us]||p[St]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(l),f.head.insertBefore(p,f.querySelector("head > title"))),Ft(p,l,a),p[St]=i,ft(p),l=p;break e;case"link":var E=i0("link","href",f).get(l+(a.href||""));if(E){for(var A=0;A<E.length;A++)if(p=E[A],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(A,1);break t}}p=f.createElement(l),Ft(p,l,a),f.head.appendChild(p);break;case"meta":if(E=i0("meta","content",f).get(l+(a.content||""))){for(A=0;A<E.length;A++)if(p=E[A],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(A,1);break t}}p=f.createElement(l),Ft(p,l,a),f.head.appendChild(p);break;default:throw Error(s(468,l))}p[St]=i,ft(p),l=p}i.stateNode=l}else r0(f,i.type,i.stateNode);else i.stateNode=n0(f,l,i.memoizedProps);else p!==l?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,l===null?r0(f,i.type,i.stateNode):n0(f,l,i.memoizedProps)):l===null&&i.stateNode!==null&&pd(i,i.memoizedProps,a.memoizedProps)}break;case 27:mn(r,i),pn(i),l&512&&(mt||a===null||li(a,a.return)),a!==null&&l&4&&pd(i,i.memoizedProps,a.memoizedProps);break;case 5:if(mn(r,i),pn(i),l&512&&(mt||a===null||li(a,a.return)),i.flags&32){f=i.stateNode;try{An(f,"")}catch(Y){Je(i,i.return,Y)}}l&4&&i.stateNode!=null&&(f=i.memoizedProps,pd(i,f,a!==null?a.memoizedProps:f)),l&1024&&(_d=!0);break;case 6:if(mn(r,i),pn(i),l&4){if(i.stateNode===null)throw Error(s(162));l=i.memoizedProps,a=i.stateNode;try{a.nodeValue=l}catch(Y){Je(i,i.return,Y)}}break;case 3:if(Oc=null,f=jn,jn=Dc(r.containerInfo),mn(r,i),jn=f,pn(i),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Il(r.containerInfo)}catch(Y){Je(i,i.return,Y)}_d&&(_d=!1,c_(i));break;case 4:l=jn,jn=Dc(i.stateNode.containerInfo),mn(r,i),pn(i),jn=l;break;case 12:mn(r,i),pn(i);break;case 13:mn(r,i),pn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Sd=Tn()),l&4&&(l=i.updateQueue,l!==null&&(i.updateQueue=null,vd(i,l)));break;case 22:f=i.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,F=qi,Z=mt;if(qi=F||f,mt=Z||D,mn(r,i),mt=Z,qi=F,pn(i),l&8192)e:for(r=i.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||D||qi||mt||Ps(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){D=a=r;try{if(p=D.stateNode,f)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=D.stateNode;var te=D.memoizedProps.style,H=te!=null&&te.hasOwnProperty("display")?te.display:null;A.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(Y){Je(D,D.return,Y)}}}else if(r.tag===6){if(a===null){D=r;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(Y){Je(D,D.return,Y)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=i.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,vd(i,a))));break;case 19:mn(r,i),pn(i),l&4&&(l=i.updateQueue,l!==null&&(i.updateQueue=null,vd(i,l)));break;case 30:break;case 21:break;default:mn(r,i),pn(i)}}function pn(i){var r=i.flags;if(r&2){try{for(var a,l=i.return;l!==null;){if(n_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,p=gd(i);_c(i,p,f);break;case 5:var E=a.stateNode;a.flags&32&&(An(E,""),a.flags&=-33);var A=gd(i);_c(i,A,E);break;case 3:case 4:var D=a.stateNode.containerInfo,F=gd(i);yd(i,F,D);break;default:throw Error(s(161))}}catch(Z){Je(i,i.return,Z)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function c_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;c_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function Ar(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)s_(i,r.alternate,r),r=r.sibling}function Ps(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:wr(4,r,r.return),Ps(r);break;case 1:li(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&e_(r,r.return,a),Ps(r);break;case 27:El(r.stateNode);case 26:case 5:li(r,r.return),Ps(r);break;case 22:r.memoizedState===null&&Ps(r);break;case 30:Ps(r);break;default:Ps(r)}i=i.sibling}}function br(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=i,p=r,E=p.flags;switch(p.tag){case 0:case 11:case 15:br(f,p,a),cl(4,p);break;case 1:if(br(f,p,a),l=p,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){Je(l,l.return,F)}if(l=p,f=l.updateQueue,f!==null){var A=l.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)zg(D[f],A)}catch(F){Je(l,l.return,F)}}a&&E&64&&Jy(p),hl(p,p.return);break;case 27:i_(p);case 26:case 5:br(f,p,a),a&&l===null&&E&4&&t_(p),hl(p,p.return);break;case 12:br(f,p,a);break;case 13:br(f,p,a),a&&E&4&&l_(f,p);break;case 22:p.memoizedState===null&&br(f,p,a),hl(p,p.return);break;case 30:break;default:br(f,p,a)}r=r.sibling}}function Ed(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Xo(a))}function Td(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Xo(i))}function ui(i,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)h_(i,r,a,l),r=r.sibling}function h_(i,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:ui(i,r,a,l),f&2048&&cl(9,r);break;case 1:ui(i,r,a,l);break;case 3:ui(i,r,a,l),f&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Xo(i)));break;case 12:if(f&2048){ui(i,r,a,l),i=r.stateNode;try{var p=r.memoizedProps,E=p.id,A=p.onPostCommit;typeof A=="function"&&A(E,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(D){Je(r,r.return,D)}}else ui(i,r,a,l);break;case 13:ui(i,r,a,l);break;case 23:break;case 22:p=r.stateNode,E=r.alternate,r.memoizedState!==null?p._visibility&2?ui(i,r,a,l):fl(i,r):p._visibility&2?ui(i,r,a,l):(p._visibility|=2,Va(i,r,a,l,(r.subtreeFlags&10256)!==0)),f&2048&&Ed(E,r);break;case 24:ui(i,r,a,l),f&2048&&Td(r.alternate,r);break;default:ui(i,r,a,l)}}function Va(i,r,a,l,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var p=i,E=r,A=a,D=l,F=E.flags;switch(E.tag){case 0:case 11:case 15:Va(p,E,A,D,f),cl(8,E);break;case 23:break;case 22:var Z=E.stateNode;E.memoizedState!==null?Z._visibility&2?Va(p,E,A,D,f):fl(p,E):(Z._visibility|=2,Va(p,E,A,D,f)),f&&F&2048&&Ed(E.alternate,E);break;case 24:Va(p,E,A,D,f),f&&F&2048&&Td(E.alternate,E);break;default:Va(p,E,A,D,f)}r=r.sibling}}function fl(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,l=r,f=l.flags;switch(l.tag){case 22:fl(a,l),f&2048&&Ed(l.alternate,l);break;case 24:fl(a,l),f&2048&&Td(l.alternate,l);break;default:fl(a,l)}r=r.sibling}}var dl=8192;function Pa(i){if(i.subtreeFlags&dl)for(i=i.child;i!==null;)f_(i),i=i.sibling}function f_(i){switch(i.tag){case 26:Pa(i),i.flags&dl&&i.memoizedState!==null&&qw(jn,i.memoizedState,i.memoizedProps);break;case 5:Pa(i);break;case 3:case 4:var r=jn;jn=Dc(i.stateNode.containerInfo),Pa(i),jn=r;break;case 22:i.memoizedState===null&&(r=i.alternate,r!==null&&r.memoizedState!==null?(r=dl,dl=16777216,Pa(i),dl=r):Pa(i));break;default:Pa(i)}}function d_(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function ml(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];kt=l,p_(l,i)}d_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)m_(i),i=i.sibling}function m_(i){switch(i.tag){case 0:case 11:case 15:ml(i),i.flags&2048&&wr(9,i,i.return);break;case 3:ml(i);break;case 12:ml(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,vc(i)):ml(i);break;default:ml(i)}}function vc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];kt=l,p_(l,i)}d_(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:wr(8,r,r.return),vc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,vc(r));break;default:vc(r)}i=i.sibling}}function p_(i,r){for(;kt!==null;){var a=kt;switch(a.tag){case 0:case 11:case 15:wr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Xo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,kt=l;else e:for(a=i;kt!==null;){l=kt;var f=l.sibling,p=l.return;if(a_(l),l===a){kt=null;break e}if(f!==null){f.return=p,kt=f;break e}kt=p}}}var rw={getCacheForType:function(i){var r=Kt(It),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a}},sw=typeof WeakMap=="function"?WeakMap:Map,Qe=0,tt=null,Me=null,Be=0,Ke=0,gn=null,Sr=!1,ka=!1,wd=!1,Hi=0,ht=0,Rr=0,ks=0,Ad=0,Mn=0,La=0,pl=null,on=null,bd=!1,Sd=0,Ec=1/0,Tc=null,Cr=null,qt=0,Ir=null,Ua=null,za=0,Rd=0,Cd=null,g_=null,gl=0,Id=null;function yn(){if((Qe&2)!==0&&Be!==0)return Be&-Be;if($.T!==null){var i=Ra;return i!==0?i:Pd()}return ur()}function y_(){Mn===0&&(Mn=(Be&536870912)===0||Fe?So():536870912);var i=Dn.current;return i!==null&&(i.flags|=32),Mn}function _n(i,r,a){(i===tt&&(Ke===2||Ke===9)||i.cancelPendingCommit!==null)&&(Ba(i,0),xr(i,Be,Mn,!1)),wi(i,a),((Qe&2)===0||i!==tt)&&(i===tt&&((Qe&2)===0&&(ks|=a),ht===4&&xr(i,Be,Mn,!1)),ci(i))}function __(i,r,a){if((Qe&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&i.expiredLanes)===0||ls(i,r),f=l?lw(i,r):Dd(i,r,!0),p=l;do{if(f===0){ka&&!l&&xr(i,r,0,!1);break}else{if(a=i.current.alternate,p&&!aw(a)){f=Dd(i,r,!1),p=!1;continue}if(f===2){if(p=r,i.errorRecoveryDisabledLanes&p)var E=0;else E=i.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var A=i;f=pl;var D=A.current.memoizedState.isDehydrated;if(D&&(Ba(A,E).flags|=256),E=Dd(A,E,!1),E!==2){if(wd&&!D){A.errorRecoveryDisabledLanes|=p,ks|=p,f=4;break e}p=on,on=f,p!==null&&(on===null?on=p:on.push.apply(on,p))}f=E}if(p=!1,f!==2)continue}}if(f===1){Ba(i,0),xr(i,r,0,!0);break}e:{switch(l=i,p=f,p){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:xr(l,r,Mn,!Sr);break e;case 2:on=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=Sd+300-Tn(),10<f)){if(xr(l,r,Mn,!Sr),ia(l,0,!0)!==0)break e;l.timeoutHandle=Q_(v_.bind(null,l,a,on,Tc,bd,r,Mn,ks,La,Sr,p,2,-0,0),f);break e}v_(l,a,on,Tc,bd,r,Mn,ks,La,Sr,p,0,-0,0)}}break}while(!0);ci(i)}function v_(i,r,a,l,f,p,E,A,D,F,Z,te,H,Y){if(i.timeoutHandle=-1,te=r.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(Al={stylesheets:null,count:0,unsuspend:jw},f_(r),te=Fw(),te!==null)){i.cancelPendingCommit=te(R_.bind(null,i,r,p,a,l,f,E,A,D,Z,1,H,Y)),xr(i,p,E,!F);return}R_(i,r,p,a,l,f,E,A,D)}function aw(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],p=f.getSnapshot;f=f.value;try{if(!fn(p(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function xr(i,r,a,l){r&=~Ad,r&=~ks,i.suspendedLanes|=r,i.pingedLanes&=~r,l&&(i.warmLanes|=r),l=i.expirationTimes;for(var f=r;0<f;){var p=31-Qt(f),E=1<<p;l[p]=-1,f&=~E}a!==0&&$n(i,a,r)}function wc(){return(Qe&6)===0?(yl(0),!1):!0}function xd(){if(Me!==null){if(Ke===0)var i=Me.return;else i=Me,ki=Ns=null,Yf(i),Ma=null,ol=0,i=Me;for(;i!==null;)Zy(i.alternate,i),i=i.return;Me=null}}function Ba(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,bw(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),xd(),tt=i,Me=a=Oi(i.current,null),Be=r,Ke=0,gn=null,Sr=!1,ka=ls(i,r),wd=!1,La=Mn=Ad=ks=Rr=ht=0,on=pl=null,bd=!1,(r&8)!==0&&(r|=r&32);var l=i.entangledLanes;if(l!==0)for(i=i.entanglements,l&=r;0<l;){var f=31-Qt(l),p=1<<f;r|=i[f],l&=~p}return Hi=r,Hu(),a}function E_(i,r){xe=null,$.H=uc,r===Zo||r===Ju?(r=Lg(),Ke=3):r===Vg?(r=Lg(),Ke=4):Ke=r===Uy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,gn=r,Me===null&&(ht=1,mc(i,Cn(r,i.current)))}function T_(){var i=$.H;return $.H=uc,i===null?uc:i}function w_(){var i=$.A;return $.A=rw,i}function Nd(){ht=4,Sr||(Be&4194048)!==Be&&Dn.current!==null||(ka=!0),(Rr&134217727)===0&&(ks&134217727)===0||tt===null||xr(tt,Be,Mn,!1)}function Dd(i,r,a){var l=Qe;Qe|=2;var f=T_(),p=w_();(tt!==i||Be!==r)&&(Tc=null,Ba(i,r)),r=!1;var E=ht;e:do try{if(Ke!==0&&Me!==null){var A=Me,D=gn;switch(Ke){case 8:xd(),E=6;break e;case 3:case 2:case 9:case 6:Dn.current===null&&(r=!0);var F=Ke;if(Ke=0,gn=null,ja(i,A,D,F),a&&ka){E=0;break e}break;default:F=Ke,Ke=0,gn=null,ja(i,A,D,F)}}ow(),E=ht;break}catch(Z){E_(i,Z)}while(!0);return r&&i.shellSuspendCounter++,ki=Ns=null,Qe=l,$.H=f,$.A=p,Me===null&&(tt=null,Be=0,Hu()),E}function ow(){for(;Me!==null;)A_(Me)}function lw(i,r){var a=Qe;Qe|=2;var l=T_(),f=w_();tt!==i||Be!==r?(Tc=null,Ec=Tn()+500,Ba(i,r)):ka=ls(i,r);e:do try{if(Ke!==0&&Me!==null){r=Me;var p=gn;t:switch(Ke){case 1:Ke=0,gn=null,ja(i,r,p,1);break;case 2:case 9:if(Pg(p)){Ke=0,gn=null,b_(r);break}r=function(){Ke!==2&&Ke!==9||tt!==i||(Ke=7),ci(i)},p.then(r,r);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:Pg(p)?(Ke=0,gn=null,b_(r)):(Ke=0,gn=null,ja(i,r,p,7));break;case 5:var E=null;switch(Me.tag){case 26:E=Me.memoizedState;case 5:case 27:var A=Me;if(!E||s0(E)){Ke=0,gn=null;var D=A.sibling;if(D!==null)Me=D;else{var F=A.return;F!==null?(Me=F,Ac(F)):Me=null}break t}}Ke=0,gn=null,ja(i,r,p,5);break;case 6:Ke=0,gn=null,ja(i,r,p,6);break;case 8:xd(),ht=6;break e;default:throw Error(s(462))}}uw();break}catch(Z){E_(i,Z)}while(!0);return ki=Ns=null,$.H=l,$.A=f,Qe=a,Me!==null?0:(tt=null,Be=0,Hu(),ht)}function uw(){for(;Me!==null&&!To();)A_(Me)}function A_(i){var r=Xy(i.alternate,i,Hi);i.memoizedProps=i.pendingProps,r===null?Ac(i):Me=r}function b_(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=Hy(a,r,r.pendingProps,r.type,void 0,Be);break;case 11:r=Hy(a,r,r.pendingProps,r.type.render,r.ref,Be);break;case 5:Yf(r);default:Zy(a,r),r=Me=Sg(r,Hi),r=Xy(a,r,Hi)}i.memoizedProps=i.pendingProps,r===null?Ac(i):Me=r}function ja(i,r,a,l){ki=Ns=null,Yf(r),Ma=null,ol=0;var f=r.return;try{if(Z2(i,f,r,a,Be)){ht=1,mc(i,Cn(a,i.current)),Me=null;return}}catch(p){if(f!==null)throw Me=f,p;ht=1,mc(i,Cn(a,i.current)),Me=null;return}r.flags&32768?(Fe||l===1?i=!0:ka||(Be&536870912)!==0?i=!1:(Sr=i=!0,(l===2||l===9||l===3||l===6)&&(l=Dn.current,l!==null&&l.tag===13&&(l.flags|=16384))),S_(r,i)):Ac(r)}function Ac(i){var r=i;do{if((r.flags&32768)!==0){S_(r,Sr);return}i=r.return;var a=ew(r.alternate,r,Hi);if(a!==null){Me=a;return}if(r=r.sibling,r!==null){Me=r;return}Me=r=i}while(r!==null);ht===0&&(ht=5)}function S_(i,r){do{var a=tw(i.alternate,i);if(a!==null){a.flags&=32767,Me=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){Me=i;return}Me=i=a}while(i!==null);ht=6,Me=null}function R_(i,r,a,l,f,p,E,A,D){i.cancelPendingCommit=null;do bc();while(qt!==0);if((Qe&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(p=r.lanes|r.childLanes,p|=Tf,Co(i,a,p,E,A,D),i===tt&&(Me=tt=null,Be=0),Ua=r,Ir=i,za=a,Rd=p,Cd=f,g_=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,dw(rs,function(){return D_(),null})):(i.callbackNode=null,i.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=$.T,$.T=null,f=ae.p,ae.p=2,E=Qe,Qe|=4;try{nw(i,r,a)}finally{Qe=E,ae.p=f,$.T=l}}qt=1,C_(),I_(),x_()}}function C_(){if(qt===1){qt=0;var i=Ir,r=Ua,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var l=ae.p;ae.p=2;var f=Qe;Qe|=4;try{u_(r,i);var p=Fd,E=pg(i.containerInfo),A=p.focusedElem,D=p.selectionRange;if(E!==A&&A&&A.ownerDocument&&mg(A.ownerDocument.documentElement,A)){if(D!==null&&gf(A)){var F=D.start,Z=D.end;if(Z===void 0&&(Z=F),"selectionStart"in A)A.selectionStart=F,A.selectionEnd=Math.min(Z,A.value.length);else{var te=A.ownerDocument||document,H=te&&te.defaultView||window;if(H.getSelection){var Y=H.getSelection(),Ae=A.textContent.length,ve=Math.min(D.start,Ae),Ze=D.end===void 0?ve:Math.min(D.end,Ae);!Y.extend&&ve>Ze&&(E=Ze,Ze=ve,ve=E);var z=dg(A,ve),L=dg(A,Ze);if(z&&L&&(Y.rangeCount!==1||Y.anchorNode!==z.node||Y.anchorOffset!==z.offset||Y.focusNode!==L.node||Y.focusOffset!==L.offset)){var q=te.createRange();q.setStart(z.node,z.offset),Y.removeAllRanges(),ve>Ze?(Y.addRange(q),Y.extend(L.node,L.offset)):(q.setEnd(L.node,L.offset),Y.addRange(q))}}}}for(te=[],Y=A;Y=Y.parentNode;)Y.nodeType===1&&te.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<te.length;A++){var J=te[A];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}kc=!!qd,Fd=qd=null}finally{Qe=f,ae.p=l,$.T=a}}i.current=r,qt=2}}function I_(){if(qt===2){qt=0;var i=Ir,r=Ua,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var l=ae.p;ae.p=2;var f=Qe;Qe|=4;try{s_(i,r.alternate,r)}finally{Qe=f,ae.p=l,$.T=a}}qt=3}}function x_(){if(qt===4||qt===3){qt=0,vu();var i=Ir,r=Ua,a=za,l=g_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?qt=5:(qt=0,Ua=Ir=null,N_(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(Cr=null),ra(a),r=r.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(ut,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=$.T,f=ae.p,ae.p=2,$.T=null;try{for(var p=i.onRecoverableError,E=0;E<l.length;E++){var A=l[E];p(A.value,{componentStack:A.stack})}}finally{$.T=r,ae.p=f}}(za&3)!==0&&bc(),ci(i),f=i.pendingLanes,(a&4194090)!==0&&(f&42)!==0?i===Id?gl++:(gl=0,Id=i):gl=0,yl(0)}}function N_(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Xo(r)))}function bc(i){return C_(),I_(),x_(),D_()}function D_(){if(qt!==5)return!1;var i=Ir,r=Rd;Rd=0;var a=ra(za),l=$.T,f=ae.p;try{ae.p=32>a?32:a,$.T=null,a=Cd,Cd=null;var p=Ir,E=za;if(qt=0,Ua=Ir=null,za=0,(Qe&6)!==0)throw Error(s(331));var A=Qe;if(Qe|=4,m_(p.current),h_(p,p.current,E,a),Qe=A,yl(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(ut,p)}catch{}return!0}finally{ae.p=f,$.T=l,N_(i,r)}}function M_(i,r,a){r=Cn(a,r),r=ad(i.stateNode,r,2),i=_r(i,r,2),i!==null&&(wi(i,2),ci(i))}function Je(i,r,a){if(i.tag===3)M_(i,i,a);else for(;r!==null;){if(r.tag===3){M_(r,i,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Cr===null||!Cr.has(l))){i=Cn(a,i),a=ky(2),l=_r(r,a,2),l!==null&&(Ly(a,l,r,i),wi(l,2),ci(l));break}}r=r.return}}function Md(i,r,a){var l=i.pingCache;if(l===null){l=i.pingCache=new sw;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(wd=!0,f.add(a),i=cw.bind(null,i,r,a),r.then(i,i))}function cw(i,r,a){var l=i.pingCache;l!==null&&l.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,tt===i&&(Be&a)===a&&(ht===4||ht===3&&(Be&62914560)===Be&&300>Tn()-Sd?(Qe&2)===0&&Ba(i,0):Ad|=a,La===Be&&(La=0)),ci(i)}function O_(i,r){r===0&&(r=Ro()),i=wa(i,r),i!==null&&(wi(i,r),ci(i))}function hw(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),O_(i,a)}function fw(i,r){var a=0;switch(i.tag){case 13:var l=i.stateNode,f=i.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=i.stateNode;break;case 22:l=i.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),O_(i,a)}function dw(i,r){return ns(i,r)}var Sc=null,qa=null,Od=!1,Rc=!1,Vd=!1,Ls=0;function ci(i){i!==qa&&i.next===null&&(qa===null?Sc=qa=i:qa=qa.next=i),Rc=!0,Od||(Od=!0,pw())}function yl(i,r){if(!Vd&&Rc){Vd=!0;do for(var a=!1,l=Sc;l!==null;){if(i!==0){var f=l.pendingLanes;if(f===0)var p=0;else{var E=l.suspendedLanes,A=l.pingedLanes;p=(1<<31-Qt(42|i)+1)-1,p&=f&~(E&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,L_(l,p))}else p=Be,p=ia(l,l===tt?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||ls(l,p)||(a=!0,L_(l,p));l=l.next}while(a);Vd=!1}}function mw(){V_()}function V_(){Rc=Od=!1;var i=0;Ls!==0&&(Aw()&&(i=Ls),Ls=0);for(var r=Tn(),a=null,l=Sc;l!==null;){var f=l.next,p=P_(l,r);p===0?(l.next=null,a===null?Sc=f:a.next=f,f===null&&(qa=a)):(a=l,(i!==0||(p&3)!==0)&&(Rc=!0)),l=f}yl(i)}function P_(i,r){for(var a=i.suspendedLanes,l=i.pingedLanes,f=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var E=31-Qt(p),A=1<<E,D=f[E];D===-1?((A&a)===0||(A&l)!==0)&&(f[E]=bo(A,r)):D<=r&&(i.expiredLanes|=A),p&=~A}if(r=tt,a=Be,a=ia(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),l=i.callbackNode,a===0||i===r&&(Ke===2||Ke===9)||i.cancelPendingCommit!==null)return l!==null&&l!==null&&is(l),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||ls(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(l!==null&&is(l),ra(a)){case 2:case 8:a=ta;break;case 32:a=rs;break;case 268435456:a=na;break;default:a=rs}return l=k_.bind(null,i),a=ns(a,l),i.callbackPriority=r,i.callbackNode=a,r}return l!==null&&l!==null&&is(l),i.callbackPriority=2,i.callbackNode=null,2}function k_(i,r){if(qt!==0&&qt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(bc()&&i.callbackNode!==a)return null;var l=Be;return l=ia(i,i===tt?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),l===0?null:(__(i,l,r),P_(i,Tn()),i.callbackNode!=null&&i.callbackNode===a?k_.bind(null,i):null)}function L_(i,r){if(bc())return null;__(i,r,!0)}function pw(){Sw(function(){(Qe&6)!==0?ns(wo,mw):V_()})}function Pd(){return Ls===0&&(Ls=So()),Ls}function U_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ca(""+i)}function z_(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function gw(i,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var p=U_((f[yt]||null).action),E=l.submitter;E&&(r=(r=E[yt]||null)?U_(r.formAction):E.getAttribute("formAction"),r!==null&&(p=r,E=null));var A=new ha("action","action",null,l,f);i.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ls!==0){var D=E?z_(f,E):new FormData(f);td(a,{pending:!0,data:D,method:f.method,action:p},null,D)}}else typeof p=="function"&&(A.preventDefault(),D=E?z_(f,E):new FormData(f),td(a,{pending:!0,data:D,method:f.method,action:p},p,D))},currentTarget:f}]})}}for(var kd=0;kd<Ef.length;kd++){var Ld=Ef[kd],yw=Ld.toLowerCase(),_w=Ld[0].toUpperCase()+Ld.slice(1);Bn(yw,"on"+_w)}Bn(_g,"onAnimationEnd"),Bn(vg,"onAnimationIteration"),Bn(Eg,"onAnimationStart"),Bn("dblclick","onDoubleClick"),Bn("focusin","onFocus"),Bn("focusout","onBlur"),Bn(P2,"onTransitionRun"),Bn(k2,"onTransitionStart"),Bn(L2,"onTransitionCancel"),Bn(Tg,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),Un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Un("onBeforeInput",["compositionend","keypress","textInput","paste"]),Un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_l));function B_(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var l=i[a],f=l.event;l=l.listeners;e:{var p=void 0;if(r)for(var E=l.length-1;0<=E;E--){var A=l[E],D=A.instance,F=A.currentTarget;if(A=A.listener,D!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=F;try{p(f)}catch(Z){dc(Z)}f.currentTarget=null,p=D}else for(E=0;E<l.length;E++){if(A=l[E],D=A.instance,F=A.currentTarget,A=A.listener,D!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=F;try{p(f)}catch(Z){dc(Z)}f.currentTarget=null,p=D}}}}function Oe(i,r){var a=r[xo];a===void 0&&(a=r[xo]=new Set);var l=i+"__bubble";a.has(l)||(j_(r,i,2,!1),a.add(l))}function Ud(i,r,a){var l=0;r&&(l|=4),j_(a,i,l,r)}var Cc="_reactListening"+Math.random().toString(36).slice(2);function zd(i){if(!i[Cc]){i[Cc]=!0,No.forEach(function(a){a!=="selectionchange"&&(vw.has(a)||Ud(a,!1,i),Ud(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Cc]||(r[Cc]=!0,Ud("selectionchange",!1,r))}}function j_(i,r,a,l){switch(h0(r)){case 2:var f=Yw;break;case 8:f=Qw;break;default:f=Jd}a=f.bind(null,r,a,i),f=void 0,!Sn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?i.addEventListener(r,a,{capture:!0,passive:f}):i.addEventListener(r,a,!0):f!==void 0?i.addEventListener(r,a,{passive:f}):i.addEventListener(r,a,!1)}function Bd(i,r,a,l,f){var p=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var A=l.stateNode.containerInfo;if(A===f)break;if(E===4)for(E=l.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;A!==null;){if(E=Ai(A),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){l=p=E;continue e}A=A.parentNode}}l=l.return}xu(function(){var F=p,Z=bn(a),te=[];e:{var H=wg.get(i);if(H!==void 0){var Y=ha,Ae=i;switch(i){case"keypress":if(ti(a)===0)break e;case"keydown":case"keyup":Y=ya;break;case"focusin":Ae="focus",Y=ma;break;case"focusout":Ae="blur",Y=ma;break;case"beforeblur":case"afterblur":Y=ma;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=ff;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Lu;break;case _g:case vg:case Eg:Y=pa;break;case Tg:Y=zu;break;case"scroll":case"scrollend":Y=Nu;break;case"wheel":Y=_a;break;case"copy":case"cut":case"paste":Y=ga;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=qo;break;case"toggle":case"beforetoggle":Y=ju}var ve=(r&4)!==0,Ze=!ve&&(i==="scroll"||i==="scrollend"),z=ve?H!==null?H+"Capture":null:H;ve=[];for(var L=F,q;L!==null;){var J=L;if(q=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||q===null||z===null||(J=gs(L,z),J!=null&&ve.push(vl(L,J,q))),Ze)break;L=L.return}0<ve.length&&(H=new Y(H,Ae,null,a,Z),te.push({event:H,listeners:ve}))}}if((r&7)===0){e:{if(H=i==="mouseover"||i==="pointerover",Y=i==="mouseout"||i==="pointerout",H&&a!==Ci&&(Ae=a.relatedTarget||a.fromElement)&&(Ai(Ae)||Ae[wn]))break e;if((Y||H)&&(H=Z.window===Z?Z:(H=Z.ownerDocument)?H.defaultView||H.parentWindow:window,Y?(Ae=a.relatedTarget||a.toElement,Y=F,Ae=Ae?Ai(Ae):null,Ae!==null&&(Ze=u(Ae),ve=Ae.tag,Ae!==Ze||ve!==5&&ve!==27&&ve!==6)&&(Ae=null)):(Y=null,Ae=F),Y!==Ae)){if(ve=Rn,J="onMouseLeave",z="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(ve=qo,J="onPointerLeave",z="onPointerEnter",L="pointer"),Ze=Y==null?H:Wn(Y),q=Ae==null?H:Wn(Ae),H=new ve(J,L+"leave",Y,a,Z),H.target=Ze,H.relatedTarget=q,J=null,Ai(Z)===F&&(ve=new ve(z,L+"enter",Ae,a,Z),ve.target=q,ve.relatedTarget=Ze,J=ve),Ze=J,Y&&Ae)t:{for(ve=Y,z=Ae,L=0,q=ve;q;q=Fa(q))L++;for(q=0,J=z;J;J=Fa(J))q++;for(;0<L-q;)ve=Fa(ve),L--;for(;0<q-L;)z=Fa(z),q--;for(;L--;){if(ve===z||z!==null&&ve===z.alternate)break t;ve=Fa(ve),z=Fa(z)}ve=null}else ve=null;Y!==null&&q_(te,H,Y,ve,!1),Ae!==null&&Ze!==null&&q_(te,Ze,Ae,ve,!0)}}e:{if(H=F?Wn(F):window,Y=H.nodeName&&H.nodeName.toLowerCase(),Y==="select"||Y==="input"&&H.type==="file")var pe=og;else if(Ct(H))if(lg)pe=M2;else{pe=N2;var De=x2}else Y=H.nodeName,!Y||Y.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?F&&Po(F.elementType)&&(pe=og):pe=D2;if(pe&&(pe=pe(i,F))){Mi(te,pe,a,Z);break e}De&&De(i,H,F),i==="focusout"&&F&&H.type==="number"&&F.memoizedProps.value!=null&&dr(H,"number",H.value)}switch(De=F?Wn(F):window,i){case"focusin":(Ct(De)||De.contentEditable==="true")&&(va=De,yf=F,Go=null);break;case"focusout":Go=yf=va=null;break;case"mousedown":_f=!0;break;case"contextmenu":case"mouseup":case"dragend":_f=!1,gg(te,a,Z);break;case"selectionchange":if(V2)break;case"keydown":case"keyup":gg(te,a,Z)}var ge;if(ri)e:{switch(i){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Ue?W(i,a)&&(Ee="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(v&&a.locale!=="ko"&&(Ue||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Ue&&(ge=Lo()):(ei=Z,mr="value"in ei?ei.value:ei.textContent,Ue=!0)),De=Ic(F,Ee),0<De.length&&(Ee=new Bo(Ee,i,null,a,Z),te.push({event:Ee,listeners:De}),ge?Ee.data=ge:(ge=ue(a),ge!==null&&(Ee.data=ge)))),(ge=y?Rt(i,a):ze(i,a))&&(Ee=Ic(F,"onBeforeInput"),0<Ee.length&&(De=new Bo("onBeforeInput","beforeinput",null,a,Z),te.push({event:De,listeners:Ee}),De.data=ge)),gw(te,i,F,a,Z)}B_(te,r)})}function vl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function Ic(i,r){for(var a=r+"Capture",l=[];i!==null;){var f=i,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=gs(i,a),f!=null&&l.unshift(vl(i,f,p)),f=gs(i,r),f!=null&&l.push(vl(i,f,p))),i.tag===3)return l;i=i.return}return[]}function Fa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function q_(i,r,a,l,f){for(var p=r._reactName,E=[];a!==null&&a!==l;){var A=a,D=A.alternate,F=A.stateNode;if(A=A.tag,D!==null&&D===l)break;A!==5&&A!==26&&A!==27||F===null||(D=F,f?(F=gs(a,p),F!=null&&E.unshift(vl(a,F,D))):f||(F=gs(a,p),F!=null&&E.push(vl(a,F,D)))),a=a.return}E.length!==0&&i.push({event:r,listeners:E})}var Ew=/\r\n?/g,Tw=/\u0000|\uFFFD/g;function F_(i){return(typeof i=="string"?i:""+i).replace(Ew,`
`).replace(Tw,"")}function H_(i,r){return r=F_(r),F_(i)===r}function xc(){}function We(i,r,a,l,f,p){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||An(i,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&An(i,""+l);break;case"className":Zn(i,"class",l);break;case"tabIndex":Zn(i,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Zn(i,a,l);break;case"style":Vo(i,l,p);break;case"data":if(r!=="object"){Zn(i,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){i.removeAttribute(a);break}l=ca(""+l),i.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(r!=="input"&&We(i,r,"name",f.name,f,null),We(i,r,"formEncType",f.formEncType,f,null),We(i,r,"formMethod",f.formMethod,f,null),We(i,r,"formTarget",f.formTarget,f,null)):(We(i,r,"encType",f.encType,f,null),We(i,r,"method",f.method,f,null),We(i,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){i.removeAttribute(a);break}l=ca(""+l),i.setAttribute(a,l);break;case"onClick":l!=null&&(i.onclick=xc);break;case"onScroll":l!=null&&Oe("scroll",i);break;case"onScrollEnd":l!=null&&Oe("scrollend",i);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":i.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){i.removeAttribute("xlink:href");break}a=ca(""+l),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?i.setAttribute(a,""+l):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":l===!0?i.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?i.setAttribute(a,l):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?i.setAttribute(a,l):i.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?i.removeAttribute(a):i.setAttribute(a,l);break;case"popover":Oe("beforetoggle",i),Oe("toggle",i),fr(i,"popover",l);break;case"xlinkActuate":zt(i,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":zt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":zt(i,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":zt(i,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":zt(i,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":zt(i,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":zt(i,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":zt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":zt(i,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":fr(i,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=cf.get(a)||a,fr(i,a,l))}}function jd(i,r,a,l,f,p){switch(a){case"style":Vo(i,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof l=="string"?An(i,l):(typeof l=="number"||typeof l=="bigint")&&An(i,""+l);break;case"onScroll":l!=null&&Oe("scroll",i);break;case"onScrollEnd":l!=null&&Oe("scrollend",i);break;case"onClick":l!=null&&(i.onclick=xc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),p=i[yt]||null,p=p!=null?p[a]:null,typeof p=="function"&&i.removeEventListener(r,p,f),typeof l=="function")){typeof p!="function"&&p!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,l,f);break e}a in i?i[a]=l:l===!0?i.setAttribute(a,""):fr(i,a,l)}}}function Ft(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",i),Oe("load",i);var l=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var E=a[p];if(E!=null)switch(p){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:We(i,r,p,E,a,null)}}f&&We(i,r,"srcSet",a.srcSet,a,null),l&&We(i,r,"src",a.src,a,null);return;case"input":Oe("invalid",i);var A=p=E=f=null,D=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var Z=a[l];if(Z!=null)switch(l){case"name":f=Z;break;case"type":E=Z;break;case"checked":D=Z;break;case"defaultChecked":F=Z;break;case"value":p=Z;break;case"defaultValue":A=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,r));break;default:We(i,r,l,Z,a,null)}}ds(i,p,A,D,F,E,f,!1),ua(i);return;case"select":Oe("invalid",i),l=E=p=null;for(f in a)if(a.hasOwnProperty(f)&&(A=a[f],A!=null))switch(f){case"value":p=A;break;case"defaultValue":E=A;break;case"multiple":l=A;default:We(i,r,f,A,a,null)}r=p,a=E,i.multiple=!!l,r!=null?Ri(i,!!l,r,!1):a!=null&&Ri(i,!!l,a,!0);return;case"textarea":Oe("invalid",i),p=f=l=null;for(E in a)if(a.hasOwnProperty(E)&&(A=a[E],A!=null))switch(E){case"value":l=A;break;case"defaultValue":f=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:We(i,r,E,A,a,null)}ms(i,l,f,p),ua(i);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":i.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:We(i,r,D,l,a,null)}return;case"dialog":Oe("beforetoggle",i),Oe("toggle",i),Oe("cancel",i),Oe("close",i);break;case"iframe":case"object":Oe("load",i);break;case"video":case"audio":for(l=0;l<_l.length;l++)Oe(_l[l],i);break;case"image":Oe("error",i),Oe("load",i);break;case"details":Oe("toggle",i);break;case"embed":case"source":case"link":Oe("error",i),Oe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:We(i,r,F,l,a,null)}return;default:if(Po(r)){for(Z in a)a.hasOwnProperty(Z)&&(l=a[Z],l!==void 0&&jd(i,r,Z,l,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(l=a[A],l!=null&&We(i,r,A,l,a,null))}function ww(i,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,E=null,A=null,D=null,F=null,Z=null;for(Y in a){var te=a[Y];if(a.hasOwnProperty(Y)&&te!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":D=te;default:l.hasOwnProperty(Y)||We(i,r,Y,null,l,te)}}for(var H in l){var Y=l[H];if(te=a[H],l.hasOwnProperty(H)&&(Y!=null||te!=null))switch(H){case"type":p=Y;break;case"name":f=Y;break;case"checked":F=Y;break;case"defaultChecked":Z=Y;break;case"value":E=Y;break;case"defaultValue":A=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,r));break;default:Y!==te&&We(i,r,H,Y,l,te)}}hn(i,E,A,D,F,Z,p,f);return;case"select":Y=E=A=H=null;for(p in a)if(D=a[p],a.hasOwnProperty(p)&&D!=null)switch(p){case"value":break;case"multiple":Y=D;default:l.hasOwnProperty(p)||We(i,r,p,null,l,D)}for(f in l)if(p=l[f],D=a[f],l.hasOwnProperty(f)&&(p!=null||D!=null))switch(f){case"value":H=p;break;case"defaultValue":A=p;break;case"multiple":E=p;default:p!==D&&We(i,r,f,p,l,D)}r=A,a=E,l=Y,H!=null?Ri(i,!!a,H,!1):!!l!=!!a&&(r!=null?Ri(i,!!a,r,!0):Ri(i,!!a,a?[]:"",!1));return;case"textarea":Y=H=null;for(A in a)if(f=a[A],a.hasOwnProperty(A)&&f!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:We(i,r,A,null,l,f)}for(E in l)if(f=l[E],p=a[E],l.hasOwnProperty(E)&&(f!=null||p!=null))switch(E){case"value":H=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==p&&We(i,r,E,f,l,p)}$e(i,H,Y);return;case"option":for(var Ae in a)if(H=a[Ae],a.hasOwnProperty(Ae)&&H!=null&&!l.hasOwnProperty(Ae))switch(Ae){case"selected":i.selected=!1;break;default:We(i,r,Ae,null,l,H)}for(D in l)if(H=l[D],Y=a[D],l.hasOwnProperty(D)&&H!==Y&&(H!=null||Y!=null))switch(D){case"selected":i.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:We(i,r,D,H,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)H=a[ve],a.hasOwnProperty(ve)&&H!=null&&!l.hasOwnProperty(ve)&&We(i,r,ve,null,l,H);for(F in l)if(H=l[F],Y=a[F],l.hasOwnProperty(F)&&H!==Y&&(H!=null||Y!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,r));break;default:We(i,r,F,H,l,Y)}return;default:if(Po(r)){for(var Ze in a)H=a[Ze],a.hasOwnProperty(Ze)&&H!==void 0&&!l.hasOwnProperty(Ze)&&jd(i,r,Ze,void 0,l,H);for(Z in l)H=l[Z],Y=a[Z],!l.hasOwnProperty(Z)||H===Y||H===void 0&&Y===void 0||jd(i,r,Z,H,l,Y);return}}for(var z in a)H=a[z],a.hasOwnProperty(z)&&H!=null&&!l.hasOwnProperty(z)&&We(i,r,z,null,l,H);for(te in l)H=l[te],Y=a[te],!l.hasOwnProperty(te)||H===Y||H==null&&Y==null||We(i,r,te,H,l,Y)}var qd=null,Fd=null;function Nc(i){return i.nodeType===9?i:i.ownerDocument}function G_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Y_(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Hd(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Gd=null;function Aw(){var i=window.event;return i&&i.type==="popstate"?i===Gd?!1:(Gd=i,!0):(Gd=null,!1)}var Q_=typeof setTimeout=="function"?setTimeout:void 0,bw=typeof clearTimeout=="function"?clearTimeout:void 0,K_=typeof Promise=="function"?Promise:void 0,Sw=typeof queueMicrotask=="function"?queueMicrotask:typeof K_<"u"?function(i){return K_.resolve(null).then(i).catch(Rw)}:Q_;function Rw(i){setTimeout(function(){throw i})}function Nr(i){return i==="head"}function $_(i,r){var a=r,l=0,f=0;do{var p=a.nextSibling;if(i.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(0<l&&8>l){a=l;var E=i.ownerDocument;if(a&1&&El(E.documentElement),a&2&&El(E.body),a&4)for(a=E.head,El(a),E=a.firstChild;E;){var A=E.nextSibling,D=E.nodeName;E[us]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=A}}if(f===0){i.removeChild(p),Il(r);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:l=a.charCodeAt(0)-48;else l=0;a=p}while(a);Il(r)}function Yd(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Yd(a),hr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function Cw(i,r,a,l){for(;i.nodeType===1;){var f=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(l){if(!i[us])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=qn(i.nextSibling),i===null)break}return null}function Iw(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=qn(i.nextSibling),i===null))return null;return i}function Qd(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function xw(i,r){var a=i.ownerDocument;if(i.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),i._reactRetry=l}}function qn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return i}var Kd=null;function X_(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return i;r--}else a==="/$"&&r++}i=i.previousSibling}return null}function W_(i,r,a){switch(r=Nc(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function El(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);hr(i)}var On=new Map,Z_=new Set;function Dc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Gi=ae.d;ae.d={f:Nw,r:Dw,D:Mw,C:Ow,L:Vw,m:Pw,X:Lw,S:kw,M:Uw};function Nw(){var i=Gi.f(),r=wc();return i||r}function Dw(i){var r=Xn(i);r!==null&&r.tag===5&&r.type==="form"?_y(r):Gi.r(i)}var Ha=typeof document>"u"?null:document;function J_(i,r,a){var l=Ha;if(l&&typeof r=="string"&&r){var f=_t(r);f='link[rel="'+i+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Z_.has(f)||(Z_.add(f),i={rel:i,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),Ft(r,"link",i),ft(r),l.head.appendChild(r)))}}function Mw(i){Gi.D(i),J_("dns-prefetch",i,null)}function Ow(i,r){Gi.C(i,r),J_("preconnect",i,r)}function Vw(i,r,a){Gi.L(i,r,a);var l=Ha;if(l&&i&&r){var f='link[rel="preload"][as="'+_t(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+_t(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+_t(a.imageSizes)+'"]')):f+='[href="'+_t(i)+'"]';var p=f;switch(r){case"style":p=Ga(i);break;case"script":p=Ya(i)}On.has(p)||(i=_({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),On.set(p,i),l.querySelector(f)!==null||r==="style"&&l.querySelector(Tl(p))||r==="script"&&l.querySelector(wl(p))||(r=l.createElement("link"),Ft(r,"link",i),ft(r),l.head.appendChild(r)))}}function Pw(i,r){Gi.m(i,r);var a=Ha;if(a&&i){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+_t(l)+'"][href="'+_t(i)+'"]',p=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Ya(i)}if(!On.has(p)&&(i=_({rel:"modulepreload",href:i},r),On.set(p,i),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(wl(p)))return}l=a.createElement("link"),Ft(l,"link",i),ft(l),a.head.appendChild(l)}}}function kw(i,r,a){Gi.S(i,r,a);var l=Ha;if(l&&i){var f=en(l).hoistableStyles,p=Ga(i);r=r||"default";var E=f.get(p);if(!E){var A={loading:0,preload:null};if(E=l.querySelector(Tl(p)))A.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":r},a),(a=On.get(p))&&$d(i,a);var D=E=l.createElement("link");ft(D),Ft(D,"link",i),D._p=new Promise(function(F,Z){D.onload=F,D.onerror=Z}),D.addEventListener("load",function(){A.loading|=1}),D.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Mc(E,r,l)}E={type:"stylesheet",instance:E,count:1,state:A},f.set(p,E)}}}function Lw(i,r){Gi.X(i,r);var a=Ha;if(a&&i){var l=en(a).hoistableScripts,f=Ya(i),p=l.get(f);p||(p=a.querySelector(wl(f)),p||(i=_({src:i,async:!0},r),(r=On.get(f))&&Xd(i,r),p=a.createElement("script"),ft(p),Ft(p,"link",i),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function Uw(i,r){Gi.M(i,r);var a=Ha;if(a&&i){var l=en(a).hoistableScripts,f=Ya(i),p=l.get(f);p||(p=a.querySelector(wl(f)),p||(i=_({src:i,async:!0,type:"module"},r),(r=On.get(f))&&Xd(i,r),p=a.createElement("script"),ft(p),Ft(p,"link",i),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function e0(i,r,a,l){var f=(f=be.current)?Dc(f):null;if(!f)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Ga(a.href),a=en(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Ga(a.href);var p=en(f).hoistableStyles,E=p.get(i);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,E),(p=f.querySelector(Tl(i)))&&!p._p&&(E.instance=p,E.state.loading=5),On.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},On.set(i,a),p||zw(f,i,a,E.state))),r&&l===null)throw Error(s(528,""));return E}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ya(a),a=en(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Ga(i){return'href="'+_t(i)+'"'}function Tl(i){return'link[rel="stylesheet"]['+i+"]"}function t0(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function zw(i,r,a,l){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=i.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Ft(r,"link",a),ft(r),i.head.appendChild(r))}function Ya(i){return'[src="'+_t(i)+'"]'}function wl(i){return"script[async]"+i}function n0(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=i.querySelector('style[data-href~="'+_t(a.href)+'"]');if(l)return r.instance=l,ft(l),l;var f=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(i.ownerDocument||i).createElement("style"),ft(l),Ft(l,"style",f),Mc(l,a.precedence,i),r.instance=l;case"stylesheet":f=Ga(a.href);var p=i.querySelector(Tl(f));if(p)return r.state.loading|=4,r.instance=p,ft(p),p;l=t0(a),(f=On.get(f))&&$d(l,f),p=(i.ownerDocument||i).createElement("link"),ft(p);var E=p;return E._p=new Promise(function(A,D){E.onload=A,E.onerror=D}),Ft(p,"link",l),r.state.loading|=4,Mc(p,a.precedence,i),r.instance=p;case"script":return p=Ya(a.src),(f=i.querySelector(wl(p)))?(r.instance=f,ft(f),f):(l=a,(f=On.get(p))&&(l=_({},a),Xd(l,f)),i=i.ownerDocument||i,f=i.createElement("script"),ft(f),Ft(f,"link",l),i.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Mc(l,a.precedence,i));return r.instance}function Mc(i,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,p=f,E=0;E<l.length;E++){var A=l[E];if(A.dataset.precedence===r)p=A;else if(p!==f)break}p?p.parentNode.insertBefore(i,p.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function $d(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Xd(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Oc=null;function i0(i,r,a){if(Oc===null){var l=new Map,f=Oc=new Map;f.set(a,l)}else f=Oc,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(i))return l;for(l.set(i,null),a=a.getElementsByTagName(i),f=0;f<a.length;f++){var p=a[f];if(!(p[us]||p[St]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(r)||"";E=i+E;var A=l.get(E);A?A.push(p):l.set(E,[p])}}return l}function r0(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function Bw(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function s0(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Al=null;function jw(){}function qw(i,r,a){if(Al===null)throw Error(s(475));var l=Al;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=Ga(a.href),p=i.querySelector(Tl(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(l.count++,l=Vc.bind(l),i.then(l,l)),r.state.loading|=4,r.instance=p,ft(p);return}p=i.ownerDocument||i,a=t0(a),(f=On.get(f))&&$d(a,f),p=p.createElement("link"),ft(p);var E=p;E._p=new Promise(function(A,D){E.onload=A,E.onerror=D}),Ft(p,"link",a),r.instance=p}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Vc.bind(l),i.addEventListener("load",r),i.addEventListener("error",r))}}function Fw(){if(Al===null)throw Error(s(475));var i=Al;return i.stylesheets&&i.count===0&&Wd(i,i.stylesheets),0<i.count?function(r){var a=setTimeout(function(){if(i.stylesheets&&Wd(i,i.stylesheets),i.unsuspend){var l=i.unsuspend;i.unsuspend=null,l()}},6e4);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(a)}}:null}function Vc(){if(this.count--,this.count===0){if(this.stylesheets)Wd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Pc=null;function Wd(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Pc=new Map,r.forEach(Hw,i),Pc=null,Vc.call(i))}function Hw(i,r){if(!(r.state.loading&4)){var a=Pc.get(i);if(a)var l=a.get(null);else{a=new Map,Pc.set(i,a);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var E=f[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}f=r.instance,E=f.getAttribute("data-precedence"),p=a.get(E)||l,p===l&&a.set(null,f),a.set(E,f),this.count++,l=Vc.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),p?p.parentNode.insertBefore(f,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),r.state.loading|=4}}var bl={$$typeof:Q,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function Gw(i,r,a,l,f,p,E,A){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.hiddenUpdates=Ti(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function a0(i,r,a,l,f,p,E,A,D,F,Z,te){return i=new Gw(i,r,a,E,A,D,F,te),r=1,p===!0&&(r|=24),p=dn(3,null,null,r),i.current=p,p.stateNode=i,r=Mf(),r.refCount++,i.pooledCache=r,r.refCount++,p.memoizedState={element:l,isDehydrated:a,cache:r},kf(p),i}function o0(i){return i?(i=Aa,i):Aa}function l0(i,r,a,l,f,p){f=o0(f),l.context===null?l.context=f:l.pendingContext=f,l=yr(r),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=_r(i,l,r),a!==null&&(_n(a,i,r),el(a,i,r))}function u0(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function Zd(i,r){u0(i,r),(i=i.alternate)&&u0(i,r)}function c0(i){if(i.tag===13){var r=wa(i,67108864);r!==null&&_n(r,i,67108864),Zd(i,67108864)}}var kc=!0;function Yw(i,r,a,l){var f=$.T;$.T=null;var p=ae.p;try{ae.p=2,Jd(i,r,a,l)}finally{ae.p=p,$.T=f}}function Qw(i,r,a,l){var f=$.T;$.T=null;var p=ae.p;try{ae.p=8,Jd(i,r,a,l)}finally{ae.p=p,$.T=f}}function Jd(i,r,a,l){if(kc){var f=em(l);if(f===null)Bd(i,r,l,Lc,a),f0(i,l);else if($w(f,i,r,a,l))l.stopPropagation();else if(f0(i,l),r&4&&-1<Kw.indexOf(i)){for(;f!==null;){var p=Xn(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=Ln(p.pendingLanes);if(E!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var D=1<<31-Qt(E);A.entanglements[1]|=D,E&=~D}ci(p),(Qe&6)===0&&(Ec=Tn()+500,yl(0))}}break;case 13:A=wa(p,2),A!==null&&_n(A,p,2),wc(),Zd(p,2)}if(p=em(l),p===null&&Bd(i,r,l,Lc,a),p===f)break;f=p}f!==null&&l.stopPropagation()}else Bd(i,r,l,null,a)}}function em(i){return i=bn(i),tm(i)}var Lc=null;function tm(i){if(Lc=null,i=Ai(i),i!==null){var r=u(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=c(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Lc=i,null}function h0(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rf()){case wo:return 2;case ta:return 8;case rs:case sf:return 32;case na:return 268435456;default:return 32}default:return 32}}var nm=!1,Dr=null,Mr=null,Or=null,Sl=new Map,Rl=new Map,Vr=[],Kw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function f0(i,r){switch(i){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Or=null;break;case"pointerover":case"pointerout":Sl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rl.delete(r.pointerId)}}function Cl(i,r,a,l,f,p){return i===null||i.nativeEvent!==p?(i={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:p,targetContainers:[f]},r!==null&&(r=Xn(r),r!==null&&c0(r)),i):(i.eventSystemFlags|=l,r=i.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),i)}function $w(i,r,a,l,f){switch(r){case"focusin":return Dr=Cl(Dr,i,r,a,l,f),!0;case"dragenter":return Mr=Cl(Mr,i,r,a,l,f),!0;case"mouseover":return Or=Cl(Or,i,r,a,l,f),!0;case"pointerover":var p=f.pointerId;return Sl.set(p,Cl(Sl.get(p)||null,i,r,a,l,f)),!0;case"gotpointercapture":return p=f.pointerId,Rl.set(p,Cl(Rl.get(p)||null,i,r,a,l,f)),!0}return!1}function d0(i){var r=Ai(i.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=c(a),r!==null){i.blockedOn=r,wu(i.priority,function(){if(a.tag===13){var l=yn();l=lr(l);var f=wa(a,l);f!==null&&_n(f,a,l),Zd(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Uc(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=em(i.nativeEvent);if(a===null){a=i.nativeEvent;var l=new a.constructor(a.type,a);Ci=l,a.target.dispatchEvent(l),Ci=null}else return r=Xn(a),r!==null&&c0(r),i.blockedOn=a,!1;r.shift()}return!0}function m0(i,r,a){Uc(i)&&a.delete(r)}function Xw(){nm=!1,Dr!==null&&Uc(Dr)&&(Dr=null),Mr!==null&&Uc(Mr)&&(Mr=null),Or!==null&&Uc(Or)&&(Or=null),Sl.forEach(m0),Rl.forEach(m0)}function zc(i,r){i.blockedOn===r&&(i.blockedOn=null,nm||(nm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Xw)))}var Bc=null;function p0(i){Bc!==i&&(Bc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Bc===i&&(Bc=null);for(var r=0;r<i.length;r+=3){var a=i[r],l=i[r+1],f=i[r+2];if(typeof l!="function"){if(tm(l||a)===null)continue;break}var p=Xn(a);p!==null&&(i.splice(r,3),r-=3,td(p,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Il(i){function r(D){return zc(D,i)}Dr!==null&&zc(Dr,i),Mr!==null&&zc(Mr,i),Or!==null&&zc(Or,i),Sl.forEach(r),Rl.forEach(r);for(var a=0;a<Vr.length;a++){var l=Vr[a];l.blockedOn===i&&(l.blockedOn=null)}for(;0<Vr.length&&(a=Vr[0],a.blockedOn===null);)d0(a),a.blockedOn===null&&Vr.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],p=a[l+1],E=f[yt]||null;if(typeof p=="function")E||p0(a);else if(E){var A=null;if(p&&p.hasAttribute("formAction")){if(f=p,E=p[yt]||null)A=E.formAction;else if(tm(f)!==null)continue}else A=E.action;typeof A=="function"?a[l+1]=A:(a.splice(l,3),l-=3),p0(a)}}}function im(i){this._internalRoot=i}jc.prototype.render=im.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=yn();l0(a,l,i,r,null,null)},jc.prototype.unmount=im.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;l0(i.current,2,null,i,null,null),wc(),r[wn]=null}};function jc(i){this._internalRoot=i}jc.prototype.unstable_scheduleHydration=function(i){if(i){var r=ur();i={blockedOn:null,target:i,priority:r};for(var a=0;a<Vr.length&&r!==0&&r<Vr[a].priority;a++);Vr.splice(a,0,i),a===0&&d0(i)}};var g0=e.version;if(g0!=="19.1.1")throw Error(s(527,g0,"19.1.1"));ae.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=m(r),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var Ww={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qc.isDisabled&&qc.supportsFiber)try{ut=qc.inject(Ww),Ye=qc}catch{}}return Nl.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,l="",f=My,p=Oy,E=Vy,A=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(A=r.unstable_transitionCallbacks)),r=a0(i,1,!1,null,null,a,l,f,p,E,A,null),i[wn]=r.current,zd(i),new im(r)},Nl.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var l=!1,f="",p=My,E=Oy,A=Vy,D=null,F=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(F=a.formState)),r=a0(i,1,!0,r,a??null,l,f,p,E,A,D,F),r.context=o0(null),a=r.current,l=yn(),l=lr(l),f=yr(l),f.callback=null,_r(a,f,l),a=l,r.current.lanes=a,wi(r,a),ci(r),i[wn]=r.current,zd(i),new jc(r)},Nl.version="19.1.1",Nl}var R0;function lA(){if(R0)return am.exports;R0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),am.exports=oA(),am.exports}var uA=lA();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var C0="popstate";function cA(n={}){function e(s,o){let{pathname:u,search:c,hash:d}=s.location;return Dm("",{pathname:u,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:Yl(o)}return fA(e,t,null,n)}function at(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Gn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hA(){return Math.random().toString(36).substring(2,10)}function I0(n,e){return{usr:n.state,key:n.key,idx:e}}function Dm(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?uo(e):e,state:t,key:e&&e.key||s||hA()}}function Yl({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function uo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function fA(n,e,t,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,c=o.history,d="POP",m=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function T(){d="POP";let N=_(),B=N==null?null:N-g;g=N,m&&m({action:d,location:M.location,delta:B})}function w(N,B){d="PUSH";let X=Dm(M.location,N,B);g=_()+1;let Q=I0(X,g),se=M.createHref(X);try{c.pushState(Q,"",se)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;o.location.assign(se)}u&&m&&m({action:d,location:M.location,delta:1})}function S(N,B){d="REPLACE";let X=Dm(M.location,N,B);g=_();let Q=I0(X,g),se=M.createHref(X);c.replaceState(Q,"",se),u&&m&&m({action:d,location:M.location,delta:0})}function C(N){return dA(N)}let M={get action(){return d},get location(){return n(o,c)},listen(N){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(C0,T),m=N,()=>{o.removeEventListener(C0,T),m=null}},createHref(N){return e(o,N)},createURL:C,encodeLocation(N){let B=C(N);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:w,replace:S,go(N){return c.go(N)}};return M}function dA(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),at(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:Yl(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function O1(n,e,t="/"){return mA(n,e,t,!1)}function mA(n,e,t,s){let o=typeof e=="string"?uo(e):e,u=Wi(o.pathname||"/",t);if(u==null)return null;let c=V1(n);pA(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let g=RA(u);d=bA(c[m],g,s)}return d}function V1(n,e=[],t=[],s="",o=!1){let u=(c,d,m=o,g)=>{let _={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(s)&&m)return;at(_.relativePath.startsWith(s),`Absolute route path "${_.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(s.length)}let T=$i([s,_.relativePath]),w=t.concat(_);c.children&&c.children.length>0&&(at(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),V1(c.children,e,w,T,m)),!(c.path==null&&!c.index)&&e.push({path:T,score:wA(T,c.index),routesMeta:w})};return n.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))u(c,d);else for(let m of P1(c.path))u(c,d,!0,m)}),e}function P1(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),u=t.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let c=P1(s.join("/")),d=[];return d.push(...c.map(m=>m===""?u:[u,m].join("/"))),o&&d.push(...c),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function pA(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:AA(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var gA=/^:[\w-]+$/,yA=3,_A=2,vA=1,EA=10,TA=-2,x0=n=>n==="*";function wA(n,e){let t=n.split("/"),s=t.length;return t.some(x0)&&(s+=TA),e&&(s+=_A),t.filter(o=>!x0(o)).reduce((o,u)=>o+(gA.test(u)?yA:u===""?vA:EA),s)}function AA(n,e){return n.length===e.length&&n.slice(0,-1).every((s,o)=>s===e[o])?n[n.length-1]-e[e.length-1]:0}function bA(n,e,t=!1){let{routesMeta:s}=n,o={},u="/",c=[];for(let d=0;d<s.length;++d){let m=s[d],g=d===s.length-1,_=u==="/"?e:e.slice(u.length)||"/",T=lh({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},_),w=m.route;if(!T&&g&&t&&!s[s.length-1].route.index&&(T=lh({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!T)return null;Object.assign(o,T.params),c.push({params:o,pathname:$i([u,T.pathname]),pathnameBase:NA($i([u,T.pathnameBase])),route:w}),T.pathnameBase!=="/"&&(u=$i([u,T.pathnameBase]))}return c}function lh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=SA(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let u=o[0],c=u.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:s.reduce((g,{paramName:_,isOptional:T},w)=>{if(_==="*"){let C=d[w]||"";c=u.slice(0,u.length-C.length).replace(/(.)\/+$/,"$1")}const S=d[w];return T&&!S?g[_]=void 0:g[_]=(S||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:c,pattern:n}}function SA(n,e=!1,t=!0){Gn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(s.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function RA(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Wi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function CA(n,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof n=="string"?uo(n):n;return{pathname:t?t.startsWith("/")?t:IA(t,e):e,search:DA(s),hash:MA(o)}}function IA(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function cm(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function lp(n){let e=xA(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function up(n,e,t,s=!1){let o;typeof n=="string"?o=uo(n):(o={...n},at(!o.pathname||!o.pathname.includes("?"),cm("?","pathname","search",o)),at(!o.pathname||!o.pathname.includes("#"),cm("#","pathname","hash",o)),at(!o.search||!o.search.includes("#"),cm("#","search","hash",o)));let u=n===""||o.pathname==="",c=u?"/":o.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!s&&c.startsWith("..")){let w=c.split("/");for(;w[0]==="..";)w.shift(),T-=1;o.pathname=w.join("/")}d=T>=0?e[T]:"/"}let m=CA(o,d),g=c&&c!=="/"&&c.endsWith("/"),_=(u||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||_)&&(m.pathname+="/"),m}var $i=n=>n.join("/").replace(/\/\/+/g,"/"),NA=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),DA=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,MA=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function OA(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var k1=["POST","PUT","PATCH","DELETE"];new Set(k1);var VA=["GET",...k1];new Set(VA);var co=K.createContext(null);co.displayName="DataRouter";var Dh=K.createContext(null);Dh.displayName="DataRouterState";K.createContext(!1);var L1=K.createContext({isTransitioning:!1});L1.displayName="ViewTransition";var PA=K.createContext(new Map);PA.displayName="Fetchers";var kA=K.createContext(null);kA.displayName="Await";var Qn=K.createContext(null);Qn.displayName="Navigation";var ru=K.createContext(null);ru.displayName="Location";var vi=K.createContext({outlet:null,matches:[],isDataRoute:!1});vi.displayName="Route";var cp=K.createContext(null);cp.displayName="RouteError";function LA(n,{relative:e}={}){at(ho(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=K.useContext(Qn),{hash:o,pathname:u,search:c}=su(n,{relative:e}),d=u;return t!=="/"&&(d=u==="/"?t:$i([t,u])),s.createHref({pathname:d,search:c,hash:o})}function ho(){return K.useContext(ru)!=null}function nr(){return at(ho(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(ru).location}var U1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function z1(n){K.useContext(Qn).static||K.useLayoutEffect(n)}function B1(){let{isDataRoute:n}=K.useContext(vi);return n?XA():UA()}function UA(){at(ho(),"useNavigate() may be used only in the context of a <Router> component.");let n=K.useContext(co),{basename:e,navigator:t}=K.useContext(Qn),{matches:s}=K.useContext(vi),{pathname:o}=nr(),u=JSON.stringify(lp(s)),c=K.useRef(!1);return z1(()=>{c.current=!0}),K.useCallback((m,g={})=>{if(Gn(c.current,U1),!c.current)return;if(typeof m=="number"){t.go(m);return}let _=up(m,JSON.parse(u),o,g.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:$i([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,u,o,n])}K.createContext(null);function su(n,{relative:e}={}){let{matches:t}=K.useContext(vi),{pathname:s}=nr(),o=JSON.stringify(lp(t));return K.useMemo(()=>up(n,JSON.parse(o),s,e==="path"),[n,o,s,e])}function zA(n,e){return j1(n,e)}function j1(n,e,t,s,o){at(ho(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=K.useContext(Qn),{matches:c}=K.useContext(vi),d=c[c.length-1],m=d?d.params:{},g=d?d.pathname:"/",_=d?d.pathnameBase:"/",T=d&&d.route;{let X=T&&T.path||"";q1(g,!T||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let w=nr(),S;if(e){let X=typeof e=="string"?uo(e):e;at(_==="/"||X.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${X.pathname}" was given in the \`location\` prop.`),S=X}else S=w;let C=S.pathname||"/",M=C;if(_!=="/"){let X=_.replace(/^\//,"").split("/");M="/"+C.replace(/^\//,"").split("/").slice(X.length).join("/")}let N=O1(n,{pathname:M});Gn(T||N!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Gn(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=HA(N&&N.map(X=>Object.assign({},X,{params:Object.assign({},m,X.params),pathname:$i([_,u.encodeLocation?u.encodeLocation(X.pathname).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?_:$i([_,u.encodeLocation?u.encodeLocation(X.pathnameBase).pathname:X.pathnameBase])})),c,t,s,o);return e&&B?K.createElement(ru.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},B):B}function BA(){let n=$A(),e=OA(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=K.createElement(K.Fragment,null,K.createElement("p",null,"💿 Hey developer 👋"),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:u},"ErrorBoundary")," or"," ",K.createElement("code",{style:u},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:o},t):null,c)}var jA=K.createElement(BA,null),qA=class extends K.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?K.createElement(vi.Provider,{value:this.props.routeContext},K.createElement(cp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function FA({routeContext:n,match:e,children:t}){let s=K.useContext(co);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(vi.Provider,{value:n},t)}function HA(n,e=[],t=null,s=null,o=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,c=t?.errors;if(c!=null){let g=u.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);at(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),u=u.slice(0,Math.min(u.length,g+1))}let d=!1,m=-1;if(t)for(let g=0;g<u.length;g++){let _=u[g];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(m=g),_.route.id){let{loaderData:T,errors:w}=t,S=_.route.loader&&!T.hasOwnProperty(_.route.id)&&(!w||w[_.route.id]===void 0);if(_.route.lazy||S){d=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((g,_,T)=>{let w,S=!1,C=null,M=null;t&&(w=c&&_.route.id?c[_.route.id]:void 0,C=_.route.errorElement||jA,d&&(m<0&&T===0?(q1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,M=null):m===T&&(S=!0,M=_.route.hydrateFallbackElement||null)));let N=e.concat(u.slice(0,T+1)),B=()=>{let X;return w?X=C:S?X=M:_.route.Component?X=K.createElement(_.route.Component,null):_.route.element?X=_.route.element:X=g,K.createElement(FA,{match:_,routeContext:{outlet:g,matches:N,isDataRoute:t!=null},children:X})};return t&&(_.route.ErrorBoundary||_.route.errorElement||T===0)?K.createElement(qA,{location:t.location,revalidation:t.revalidation,component:C,error:w,children:B(),routeContext:{outlet:null,matches:N,isDataRoute:!0},unstable_onError:s}):B()},null)}function hp(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GA(n){let e=K.useContext(co);return at(e,hp(n)),e}function YA(n){let e=K.useContext(Dh);return at(e,hp(n)),e}function QA(n){let e=K.useContext(vi);return at(e,hp(n)),e}function fp(n){let e=QA(n),t=e.matches[e.matches.length-1];return at(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function KA(){return fp("useRouteId")}function $A(){let n=K.useContext(cp),e=YA("useRouteError"),t=fp("useRouteError");return n!==void 0?n:e.errors?.[t]}function XA(){let{router:n}=GA("useNavigate"),e=fp("useNavigate"),t=K.useRef(!1);return z1(()=>{t.current=!0}),K.useCallback(async(o,u={})=>{Gn(t.current,U1),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...u}))},[n,e])}var N0={};function q1(n,e,t){!e&&!N0[n]&&(N0[n]=!0,Gn(!1,t))}K.memo(WA);function WA({routes:n,future:e,state:t,unstable_onError:s}){return j1(n,void 0,t,s,e)}function hm({to:n,replace:e,state:t,relative:s}){at(ho(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=K.useContext(Qn);Gn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=K.useContext(vi),{pathname:c}=nr(),d=B1(),m=up(n,lp(u),c,s==="path"),g=JSON.stringify(m);return K.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:s})},[d,g,s,e,t]),null}function Ml(n){at(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZA({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:u=!1}){at(!ho(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=K.useMemo(()=>({basename:c,navigator:o,static:u,future:{}}),[c,o,u]);typeof t=="string"&&(t=uo(t));let{pathname:m="/",search:g="",hash:_="",state:T=null,key:w="default"}=t,S=K.useMemo(()=>{let C=Wi(m,c);return C==null?null:{location:{pathname:C,search:g,hash:_,state:T,key:w},navigationType:s}},[c,m,g,_,T,w,s]);return Gn(S!=null,`<Router basename="${c}"> is not able to match the URL "${m}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:K.createElement(Qn.Provider,{value:d},K.createElement(ru.Provider,{children:e,value:S}))}function JA({children:n,location:e}){return zA(Mm(n),e)}function Mm(n,e=[]){let t=[];return K.Children.forEach(n,(s,o)=>{if(!K.isValidElement(s))return;let u=[...e,o];if(s.type===K.Fragment){t.push.apply(t,Mm(s.props.children,u));return}at(s.type===Ml,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),at(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Mm(s.props.children,u)),t.push(c)}),t}var Xc="get",Wc="application/x-www-form-urlencoded";function Mh(n){return n!=null&&typeof n.tagName=="string"}function eb(n){return Mh(n)&&n.tagName.toLowerCase()==="button"}function tb(n){return Mh(n)&&n.tagName.toLowerCase()==="form"}function nb(n){return Mh(n)&&n.tagName.toLowerCase()==="input"}function ib(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function rb(n,e){return n.button===0&&(!e||e==="_self")&&!ib(n)}var Fc=null;function sb(){if(Fc===null)try{new FormData(document.createElement("form"),0),Fc=!1}catch{Fc=!0}return Fc}var ab=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fm(n){return n!=null&&!ab.has(n)?(Gn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wc}"`),null):n}function ob(n,e){let t,s,o,u,c;if(tb(n)){let d=n.getAttribute("action");s=d?Wi(d,e):null,t=n.getAttribute("method")||Xc,o=fm(n.getAttribute("enctype"))||Wc,u=new FormData(n)}else if(eb(n)||nb(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(s=m?Wi(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Xc,o=fm(n.getAttribute("formenctype"))||fm(d.getAttribute("enctype"))||Wc,u=new FormData(d,n),!sb()){let{name:g,type:_,value:T}=n;if(_==="image"){let w=g?`${g}.`:"";u.append(`${w}x`,"0"),u.append(`${w}y`,"0")}else g&&u.append(g,T)}}else{if(Mh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Xc,s=null,o=Wc,c=n}return u&&o==="text/plain"&&(c=u,u=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:u,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function dp(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function lb(n,e,t){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&Wi(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function ub(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cb(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function hb(n,e,t){let s=await Promise.all(n.map(async o=>{let u=e.routes[o.route.id];if(u){let c=await ub(u,t);return c.links?c.links():[]}return[]}));return pb(s.flat(1).filter(cb).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function D0(n,e,t,s,o,u){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,d=(m,g)=>t[g].pathname!==m.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==m.params["*"];return u==="assets"?e.filter((m,g)=>c(m,g)||d(m,g)):u==="data"?e.filter((m,g)=>{let _=s.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,g)||d(m,g))return!0;if(m.route.shouldRevalidate){let T=m.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function fb(n,e,{includeHydrateFallback:t}={}){return db(n.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function db(n){return[...new Set(n)]}function mb(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function pb(n,e){let t=new Set;return new Set(e),n.reduce((s,o)=>{let u=JSON.stringify(mb(o));return t.has(u)||(t.add(u),s.push({key:u,link:o})),s},[])}function F1(){let n=K.useContext(co);return dp(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function gb(){let n=K.useContext(Dh);return dp(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var mp=K.createContext(void 0);mp.displayName="FrameworkContext";function H1(){let n=K.useContext(mp);return dp(n,"You must render this element inside a <HydratedRouter> element"),n}function yb(n,e){let t=K.useContext(mp),[s,o]=K.useState(!1),[u,c]=K.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:g,onMouseLeave:_,onTouchStart:T}=e,w=K.useRef(null);K.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let M=B=>{B.forEach(X=>{c(X.isIntersecting)})},N=new IntersectionObserver(M,{threshold:.5});return w.current&&N.observe(w.current),()=>{N.disconnect()}}},[n]),K.useEffect(()=>{if(s){let M=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(M)}}},[s]);let S=()=>{o(!0)},C=()=>{o(!1),c(!1)};return t?n!=="intent"?[u,w,{}]:[u,w,{onFocus:Dl(d,S),onBlur:Dl(m,C),onMouseEnter:Dl(g,S),onMouseLeave:Dl(_,C),onTouchStart:Dl(T,S)}]:[!1,w,{}]}function Dl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function _b({page:n,...e}){let{router:t}=F1(),s=K.useMemo(()=>O1(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?K.createElement(Eb,{page:n,matches:s,...e}):null}function vb(n){let{manifest:e,routeModules:t}=H1(),[s,o]=K.useState([]);return K.useEffect(()=>{let u=!1;return hb(n,e,t).then(c=>{u||o(c)}),()=>{u=!0}},[n,e,t]),s}function Eb({page:n,matches:e,...t}){let s=nr(),{manifest:o,routeModules:u}=H1(),{basename:c}=F1(),{loaderData:d,matches:m}=gb(),g=K.useMemo(()=>D0(n,e,m,o,s,"data"),[n,e,m,o,s]),_=K.useMemo(()=>D0(n,e,m,o,s,"assets"),[n,e,m,o,s]),T=K.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let C=new Set,M=!1;if(e.forEach(B=>{let X=o.routes[B.route.id];!X||!X.hasLoader||(!g.some(Q=>Q.route.id===B.route.id)&&B.route.id in d&&u[B.route.id]?.shouldRevalidate||X.hasClientLoader?M=!0:C.add(B.route.id))}),C.size===0)return[];let N=lb(n,c,"data");return M&&C.size>0&&N.searchParams.set("_routes",e.filter(B=>C.has(B.route.id)).map(B=>B.route.id).join(",")),[N.pathname+N.search]},[c,d,s,o,g,e,n,u]),w=K.useMemo(()=>fb(_,o),[_,o]),S=vb(_);return K.createElement(K.Fragment,null,T.map(C=>K.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),w.map(C=>K.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),S.map(({key:C,link:M})=>K.createElement("link",{key:C,nonce:t.nonce,...M})))}function Tb(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var G1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{G1&&(window.__reactRouterVersion="7.9.1")}catch{}function wb({basename:n,children:e,window:t}){let s=K.useRef();s.current==null&&(s.current=cA({window:t,v5Compat:!0}));let o=s.current,[u,c]=K.useState({action:o.action,location:o.location}),d=K.useCallback(m=>{K.startTransition(()=>c(m))},[c]);return K.useLayoutEffect(()=>o.listen(d),[o,d]),K.createElement(ZA,{basename:n,children:e,location:u.location,navigationType:u.action,navigator:o})}var Y1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zs=K.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:u,replace:c,state:d,target:m,to:g,preventScrollReset:_,viewTransition:T,...w},S){let{basename:C}=K.useContext(Qn),M=typeof g=="string"&&Y1.test(g),N,B=!1;if(typeof g=="string"&&M&&(N=g,G1))try{let I=new URL(window.location.href),O=g.startsWith("//")?new URL(I.protocol+g):new URL(g),P=Wi(O.pathname,C);O.origin===I.origin&&P!=null?g=P+O.search+O.hash:B=!0}catch{Gn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let X=LA(g,{relative:o}),[Q,se,re]=yb(s,w),oe=Rb(g,{replace:c,state:d,target:m,preventScrollReset:_,relative:o,viewTransition:T});function V(I){e&&e(I),I.defaultPrevented||oe(I)}let R=K.createElement("a",{...w,...re,href:N||X,onClick:B||u?e:V,ref:Tb(S,se),target:m,"data-discover":!M&&t==="render"?"true":void 0});return Q&&!M?K.createElement(K.Fragment,null,R,K.createElement(_b,{page:X})):R});zs.displayName="Link";var Ab=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:u,to:c,viewTransition:d,children:m,...g},_){let T=su(c,{relative:g.relative}),w=nr(),S=K.useContext(Dh),{navigator:C,basename:M}=K.useContext(Qn),N=S!=null&&Db(T)&&d===!0,B=C.encodeLocation?C.encodeLocation(T).pathname:T.pathname,X=w.pathname,Q=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(X=X.toLowerCase(),Q=Q?Q.toLowerCase():null,B=B.toLowerCase()),Q&&M&&(Q=Wi(Q,M)||Q);const se=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let re=X===B||!o&&X.startsWith(B)&&X.charAt(se)==="/",oe=Q!=null&&(Q===B||!o&&Q.startsWith(B)&&Q.charAt(B.length)==="/"),V={isActive:re,isPending:oe,isTransitioning:N},R=re?e:void 0,I;typeof s=="function"?I=s(V):I=[s,re?"active":null,oe?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let O=typeof u=="function"?u(V):u;return K.createElement(zs,{...g,"aria-current":R,className:I,ref:_,style:O,to:c,viewTransition:d},typeof m=="function"?m(V):m)});Ab.displayName="NavLink";var bb=K.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:u,method:c=Xc,action:d,onSubmit:m,relative:g,preventScrollReset:_,viewTransition:T,...w},S)=>{let C=xb(),M=Nb(d,{relative:g}),N=c.toLowerCase()==="get"?"get":"post",B=typeof d=="string"&&Y1.test(d),X=Q=>{if(m&&m(Q),Q.defaultPrevented)return;Q.preventDefault();let se=Q.nativeEvent.submitter,re=se?.getAttribute("formmethod")||c;C(se||Q.currentTarget,{fetcherKey:e,method:re,navigate:t,replace:o,state:u,relative:g,preventScrollReset:_,viewTransition:T})};return K.createElement("form",{ref:S,method:N,action:M,onSubmit:s?m:X,...w,"data-discover":!B&&n==="render"?"true":void 0})});bb.displayName="Form";function Sb(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Q1(n){let e=K.useContext(co);return at(e,Sb(n)),e}function Rb(n,{target:e,replace:t,state:s,preventScrollReset:o,relative:u,viewTransition:c}={}){let d=B1(),m=nr(),g=su(n,{relative:u});return K.useCallback(_=>{if(rb(_,e)){_.preventDefault();let T=t!==void 0?t:Yl(m)===Yl(g);d(n,{replace:T,state:s,preventScrollReset:o,relative:u,viewTransition:c})}},[m,d,g,t,s,e,n,o,u,c])}var Cb=0,Ib=()=>`__${String(++Cb)}__`;function xb(){let{router:n}=Q1("useSubmit"),{basename:e}=K.useContext(Qn),t=KA();return K.useCallback(async(s,o={})=>{let{action:u,method:c,encType:d,formData:m,body:g}=ob(s,e);if(o.navigate===!1){let _=o.fetcherKey||Ib();await n.fetch(_,t,o.action||u,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await n.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function Nb(n,{relative:e}={}){let{basename:t}=K.useContext(Qn),s=K.useContext(vi);at(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...su(n||".",{relative:e})},c=nr();if(n==null){u.search=c.search;let d=new URLSearchParams(u.search),m=d.getAll("index");if(m.some(_=>_==="")){d.delete("index"),m.filter(T=>T).forEach(T=>d.append("index",T));let _=d.toString();u.search=_?`?${_}`:""}}return(!n||n===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:$i([t,u.pathname])),Yl(u)}function Db(n,{relative:e}={}){let t=K.useContext(L1);at(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Q1("useViewTransitionState"),o=su(n,{relative:e});if(!t.isTransitioning)return!1;let u=Wi(t.currentLocation.pathname,s)||t.currentLocation.pathname,c=Wi(t.nextLocation.pathname,s)||t.nextLocation.pathname;return lh(o.pathname,c)!=null||lh(o.pathname,u)!=null}var K1={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},M0=qs.createContext&&qs.createContext(K1),Mb=["attr","size","title"];function Ob(n,e){if(n==null)return{};var t=Vb(n,e),s,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);for(o=0;o<u.length;o++)s=u[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}function Vb(n,e){if(n==null)return{};var t={};for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}function uh(){return uh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},uh.apply(this,arguments)}function O0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,s)}return t}function ch(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?O0(Object(t),!0).forEach(function(s){Pb(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):O0(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function Pb(n,e,t){return e=kb(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kb(n){var e=Lb(n,"string");return typeof e=="symbol"?e:e+""}function Lb(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function $1(n){return n&&n.map((e,t)=>qs.createElement(e.tag,ch({key:t},e.attr),$1(e.child)))}function au(n){return e=>qs.createElement(Ub,uh({attr:ch({},n.attr)},e),$1(n.child))}function Ub(n){var e=t=>{var{attr:s,size:o,title:u}=n,c=Ob(n,Mb),d=o||t.size||"1em",m;return t.className&&(m=t.className),n.className&&(m=(m?m+" ":"")+n.className),qs.createElement("svg",uh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,c,{className:m,style:ch(ch({color:n.color||t.color},t.style),n.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),u&&qs.createElement("title",null,u),n.children)};return M0!==void 0?qs.createElement(M0.Consumer,null,t=>e(t)):e(K1)}function zb(n){return au({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z"},child:[]}]})(n)}function Bb(n){return au({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(n)}function V0(n){return au({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(n)}function jb(n){return au({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(n)}const qb=({currentPage:n,user:e})=>{const[t,s]=K.useState(!1);return G.jsxs("nav",{className:"fixed left-1/2 top-4 transform -translate-x-1/2 z-50 w-full max-w-2xl px-2 ",children:[G.jsxs("div",{className:"flex items-center justify-between gap-6 bg-black/80 backdrop-blur-md border border-white/20 rounded-2xl px-6 py-3 shadow-lg",children:[G.jsxs(zs,{to:"/",className:"flex items-center gap-2 text-white font-semibold text-lg hover:scale-105 transition-transform",children:[G.jsx(zb,{className:"w-6 h-6 text-cyan-400"}),G.jsx("span",{children:"My App"})]}),G.jsxs("ul",{className:"hidden md:flex items-center gap-6 font-light text-base",children:[G.jsx("li",{children:G.jsxs(zs,{to:"/journal",className:`relative transition-colors duration-200 ${n==="journal"?"text-white font-semibold":"text-white/80 hover:text-white"} group`,children:["Journal",G.jsx("span",{className:`absolute left-0 -bottom-1 h-0.5 rounded bg-gradient-to-r from-cyan-400 to-fuchsia-500 transition-all duration-200 ${n==="journal"?"w-full":"w-0 group-hover:w-full"}`})]})}),G.jsx("li",{children:G.jsxs(zs,{to:"/chatbot",className:`relative transition-colors duration-200 ${n==="chatbot"?"text-white font-semibold":"text-white/80 hover:text-white"} group`,children:["Chatbot",G.jsx("span",{className:`absolute left-0 -bottom-1 h-0.5 rounded bg-gradient-to-r from-cyan-400 to-fuchsia-500 transition-all duration-200 ${n==="chatbot"?"w-full":"w-0 group-hover:w-full"}`})]})})]}),G.jsx("a",{href:"https://github.com/",target:"_blank",rel:"noopener noreferrer",className:"hidden md:inline-block px-4 py-2 rounded-xl bg-gradient-to-r from-cyan-400 to-fuchsia-500 text-white font-medium transition hover:from-fuchsia-500 hover:to-cyan-400",children:"Visit Github"}),G.jsx("button",{className:"md:hidden text-white text-2xl",onClick:()=>s(!t),"aria-label":"Open menu",children:G.jsx(jb,{})})]}),t&&G.jsxs("div",{className:"md:hidden mt-2 bg-black/90 backdrop-blur-md border border-white/20 rounded-2xl shadow-lg px-6 py-4 flex flex-col gap-4 animate-fade-in",children:[G.jsx(zs,{to:"/journal",className:`transition-colors duration-200 ${n==="journal"?"text-white font-semibold":"text-white/80 hover:text-white"}`,onClick:()=>s(!1),children:"Journal"}),G.jsx(zs,{to:"/chatbot",className:`transition-colors duration-200 ${n==="chatbot"?"text-white font-semibold":"text-white/80 hover:text-white"}`,onClick:()=>s(!1),children:"Chatbot"}),G.jsx("a",{href:"https://github.com/",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-xl bg-gradient-to-r from-cyan-400 to-fuchsia-500 text-white font-medium transition hover:from-fuchsia-500 hover:to-cyan-400",children:"Visit Github"})]})]})},Fb=()=>{const[n,e]=K.useState("friend"),[t,s]=K.useState(""),[o,u]=K.useState([{id:1,name:"Session 1",messages:[]}]),[c,d]=K.useState(1),[m,g]=K.useState(!0),_=o.find(S=>S.id===c)?.messages||[],T=async S=>{if(S.preventDefault(),!t.trim())return;const C={role:"user",text:t};w(c,[..._,C]);try{const M=new FormData;M.append("msg",t),M.append("username","guest"),M.append("mode",n==="friend"?"friend":"therapist");const X={role:"assistant",text:(await(await fetch("/get",{method:"POST",body:M})).json()).response};w(c,[..._,C,X])}catch(M){console.error("Error calling backend:",M);const N={role:"assistant",text:"Oops, something went wrong!"};w(c,[..._,C,N])}s("")},w=(S,C)=>{u(M=>M.map(N=>N.id===S?{...N,messages:C}:N))};return G.jsxs("div",{className:"flex min-h-screen bg-[#181a1b] text-white relative",children:[G.jsxs("aside",{className:`fixed md:static top-0 left-0 h-full z-30 bg-[#23272e] border-r border-white/10 flex flex-col p-4 transition-transform duration-300 ease-in-out ${m?"translate-x-0 w-64":"-translate-x-64 w-0 md:w-16"}`,style:{minWidth:m?256:0,maxWidth:256},children:[G.jsxs("div",{className:"flex items-center justify-between mb-4",children:[G.jsx("h2",{className:`text-xl font-bold text-white/90 transition-opacity duration-200 ${m?"opacity-100":"opacity-0 pointer-events-none"}`,children:"Conversations"}),G.jsx("button",{className:"ml-2 p-1 rounded-full bg-[#181a1b] hover:bg-[#23272e] border border-white/10 text-white transition",onClick:()=>g(S=>!S),"aria-label":m?"Hide sidebar":"Show sidebar",type:"button",children:m?G.jsx(Bb,{size:22}):G.jsx(V0,{size:22})})]}),G.jsx("div",{className:`flex-1 space-y-2 overflow-y-auto transition-opacity duration-200 ${m?"opacity-100":"opacity-0 pointer-events-none"}`,children:o.map(S=>G.jsx("button",{onClick:()=>d(S.id),className:`w-full text-left px-4 py-2 rounded-lg transition font-medium ${c===S.id?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow":"bg-white/5 text-white/80 hover:bg-white/10"}`,children:S.name},S.id))}),G.jsx("button",{className:`mt-6 w-full py-2 rounded-lg bg-indigo-600 hover:bg-indigo-700 transition font-semibold ${m?"":"opacity-0 pointer-events-none"}`,onClick:()=>{const S=o.length+1,C={id:S,name:`Session ${S}`,messages:[]};u([...o,C]),d(S)},children:"+ New Chat"})]}),!m&&G.jsx("button",{className:"fixed top-6 left-2 z-40 p-2 rounded-full bg-[#23272e] border border-white/10 text-white shadow-lg hover:bg-[#181a1b] transition",onClick:()=>g(!0),"aria-label":"Show sidebar",type:"button",children:G.jsx(V0,{size:22})}),G.jsxs("main",{className:"flex-1 flex flex-col relative ml-0 md:ml-64 transition-all duration-300",style:{marginLeft:m?256:0},children:[G.jsx("div",{className:"flex justify-end items-center p-6 border-b border-white/10 bg-[#1a1d1f]",children:G.jsxs("div",{className:"flex items-center gap-4",children:[G.jsx("span",{className:"text-sm font-medium text-white/70",children:"Advice as:"}),G.jsxs("div",{className:"flex gap-2 bg-[#23272e] rounded-lg p-1",children:[G.jsx("button",{className:`px-4 py-1 rounded-lg font-semibold transition ${n==="friend"?"bg-indigo-600 text-white":"text-white/70 hover:bg-indigo-700/30"}`,onClick:()=>e("friend"),children:"Friend"}),G.jsx("button",{className:`px-4 py-1 rounded-lg font-semibold transition ${n==="psychiatrist"?"bg-purple-600 text-white":"text-white/70 hover:bg-purple-700/30"}`,onClick:()=>e("psychiatrist"),children:"Psychiatrist"})]})]})}),G.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-6 bg-gradient-to-b from-[#23272e] to-[#181a1b]",children:_.length===0?G.jsx("div",{className:"text-center text-white/50 mt-24 text-lg",children:"Start a conversation about your mental health…"}):_.map((S,C)=>G.jsx("div",{className:`max-w-xl px-6 py-4 rounded-2xl shadow-lg ${S.role==="user"?"bg-indigo-600 text-white self-end":"bg-white/10 text-white self-start"}`,children:S.text},C))}),G.jsxs("form",{onSubmit:T,className:"flex items-center gap-4 p-6 border-t border-white/10 bg-[#1a1d1f]",children:[G.jsx("input",{type:"text",className:"flex-1 px-4 py-3 rounded-xl bg-[#23272e] text-white border border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 placeholder-gray-400 shadow-inner",placeholder:"Type your message…",value:t,onChange:S=>s(S.target.value),required:!0}),G.jsx("button",{type:"submit",className:"px-8 py-3 rounded-xl bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold shadow-lg hover:scale-105 transition-all",children:"Send"})]})]})]})},Hb=()=>{};var P0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Gb=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=n[t++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=n[t++],c=n[t++],d=n[t++],m=((o&7)<<18|(u&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const u=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return e.join("")},W1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const u=n[o],c=o+1<n.length,d=c?n[o+1]:0,m=o+2<n.length,g=m?n[o+2]:0,_=u>>2,T=(u&3)<<4|d>>4;let w=(d&15)<<2|g>>6,S=g&63;m||(S=64,c||(w=64)),s.push(t[_],t[T],t[w],t[S])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(X1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Gb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const u=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const g=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,u==null||d==null||g==null||T==null)throw new Yb;const w=u<<2|d>>4;if(s.push(w),g!==64){const S=d<<4&240|g>>2;if(s.push(S),T!==64){const C=g<<6&192|T;s.push(C)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Yb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Qb=function(n){const e=X1(n);return W1.encodeByteArray(e,!0)},hh=function(n){return Qb(n).replace(/\./g,"")},Z1=function(n){try{return W1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=()=>Kb().__FIREBASE_DEFAULTS__,Xb=()=>{if(typeof process>"u"||typeof P0>"u")return;const n=P0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Wb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Z1(n[1]);return e&&JSON.parse(e)},Oh=()=>{try{return Hb()||$b()||Xb()||Wb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},J1=n=>Oh()?.emulatorHosts?.[n],Zb=n=>{const e=J1(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},eE=()=>Oh()?.config,tE=n=>Oh()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,u=n.sub||n.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...n};return[hh(JSON.stringify(t)),hh(JSON.stringify(c)),""].join(".")}const zl={};function tS(){const n={prod:[],emulator:[]};for(const e of Object.keys(zl))zl[e]?n.emulator.push(e):n.prod.push(e);return n}function nS(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let k0=!1;function iE(n,e){if(typeof window>"u"||typeof document>"u"||!fo(window.location.host)||zl[n]===e||zl[n]||k0)return;zl[n]=e;function t(w){return`__firebase__banner__${w}`}const s="__firebase__banner",u=tS().prod.length>0;function c(){const w=document.getElementById(s);w&&w.remove()}function d(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function m(w,S){w.setAttribute("width","24"),w.setAttribute("id",S),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function g(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{k0=!0,c()},w}function _(w,S){w.setAttribute("id",S),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function T(){const w=nS(s),S=t("text"),C=document.getElementById(S)||document.createElement("span"),M=t("learnmore"),N=document.getElementById(M)||document.createElement("a"),B=t("preprendIcon"),X=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const Q=w.element;d(Q),_(N,M);const se=g();m(X,B),Q.append(X,C,N,se),document.body.appendChild(Q)}u?(C.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function rS(){const n=Oh()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function oS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lS(){const n=Jt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function uS(){return!rS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cS(){try{return typeof indexedDB=="object"}catch{return!1}}function hS(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="FirebaseError";class ir extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=fS,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ou.prototype.create)}}class ou{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],c=u?dS(u,s):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new ir(o,d,s)}}function dS(n,e){return n.replace(mS,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const mS=/\{\$([^}]+)}/g;function pS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Gs(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const u=n[o],c=e[o];if(L0(u)&&L0(c)){if(!Gs(u,c))return!1}else if(u!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function L0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ol(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Vl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function gS(n,e){const t=new yS(n,e);return t.subscribe.bind(t)}class yS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");_S(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=dm),o.error===void 0&&(o.error=dm),o.complete===void 0&&(o.complete=dm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _S(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function dm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(n){return n&&n._delegate?n._delegate:n}class Ys{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new Jb;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TS(e))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Us){return this.instances.has(e)}getOptions(e=Us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(u);s===d&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:ES(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Us){return this.component?this.component.multipleInstances?e:Us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ES(n){return n===Us?void 0:n}function TS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new vS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ve||(Ve={}));const AS={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},bS=Ve.INFO,SS={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},RS=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=SS[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pp{constructor(e){this.name=e,this._logLevel=bS,this._logHandler=RS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const CS=(n,e)=>e.some(t=>n instanceof t);let U0,z0;function IS(){return U0||(U0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xS(){return z0||(z0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rE=new WeakMap,Om=new WeakMap,sE=new WeakMap,mm=new WeakMap,gp=new WeakMap;function NS(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",u),n.removeEventListener("error",c)},u=()=>{t(jr(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",u),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&rE.set(t,n)}).catch(()=>{}),gp.set(e,n),e}function DS(n){if(Om.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",c),n.removeEventListener("abort",c)},u=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",u),n.addEventListener("error",c),n.addEventListener("abort",c)});Om.set(n,e)}let Vm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Om.get(n);if(e==="objectStoreNames")return n.objectStoreNames||sE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return jr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function MS(n){Vm=n(Vm)}function OS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(pm(this),e,...t);return sE.set(s,e.sort?e.sort():[e]),jr(s)}:xS().includes(n)?function(...e){return n.apply(pm(this),e),jr(rE.get(this))}:function(...e){return jr(n.apply(pm(this),e))}}function VS(n){return typeof n=="function"?OS(n):(n instanceof IDBTransaction&&DS(n),CS(n,IS())?new Proxy(n,Vm):n)}function jr(n){if(n instanceof IDBRequest)return NS(n);if(mm.has(n))return mm.get(n);const e=VS(n);return e!==n&&(mm.set(n,e),gp.set(e,n)),e}const pm=n=>gp.get(n);function PS(n,e,{blocked:t,upgrade:s,blocking:o,terminated:u}={}){const c=indexedDB.open(n,e),d=jr(c);return s&&c.addEventListener("upgradeneeded",m=>{s(jr(c.result),m.oldVersion,m.newVersion,jr(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{u&&m.addEventListener("close",()=>u()),o&&m.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const kS=["get","getKey","getAll","getAllKeys","count"],LS=["put","add","delete","clear"],gm=new Map;function B0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(gm.get(e))return gm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=LS.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||kS.includes(t)))return;const u=async function(c,...d){const m=this.transaction(c,o?"readwrite":"readonly");let g=m.store;return s&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),o&&m.done]))[0]};return gm.set(e,u),u}MS(n=>({...n,get:(e,t,s)=>B0(e,t)||n.get(e,t,s),has:(e,t)=>!!B0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(zS(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function zS(n){return n.getComponent()?.type==="VERSION"}const Pm="@firebase/app",j0="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new pp("@firebase/app"),BS="@firebase/app-compat",jS="@firebase/analytics-compat",qS="@firebase/analytics",FS="@firebase/app-check-compat",HS="@firebase/app-check",GS="@firebase/auth",YS="@firebase/auth-compat",QS="@firebase/database",KS="@firebase/data-connect",$S="@firebase/database-compat",XS="@firebase/functions",WS="@firebase/functions-compat",ZS="@firebase/installations",JS="@firebase/installations-compat",eR="@firebase/messaging",tR="@firebase/messaging-compat",nR="@firebase/performance",iR="@firebase/performance-compat",rR="@firebase/remote-config",sR="@firebase/remote-config-compat",aR="@firebase/storage",oR="@firebase/storage-compat",lR="@firebase/firestore",uR="@firebase/ai",cR="@firebase/firestore-compat",hR="firebase",fR="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="[DEFAULT]",dR={[Pm]:"fire-core",[BS]:"fire-core-compat",[qS]:"fire-analytics",[jS]:"fire-analytics-compat",[HS]:"fire-app-check",[FS]:"fire-app-check-compat",[GS]:"fire-auth",[YS]:"fire-auth-compat",[QS]:"fire-rtdb",[KS]:"fire-data-connect",[$S]:"fire-rtdb-compat",[XS]:"fire-fn",[WS]:"fire-fn-compat",[ZS]:"fire-iid",[JS]:"fire-iid-compat",[eR]:"fire-fcm",[tR]:"fire-fcm-compat",[nR]:"fire-perf",[iR]:"fire-perf-compat",[rR]:"fire-rc",[sR]:"fire-rc-compat",[aR]:"fire-gcs",[oR]:"fire-gcs-compat",[lR]:"fire-fst",[cR]:"fire-fst-compat",[uR]:"fire-vertex","fire-js":"fire-js",[hR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new Map,mR=new Map,Lm=new Map;function q0(n,e){try{n.container.addComponent(e)}catch(t){Zi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function no(n){const e=n.name;if(Lm.has(e))return Zi.debug(`There were multiple attempts to register component ${e}.`),!1;Lm.set(e,n);for(const t of fh.values())q0(t,n);for(const t of mR.values())q0(t,n);return!0}function yp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function vn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qr=new ou("app","Firebase",pR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ys("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=fR;function aE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:km,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw qr.create("bad-app-name",{appName:String(o)});if(t||(t=eE()),!t)throw qr.create("no-options");const u=fh.get(o);if(u){if(Gs(t,u.options)&&Gs(s,u.config))return u;throw qr.create("duplicate-app",{appName:o})}const c=new wS(o);for(const m of Lm.values())c.addComponent(m);const d=new gR(t,s,c);return fh.set(o,d),d}function oE(n=km){const e=fh.get(n);if(!e&&n===km&&eE())return aE();if(!e)throw qr.create("no-app",{appName:n});return e}function Fr(n,e,t){let s=dR[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zi.warn(c.join(" "));return}no(new Ys(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="firebase-heartbeat-database",_R=1,Ql="firebase-heartbeat-store";let ym=null;function lE(){return ym||(ym=PS(yR,_R,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ql)}catch(t){console.warn(t)}}}}).catch(n=>{throw qr.create("idb-open",{originalErrorMessage:n.message})})),ym}async function vR(n){try{const t=(await lE()).transaction(Ql),s=await t.objectStore(Ql).get(uE(n));return await t.done,s}catch(e){if(e instanceof ir)Zi.warn(e.message);else{const t=qr.create("idb-get",{originalErrorMessage:e?.message});Zi.warn(t.message)}}}async function F0(n,e){try{const s=(await lE()).transaction(Ql,"readwrite");await s.objectStore(Ql).put(e,uE(n)),await s.done}catch(t){if(t instanceof ir)Zi.warn(t.message);else{const s=qr.create("idb-set",{originalErrorMessage:t?.message});Zi.warn(s.message)}}}function uE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=1024,TR=30;class wR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new bR(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=H0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>TR){const o=SR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Zi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=H0(),{heartbeatsToSend:t,unsentEntries:s}=AR(this._heartbeatsCache.heartbeats),o=hh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Zi.warn(e),""}}}function H0(){return new Date().toISOString().substring(0,10)}function AR(n,e=ER){const t=[];let s=n.slice();for(const o of n){const u=t.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),G0(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),G0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class bR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cS()?hS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await vR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return F0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return F0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function G0(n){return hh(JSON.stringify({version:2,heartbeats:n})).length}function SR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(n){no(new Ys("platform-logger",e=>new US(e),"PRIVATE")),no(new Ys("heartbeat",e=>new wR(e),"PRIVATE")),Fr(Pm,j0,n),Fr(Pm,j0,"esm2020"),Fr("fire-js","")}RR("");function cE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CR=cE,hE=new ou("auth","Firebase",cE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new pp("@firebase/auth");function IR(n,...e){dh.logLevel<=Ve.WARN&&dh.warn(`Auth (${mo}): ${n}`,...e)}function Zc(n,...e){dh.logLevel<=Ve.ERROR&&dh.error(`Auth (${mo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(n,...e){throw vp(n,...e)}function Hn(n,...e){return vp(n,...e)}function _p(n,e,t){const s={...CR(),[e]:t};return new ou("auth","Firebase",s).create(e,{appName:n.name})}function Xi(n){return _p(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xR(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&kn(n,"argument-error"),_p(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vp(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return hE.create(n,...e)}function Te(n,e,...t){if(!n)throw vp(e,...t)}function Qi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Zc(e),new Error(e)}function Ji(n,e){n||Qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(){return typeof self<"u"&&self.location?.href||""}function NR(){return Y0()==="http:"||Y0()==="https:"}function Y0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NR()||aS()||"connection"in navigator)?navigator.onLine:!0}function MR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ji(t>e,"Short delay should be less than long delay!"),this.isMobile=iS()||oS()}get(){return DR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(n,e){Ji(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PR=new uu(3e4,6e4);function rr(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function sr(n,e,t,s,o={}){return dE(n,o,async()=>{let u={},c={};s&&(e==="GET"?c=s:u={body:JSON.stringify(s)});const d=lu({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:m,...u};return sS()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&fo(n.emulatorConfig.host)&&(g.credentials="include"),fE.fetch()(await mE(n,n.config.apiHost,t,d),g)})}async function dE(n,e,t){n._canInitEmulator=!1;const s={...OR,...e};try{const o=new LR(n),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw Hc(n,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const d=u.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hc(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Hc(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Hc(n,"user-disabled",c);const _=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw _p(n,_,g);kn(n,_)}}catch(o){if(o instanceof ir)throw o;kn(n,"network-request-failed",{message:String(o)})}}async function cu(n,e,t,s,o={}){const u=await sr(n,e,t,s,o);return"mfaPendingCredential"in u&&kn(n,"multi-factor-auth-required",{_serverResponse:u}),u}async function mE(n,e,t,s){const o=`${e}${t}?${s}`,u=n,c=u.config.emulator?Ep(n.config,o):`${n.config.apiScheme}://${o}`;return VR.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}function kR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Hn(this.auth,"network-request-failed")),PR.get())})}}function Hc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Hn(n,e,s);return o.customData._tokenResponse=t,o}function Q0(n){return n!==void 0&&n.enterprise!==void 0}class UR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return kR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function zR(n,e){return sr(n,"GET","/v2/recaptchaConfig",rr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BR(n,e){return sr(n,"POST","/v1/accounts:delete",e)}async function mh(n,e){return sr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jR(n,e=!1){const t=Dt(n),s=await t.getIdToken(e),o=Tp(s);Te(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u?.sign_in_provider;return{claims:o,token:s,authTime:Bl(_m(o.auth_time)),issuedAtTime:Bl(_m(o.iat)),expirationTime:Bl(_m(o.exp)),signInProvider:c||null,signInSecondFactor:u?.sign_in_second_factor||null}}function _m(n){return Number(n)*1e3}function Tp(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Zc("JWT malformed, contained fewer than 3 sections"),null;try{const o=Z1(t);return o?JSON.parse(o):(Zc("Failed to decode base64 JWT payload"),null)}catch(o){return Zc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function K0(n){const e=Tp(n);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof ir&&qR(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function qR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bl(this.lastLoginAt),this.creationTime=Bl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(n){const e=n.auth,t=await n.getIdToken(),s=await Kl(n,mh(e,{idToken:t}));Te(s?.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const u=o.providerUserInfo?.length?pE(o.providerUserInfo):[],c=GR(n.providerData,u),d=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!c?.length,g=d?m:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new zm(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,_)}async function HR(n){const e=Dt(n);await ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GR(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function pE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(n,e){const t=await dE(n,{},async()=>{const s=lu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=n.config,c=await mE(n,o,"/v1/token",`key=${u}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:s};return n.emulatorConfig&&fo(n.emulatorConfig.host)&&(m.credentials="include"),fE.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function QR(n,e){return sr(n,"POST","/v2/accounts:revokeToken",rr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):K0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const t=K0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:u}=await YR(e,t);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:u}=t,c=new Wa;return s&&(Te(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(Te(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),u&&(Te(typeof u=="number","internal-error",{appName:e}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wa,this.toJSON())}_performRefresh(){return Qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(n,e){Te(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Fn{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new FR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new zm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Kl(this,this.stsTokenManager.getToken(this.auth,e));return Te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jR(this,e)}reload(){return HR(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Fn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await ph(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(Xi(this.auth));const e=await this.getIdToken();return await Kl(this,BR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:w,isAnonymous:S,providerData:C,stsTokenManager:M}=t;Te(T&&M,e,"internal-error");const N=Wa.fromJSON(this.name,M);Te(typeof T=="string",e,"internal-error"),kr(s,e.name),kr(o,e.name),Te(typeof w=="boolean",e,"internal-error"),Te(typeof S=="boolean",e,"internal-error"),kr(u,e.name),kr(c,e.name),kr(d,e.name),kr(m,e.name),kr(g,e.name),kr(_,e.name);const B=new Fn({uid:T,auth:e,email:o,emailVerified:w,displayName:s,isAnonymous:S,photoURL:c,phoneNumber:u,tenantId:d,stsTokenManager:N,createdAt:g,lastLoginAt:_});return C&&Array.isArray(C)&&(B.providerData=C.map(X=>({...X}))),m&&(B._redirectEventId=m),B}static async _fromIdTokenResponse(e,t,s=!1){const o=new Wa;o.updateFromServerResponse(t);const u=new Fn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await ph(u),u}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Te(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?pE(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!u?.length,d=new Wa;d.updateFromIdToken(s);const m=new Fn({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new zm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=new Map;function Ki(n){Ji(n instanceof Function,"Expected a class definition");let e=$0.get(n);return e?(Ji(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,$0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}gE.type="NONE";const X0=gE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(n,e,t){return`firebase:${n}:${e}:${t}`}class Za{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Jc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Jc("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await mh(this.auth,{idToken:e}).catch(()=>{});return t?Fn._fromGetAccountInfoResponse(this.auth,t,e):null}return Fn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Za(Ki(X0),e,s);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||Ki(X0);const c=Jc(s,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(c);if(_){let T;if(typeof _=="string"){const w=await mh(e,{idToken:_}).catch(()=>{});if(!w)break;T=await Fn._fromGetAccountInfoResponse(e,w,_)}else T=Fn._fromJSON(e,_);g!==u&&(d=T),u=g;break}}catch{}const m=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!m.length?new Za(u,e,s):(u=m[0],d&&await u._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==u)try{await g._remove(c)}catch{}})),new Za(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(EE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wE(e))return"Blackberry";if(AE(e))return"Webos";if(_E(e))return"Safari";if((e.includes("chrome/")||vE(e))&&!e.includes("edge/"))return"Chrome";if(TE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function yE(n=Jt()){return/firefox\//i.test(n)}function _E(n=Jt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vE(n=Jt()){return/crios\//i.test(n)}function EE(n=Jt()){return/iemobile/i.test(n)}function TE(n=Jt()){return/android/i.test(n)}function wE(n=Jt()){return/blackberry/i.test(n)}function AE(n=Jt()){return/webos/i.test(n)}function wp(n=Jt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function KR(n=Jt()){return wp(n)&&!!window.navigator?.standalone}function $R(){return lS()&&document.documentMode===10}function bE(n=Jt()){return wp(n)||TE(n)||AE(n)||wE(n)||/windows phone/i.test(n)||EE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(n,e=[]){let t;switch(n){case"Browser":t=W0(Jt());break;case"Worker":t=`${W0(Jt())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${mo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=u=>new Promise((c,d)=>{try{const m=e(u);c(m)}catch(m){d(m)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WR(n,e={}){return sr(n,"GET","/v2/passwordPolicy",rr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=6;class JR{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ZR,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Z0(this),this.idTokenSubscription=new Z0(this),this.beforeStateQueue=new XR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ki(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Za.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await mh(this,{idToken:e}),s=await Fn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(vn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,c=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!u||u===c)&&d?.user&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ph(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vn(this.app))return Promise.reject(Xi(this));const t=e?Dt(e):null;return t&&Te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(Xi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vn(this.app)?Promise.reject(Xi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ki(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WR(this),t=new JR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ou("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await QR(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ki(e)||this._popupRedirectResolver;Te(t,this,"argument-error"),this.redirectPersistenceManager=await Za.create(this,[Ki(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(d,this,"internal-error"),d.then(()=>{c||u(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,s,o);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&IR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ar(n){return Dt(n)}class Z0{constructor(e){this.auth=e,this.observer=null,this.addObserver=gS(t=>this.observer=t)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tC(n){Vh=n}function RE(n){return Vh.loadJS(n)}function nC(){return Vh.recaptchaEnterpriseScript}function iC(){return Vh.gapiScript}function rC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class sC{constructor(){this.enterprise=new aC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class aC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const oC="recaptcha-enterprise",CE="NO_RECAPTCHA";class lC{constructor(e){this.type=oC,this.auth=ar(e)}async verify(e="verify",t=!1){async function s(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(c,d)=>{zR(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new UR(m);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,c(g.siteKey)}}).catch(m=>{d(m)})})}function o(u,c,d){const m=window.grecaptcha;Q0(m)?m.enterprise.ready(()=>{m.enterprise.execute(u,{action:e}).then(g=>{c(g)}).catch(()=>{c(CE)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sC().execute("siteKey",{action:"verify"}):new Promise((u,c)=>{s(this.auth).then(d=>{if(!t&&Q0(window.grecaptcha))o(d,u,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=nC();m.length!==0&&(m+=d),RE(m).then(()=>{o(d,u,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function J0(n,e,t,s=!1,o=!1){const u=new lC(n);let c;if(o)c=CE;else try{c=await u.verify(t)}catch{c=await u.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function gh(n,e,t,s,o){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await J0(n,e,t,t==="getOobCode");return s(n,u)}else return s(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await J0(n,e,t,t==="getOobCode");return s(n,c)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(n,e){const t=yp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(Gs(u,e??{}))return o;kn(o,"already-initialized")}return t.initialize({options:e})}function cC(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Ki);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function hC(n,e,t){const s=ar(n);Te(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=IE(e),{host:c,port:d}=fC(e),m=d===null?"":`:${d}`,g={url:`${u}//${c}${m}/`},_=Object.freeze({host:c,port:d,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Te(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Te(Gs(g,s.config.emulator)&&Gs(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,fo(c)?(nE(`${u}//${c}${m}`),iE("Auth",!0)):dC()}function IE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function fC(n){const e=IE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:ev(s.substr(u.length+1))}}else{const[u,c]=s.split(":");return{host:u,port:ev(c)}}}function ev(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function dC(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qi("not implemented")}_getIdTokenResponse(e){return Qi("not implemented")}_linkToIdToken(e,t){return Qi("not implemented")}_getReauthenticationResolver(e){return Qi("not implemented")}}async function mC(n,e){return sr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pC(n,e){return cu(n,"POST","/v1/accounts:signInWithPassword",rr(n,e))}async function gC(n,e){return sr(n,"POST","/v1/accounts:sendOobCode",rr(n,e))}async function yC(n,e){return gC(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _C(n,e){return cu(n,"POST","/v1/accounts:signInWithEmailLink",rr(n,e))}async function vC(n,e){return cu(n,"POST","/v1/accounts:signInWithEmailLink",rr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l extends Ap{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new $l(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new $l(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gh(e,t,"signInWithPassword",pC);case"emailLink":return _C(e,{email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gh(e,s,"signUpPassword",mC);case"emailLink":return vC(e,{idToken:t,email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(n,e){return cu(n,"POST","/v1/accounts:signInWithIdp",rr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="http://localhost";class Qs extends Ap{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):kn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=t;if(!s||!o)return null;const c=new Qs(s,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ja(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ja(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ja(e,t)}buildRequest(){const e={requestUri:EC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=lu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wC(n){const e=Ol(Vl(n)).link,t=e?Ol(Vl(e)).deep_link_id:null,s=Ol(Vl(n)).deep_link_id;return(s?Ol(Vl(s)).link:null)||s||t||e||n}class bp{constructor(e){const t=Ol(Vl(e)),s=t.apiKey??null,o=t.oobCode??null,u=TC(t.mode??null);Te(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=wC(e);try{return new bp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this.providerId=po.PROVIDER_ID}static credential(e,t){return $l._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=bp.parseLink(t);return Te(s,"argument-error"),$l._fromEmailAndCode(e,s.code,s.tenantId)}}po.PROVIDER_ID="password";po.EMAIL_PASSWORD_SIGN_IN_METHOD="password";po.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends Sp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends hu{constructor(){super("facebook.com")}static credential(e){return Qs._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lr.credential(e.oauthAccessToken)}catch{return null}}}Lr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Lr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends hu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qs._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Yi.credential(t,s)}catch{return null}}}Yi.GOOGLE_SIGN_IN_METHOD="google.com";Yi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends hu{constructor(){super("github.com")}static credential(e){return Qs._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ur.credential(e.oauthAccessToken)}catch{return null}}}Ur.GITHUB_SIGN_IN_METHOD="github.com";Ur.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends hu{constructor(){super("twitter.com")}static credential(e,t){return Qs._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return zr.credential(t,s)}catch{return null}}}zr.TWITTER_SIGN_IN_METHOD="twitter.com";zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AC(n,e){return cu(n,"POST","/v1/accounts:signUp",rr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const u=await Fn._fromIdTokenResponse(e,s,o),c=tv(s);return new Ks({user:u,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=tv(s);return new Ks({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function tv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh extends ir{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,yh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new yh(e,t,s,o)}}function xE(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?yh._fromErrorAndOperation(n,u,e,s):u})}async function bC(n,e,t=!1){const s=await Kl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ks._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SC(n,e,t=!1){const{auth:s}=n;if(vn(s.app))return Promise.reject(Xi(s));const o="reauthenticate";try{const u=await Kl(n,xE(s,o,e,n),t);Te(u.idToken,s,"internal-error");const c=Tp(u.idToken);Te(c,s,"internal-error");const{sub:d}=c;return Te(n.uid===d,s,"user-mismatch"),Ks._forOperation(n,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&kn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NE(n,e,t=!1){if(vn(n.app))return Promise.reject(Xi(n));const s="signIn",o=await xE(n,s,e),u=await Ks._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(u.user),u}async function RC(n,e){return NE(ar(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DE(n){const e=ar(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function CC(n,e,t){const s=ar(n);await gh(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",yC)}async function IC(n,e,t){if(vn(n.app))return Promise.reject(Xi(n));const s=ar(n),c=await gh(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",AC).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&DE(n),m}),d=await Ks._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(d.user),d}function xC(n,e,t){return vn(n.app)?Promise.reject(Xi(n)):RC(Dt(n),po.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&DE(n),s})}function NC(n,e,t,s){return Dt(n).onIdTokenChanged(e,t,s)}function DC(n,e,t){return Dt(n).beforeAuthStateChanged(e,t)}function MC(n,e,t,s){return Dt(n).onAuthStateChanged(e,t,s)}function OC(n){return Dt(n).signOut()}const _h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_h,"1"),this.storage.removeItem(_h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=1e3,PC=10;class OE extends ME{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},u=this.storage.getItem(s);$R()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,PC):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},VC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}OE.type="LOCAL";const kC=OE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE extends ME{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}VE.type="SESSION";const PE=VE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Ph(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:u}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const d=Array.from(c).map(async g=>g(t.origin,u)),m=await LC(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ph.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((d,m)=>{const g=Rp("",20);o.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(T){const w=T;if(w.data.eventId===g)switch(w.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),d(w.data.response);break;default:clearTimeout(_),clearTimeout(u),m(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(){return window}function zC(n){fi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(){return typeof fi().WorkerGlobalScope<"u"&&typeof fi().importScripts=="function"}async function BC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jC(){return navigator?.serviceWorker?.controller||null}function qC(){return kE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="firebaseLocalStorageDb",FC=1,vh="firebaseLocalStorage",UE="fbase_key";class fu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function kh(n,e){return n.transaction([vh],e?"readwrite":"readonly").objectStore(vh)}function HC(){const n=indexedDB.deleteDatabase(LE);return new fu(n).toPromise()}function Bm(){const n=indexedDB.open(LE,FC);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(vh,{keyPath:UE})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(vh)?e(s):(s.close(),await HC(),e(await Bm()))})})}async function nv(n,e,t){const s=kh(n,!0).put({[UE]:e,value:t});return new fu(s).toPromise()}async function GC(n,e){const t=kh(n,!1).get(e),s=await new fu(t).toPromise();return s===void 0?null:s.value}function iv(n,e){const t=kh(n,!0).delete(e);return new fu(t).toPromise()}const YC=800,QC=3;class zE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>QC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ph._getInstance(qC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await BC(),!this.activeServiceWorker)return;this.sender=new UC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bm();return await nv(e,_h,"1"),await iv(e,_h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>nv(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>GC(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>iv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=kh(o,!1).getAll();return new fu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zE.type="LOCAL";const KC=zE;new uu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(n,e){return e?Ki(e):(Te(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp extends Ap{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ja(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ja(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ja(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $C(n){return NE(n.auth,new Cp(n),n.bypassAuthState)}function XC(n){const{auth:e,user:t}=n;return Te(t,e,"internal-error"),SC(t,new Cp(n),n.bypassAuthState)}async function WC(n){const{auth:e,user:t}=n;return Te(t,e,"internal-error"),bC(t,new Cp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,t,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:u,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $C;case"linkViaPopup":case"linkViaRedirect":return WC;case"reauthViaPopup":case"reauthViaRedirect":return XC;default:kn(this.auth,"internal-error")}}resolve(e){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=new uu(2e3,1e4);async function JC(n,e,t){if(vn(n.app))return Promise.reject(Hn(n,"operation-not-supported-in-this-environment"));const s=ar(n);xR(n,e,Sp);const o=BE(s,t);return new Bs(s,"signInViaPopup",e,o).executeNotNull()}class Bs extends jE{constructor(e,t,s,o,u){super(e,t,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Bs.currentPopupAction&&Bs.currentPopupAction.cancel(),Bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){Ji(this.filter.length===1,"Popup operations only handle one event");const e=Rp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZC.get())};e()}}Bs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="pendingRedirect",eh=new Map;class tI extends jE{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=eh.get(this.auth._key());if(!e){try{const s=await nI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}eh.set(this.auth._key(),e)}return this.bypassAuthState||eh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nI(n,e){const t=sI(e),s=rI(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function iI(n,e){eh.set(n._key(),e)}function rI(n){return Ki(n._redirectPersistence)}function sI(n){return Jc(eI,n.config.apiKey,n.name)}async function aI(n,e,t=!1){if(vn(n.app))return Promise.reject(Xi(n));const s=ar(n),o=BE(s,e),c=await new tI(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=600*1e3;class lI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!qE(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Hn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oI&&this.cachedEventUids.clear(),this.cachedEventUids.has(rv(e))}saveEventToCache(e){this.cachedEventUids.add(rv(e)),this.lastProcessedEventTime=Date.now()}}function rv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function qE({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function uI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cI(n,e={}){return sr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fI=/^https?/;async function dI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await cI(n);for(const t of e)try{if(mI(t))return}catch{}kn(n,"unauthorized-domain")}function mI(n){const e=Um(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!fI.test(t))return!1;if(hI.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=new uu(3e4,6e4);function sv(){const n=fi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function gI(n){return new Promise((e,t)=>{function s(){sv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sv(),t(Hn(n,"network-request-failed"))},timeout:pI.get()})}if(fi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(fi().gapi?.load)s();else{const o=rC("iframefcb");return fi()[o]=()=>{gapi.load?s():t(Hn(n,"network-request-failed"))},RE(`${iC()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw th=null,e})}let th=null;function yI(n){return th=th||gI(n),th}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=new uu(5e3,15e3),vI="__/auth/iframe",EI="emulator/auth/iframe",TI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AI(n){const e=n.config;Te(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ep(e,EI):`https://${n.config.authDomain}/${vI}`,s={apiKey:e.apiKey,appName:n.name,v:mo},o=wI.get(n.config.apiHost);o&&(s.eid=o);const u=n._getFrameworks();return u.length&&(s.fw=u.join(",")),`${t}?${lu(s).slice(1)}`}async function bI(n){const e=await yI(n),t=fi().gapi;return Te(t,n,"internal-error"),e.open({where:document.body,url:AI(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TI,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const c=Hn(n,"network-request-failed"),d=fi().setTimeout(()=>{u(c)},_I.get());function m(){fi().clearTimeout(d),o(s)}s.ping(m).then(m,()=>{u(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},RI=500,CI=600,II="_blank",xI="http://localhost";class av{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function NI(n,e,t,s=RI,o=CI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const m={...SI,width:s.toString(),height:o.toString(),top:u,left:c},g=Jt().toLowerCase();t&&(d=vE(g)?II:t),yE(g)&&(e=e||xI,m.scrollbars="yes");const _=Object.entries(m).reduce((w,[S,C])=>`${w}${S}=${C},`,"");if(KR(g)&&d!=="_self")return DI(e||"",d),new av(null);const T=window.open(e||"",d,_);Te(T,n,"popup-blocked");try{T.focus()}catch{}return new av(T)}function DI(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="__/auth/handler",OI="emulator/auth/handler",VI=encodeURIComponent("fac");async function ov(n,e,t,s,o,u){Te(n.config.authDomain,n,"auth-domain-config-required"),Te(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:mo,eventId:o};if(e instanceof Sp){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",pS(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))c[_]=T}if(e instanceof hu){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const m=await n._getAppCheckToken(),g=m?`#${VI}=${encodeURIComponent(m)}`:"";return`${PI(n)}?${lu(d).slice(1)}${g}`}function PI({config:n}){return n.emulator?Ep(n,OI):`https://${n.authDomain}/${MI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="webStorageSupport";class kI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PE,this._completeRedirectFn=aI,this._overrideRedirectResult=iI}async _openPopup(e,t,s,o){Ji(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await ov(e,t,s,Um(),o);return NI(e,u,Rp())}async _openRedirect(e,t,s,o){await this._originValidation(e);const u=await ov(e,t,s,Um(),o);return zC(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(Ji(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await bI(e),s=new lI(e);return t.register("authEvent",o=>(Te(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vm,{type:vm},o=>{const u=o?.[0]?.[vm];u!==void 0&&t(!!u),kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return bE()||_E()||wp()}}const LI=kI;var lv="@firebase/auth",uv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BI(n){no(new Ys("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=s.options;Te(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SE(n)},g=new eC(s,o,u,m);return cC(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),no(new Ys("auth-internal",e=>{const t=ar(e.getProvider("auth").getImmediate());return(s=>new UI(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fr(lv,uv,zI(n)),Fr(lv,uv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=300,qI=tE("authIdTokenMaxAge")||jI;let cv=null;const FI=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>qI)return;const o=t?.token;cv!==o&&(cv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function HI(n=oE()){const e=yp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=uC(n,{popupRedirectResolver:LI,persistence:[KC,kC,PE]}),s=tE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const c=FI(u.toString());DC(t,c,()=>c(t.currentUser)),NC(t,d=>c(d))}}const o=J1("auth");return o&&hC(t,`http://${o}`),t}function GI(){return document.getElementsByTagName("head")?.[0]??document}tC({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const u=Hn("internal-error");u.customData=o,t(u)},s.type="text/javascript",s.charset="UTF-8",GI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BI("Browser");var hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hr,FE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,R){function I(){}I.prototype=R.prototype,V.D=R.prototype,V.prototype=new I,V.prototype.constructor=V,V.C=function(O,P,U){for(var x=Array(arguments.length-2),me=2;me<arguments.length;me++)x[me-2]=arguments[me];return R.prototype[P].apply(O,x)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(V,R,I){I||(I=0);var O=Array(16);if(typeof R=="string")for(var P=0;16>P;++P)O[P]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(P=0;16>P;++P)O[P]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=V.g[0],I=V.g[1],P=V.g[2];var U=V.g[3],x=R+(U^I&(P^U))+O[0]+3614090360&4294967295;R=I+(x<<7&4294967295|x>>>25),x=U+(P^R&(I^P))+O[1]+3905402710&4294967295,U=R+(x<<12&4294967295|x>>>20),x=P+(I^U&(R^I))+O[2]+606105819&4294967295,P=U+(x<<17&4294967295|x>>>15),x=I+(R^P&(U^R))+O[3]+3250441966&4294967295,I=P+(x<<22&4294967295|x>>>10),x=R+(U^I&(P^U))+O[4]+4118548399&4294967295,R=I+(x<<7&4294967295|x>>>25),x=U+(P^R&(I^P))+O[5]+1200080426&4294967295,U=R+(x<<12&4294967295|x>>>20),x=P+(I^U&(R^I))+O[6]+2821735955&4294967295,P=U+(x<<17&4294967295|x>>>15),x=I+(R^P&(U^R))+O[7]+4249261313&4294967295,I=P+(x<<22&4294967295|x>>>10),x=R+(U^I&(P^U))+O[8]+1770035416&4294967295,R=I+(x<<7&4294967295|x>>>25),x=U+(P^R&(I^P))+O[9]+2336552879&4294967295,U=R+(x<<12&4294967295|x>>>20),x=P+(I^U&(R^I))+O[10]+4294925233&4294967295,P=U+(x<<17&4294967295|x>>>15),x=I+(R^P&(U^R))+O[11]+2304563134&4294967295,I=P+(x<<22&4294967295|x>>>10),x=R+(U^I&(P^U))+O[12]+1804603682&4294967295,R=I+(x<<7&4294967295|x>>>25),x=U+(P^R&(I^P))+O[13]+4254626195&4294967295,U=R+(x<<12&4294967295|x>>>20),x=P+(I^U&(R^I))+O[14]+2792965006&4294967295,P=U+(x<<17&4294967295|x>>>15),x=I+(R^P&(U^R))+O[15]+1236535329&4294967295,I=P+(x<<22&4294967295|x>>>10),x=R+(P^U&(I^P))+O[1]+4129170786&4294967295,R=I+(x<<5&4294967295|x>>>27),x=U+(I^P&(R^I))+O[6]+3225465664&4294967295,U=R+(x<<9&4294967295|x>>>23),x=P+(R^I&(U^R))+O[11]+643717713&4294967295,P=U+(x<<14&4294967295|x>>>18),x=I+(U^R&(P^U))+O[0]+3921069994&4294967295,I=P+(x<<20&4294967295|x>>>12),x=R+(P^U&(I^P))+O[5]+3593408605&4294967295,R=I+(x<<5&4294967295|x>>>27),x=U+(I^P&(R^I))+O[10]+38016083&4294967295,U=R+(x<<9&4294967295|x>>>23),x=P+(R^I&(U^R))+O[15]+3634488961&4294967295,P=U+(x<<14&4294967295|x>>>18),x=I+(U^R&(P^U))+O[4]+3889429448&4294967295,I=P+(x<<20&4294967295|x>>>12),x=R+(P^U&(I^P))+O[9]+568446438&4294967295,R=I+(x<<5&4294967295|x>>>27),x=U+(I^P&(R^I))+O[14]+3275163606&4294967295,U=R+(x<<9&4294967295|x>>>23),x=P+(R^I&(U^R))+O[3]+4107603335&4294967295,P=U+(x<<14&4294967295|x>>>18),x=I+(U^R&(P^U))+O[8]+1163531501&4294967295,I=P+(x<<20&4294967295|x>>>12),x=R+(P^U&(I^P))+O[13]+2850285829&4294967295,R=I+(x<<5&4294967295|x>>>27),x=U+(I^P&(R^I))+O[2]+4243563512&4294967295,U=R+(x<<9&4294967295|x>>>23),x=P+(R^I&(U^R))+O[7]+1735328473&4294967295,P=U+(x<<14&4294967295|x>>>18),x=I+(U^R&(P^U))+O[12]+2368359562&4294967295,I=P+(x<<20&4294967295|x>>>12),x=R+(I^P^U)+O[5]+4294588738&4294967295,R=I+(x<<4&4294967295|x>>>28),x=U+(R^I^P)+O[8]+2272392833&4294967295,U=R+(x<<11&4294967295|x>>>21),x=P+(U^R^I)+O[11]+1839030562&4294967295,P=U+(x<<16&4294967295|x>>>16),x=I+(P^U^R)+O[14]+4259657740&4294967295,I=P+(x<<23&4294967295|x>>>9),x=R+(I^P^U)+O[1]+2763975236&4294967295,R=I+(x<<4&4294967295|x>>>28),x=U+(R^I^P)+O[4]+1272893353&4294967295,U=R+(x<<11&4294967295|x>>>21),x=P+(U^R^I)+O[7]+4139469664&4294967295,P=U+(x<<16&4294967295|x>>>16),x=I+(P^U^R)+O[10]+3200236656&4294967295,I=P+(x<<23&4294967295|x>>>9),x=R+(I^P^U)+O[13]+681279174&4294967295,R=I+(x<<4&4294967295|x>>>28),x=U+(R^I^P)+O[0]+3936430074&4294967295,U=R+(x<<11&4294967295|x>>>21),x=P+(U^R^I)+O[3]+3572445317&4294967295,P=U+(x<<16&4294967295|x>>>16),x=I+(P^U^R)+O[6]+76029189&4294967295,I=P+(x<<23&4294967295|x>>>9),x=R+(I^P^U)+O[9]+3654602809&4294967295,R=I+(x<<4&4294967295|x>>>28),x=U+(R^I^P)+O[12]+3873151461&4294967295,U=R+(x<<11&4294967295|x>>>21),x=P+(U^R^I)+O[15]+530742520&4294967295,P=U+(x<<16&4294967295|x>>>16),x=I+(P^U^R)+O[2]+3299628645&4294967295,I=P+(x<<23&4294967295|x>>>9),x=R+(P^(I|~U))+O[0]+4096336452&4294967295,R=I+(x<<6&4294967295|x>>>26),x=U+(I^(R|~P))+O[7]+1126891415&4294967295,U=R+(x<<10&4294967295|x>>>22),x=P+(R^(U|~I))+O[14]+2878612391&4294967295,P=U+(x<<15&4294967295|x>>>17),x=I+(U^(P|~R))+O[5]+4237533241&4294967295,I=P+(x<<21&4294967295|x>>>11),x=R+(P^(I|~U))+O[12]+1700485571&4294967295,R=I+(x<<6&4294967295|x>>>26),x=U+(I^(R|~P))+O[3]+2399980690&4294967295,U=R+(x<<10&4294967295|x>>>22),x=P+(R^(U|~I))+O[10]+4293915773&4294967295,P=U+(x<<15&4294967295|x>>>17),x=I+(U^(P|~R))+O[1]+2240044497&4294967295,I=P+(x<<21&4294967295|x>>>11),x=R+(P^(I|~U))+O[8]+1873313359&4294967295,R=I+(x<<6&4294967295|x>>>26),x=U+(I^(R|~P))+O[15]+4264355552&4294967295,U=R+(x<<10&4294967295|x>>>22),x=P+(R^(U|~I))+O[6]+2734768916&4294967295,P=U+(x<<15&4294967295|x>>>17),x=I+(U^(P|~R))+O[13]+1309151649&4294967295,I=P+(x<<21&4294967295|x>>>11),x=R+(P^(I|~U))+O[4]+4149444226&4294967295,R=I+(x<<6&4294967295|x>>>26),x=U+(I^(R|~P))+O[11]+3174756917&4294967295,U=R+(x<<10&4294967295|x>>>22),x=P+(R^(U|~I))+O[2]+718787259&4294967295,P=U+(x<<15&4294967295|x>>>17),x=I+(U^(P|~R))+O[9]+3951481745&4294967295,V.g[0]=V.g[0]+R&4294967295,V.g[1]=V.g[1]+(P+(x<<21&4294967295|x>>>11))&4294967295,V.g[2]=V.g[2]+P&4294967295,V.g[3]=V.g[3]+U&4294967295}s.prototype.u=function(V,R){R===void 0&&(R=V.length);for(var I=R-this.blockSize,O=this.B,P=this.h,U=0;U<R;){if(P==0)for(;U<=I;)o(this,V,U),U+=this.blockSize;if(typeof V=="string"){for(;U<R;)if(O[P++]=V.charCodeAt(U++),P==this.blockSize){o(this,O),P=0;break}}else for(;U<R;)if(O[P++]=V[U++],P==this.blockSize){o(this,O),P=0;break}}this.h=P,this.o+=R},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var R=1;R<V.length-8;++R)V[R]=0;var I=8*this.o;for(R=V.length-8;R<V.length;++R)V[R]=I&255,I/=256;for(this.u(V),V=Array(16),R=I=0;4>R;++R)for(var O=0;32>O;O+=8)V[I++]=this.g[R]>>>O&255;return V};function u(V,R){var I=d;return Object.prototype.hasOwnProperty.call(I,V)?I[V]:I[V]=R(V)}function c(V,R){this.h=R;for(var I=[],O=!0,P=V.length-1;0<=P;P--){var U=V[P]|0;O&&U==R||(I[P]=U,O=!1)}this.g=I}var d={};function m(V){return-128<=V&&128>V?u(V,function(R){return new c([R|0],0>R?-1:0)}):new c([V|0],0>V?-1:0)}function g(V){if(isNaN(V)||!isFinite(V))return T;if(0>V)return N(g(-V));for(var R=[],I=1,O=0;V>=I;O++)R[O]=V/I|0,I*=4294967296;return new c(R,0)}function _(V,R){if(V.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(V.charAt(0)=="-")return N(_(V.substring(1),R));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=g(Math.pow(R,8)),O=T,P=0;P<V.length;P+=8){var U=Math.min(8,V.length-P),x=parseInt(V.substring(P,P+U),R);8>U?(U=g(Math.pow(R,U)),O=O.j(U).add(g(x))):(O=O.j(I),O=O.add(g(x)))}return O}var T=m(0),w=m(1),S=m(16777216);n=c.prototype,n.m=function(){if(M(this))return-N(this).m();for(var V=0,R=1,I=0;I<this.g.length;I++){var O=this.i(I);V+=(0<=O?O:4294967296+O)*R,R*=4294967296}return V},n.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(C(this))return"0";if(M(this))return"-"+N(this).toString(V);for(var R=g(Math.pow(V,6)),I=this,O="";;){var P=se(I,R).g;I=B(I,P.j(R));var U=((0<I.g.length?I.g[0]:I.h)>>>0).toString(V);if(I=P,C(I))return U+O;for(;6>U.length;)U="0"+U;O=U+O}},n.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function C(V){if(V.h!=0)return!1;for(var R=0;R<V.g.length;R++)if(V.g[R]!=0)return!1;return!0}function M(V){return V.h==-1}n.l=function(V){return V=B(this,V),M(V)?-1:C(V)?0:1};function N(V){for(var R=V.g.length,I=[],O=0;O<R;O++)I[O]=~V.g[O];return new c(I,~V.h).add(w)}n.abs=function(){return M(this)?N(this):this},n.add=function(V){for(var R=Math.max(this.g.length,V.g.length),I=[],O=0,P=0;P<=R;P++){var U=O+(this.i(P)&65535)+(V.i(P)&65535),x=(U>>>16)+(this.i(P)>>>16)+(V.i(P)>>>16);O=x>>>16,U&=65535,x&=65535,I[P]=x<<16|U}return new c(I,I[I.length-1]&-2147483648?-1:0)};function B(V,R){return V.add(N(R))}n.j=function(V){if(C(this)||C(V))return T;if(M(this))return M(V)?N(this).j(N(V)):N(N(this).j(V));if(M(V))return N(this.j(N(V)));if(0>this.l(S)&&0>V.l(S))return g(this.m()*V.m());for(var R=this.g.length+V.g.length,I=[],O=0;O<2*R;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(var P=0;P<V.g.length;P++){var U=this.i(O)>>>16,x=this.i(O)&65535,me=V.i(P)>>>16,Le=V.i(P)&65535;I[2*O+2*P]+=x*Le,X(I,2*O+2*P),I[2*O+2*P+1]+=U*Le,X(I,2*O+2*P+1),I[2*O+2*P+1]+=x*me,X(I,2*O+2*P+1),I[2*O+2*P+2]+=U*me,X(I,2*O+2*P+2)}for(O=0;O<R;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=R;O<2*R;O++)I[O]=0;return new c(I,0)};function X(V,R){for(;(V[R]&65535)!=V[R];)V[R+1]+=V[R]>>>16,V[R]&=65535,R++}function Q(V,R){this.g=V,this.h=R}function se(V,R){if(C(R))throw Error("division by zero");if(C(V))return new Q(T,T);if(M(V))return R=se(N(V),R),new Q(N(R.g),N(R.h));if(M(R))return R=se(V,N(R)),new Q(N(R.g),R.h);if(30<V.g.length){if(M(V)||M(R))throw Error("slowDivide_ only works with positive integers.");for(var I=w,O=R;0>=O.l(V);)I=re(I),O=re(O);var P=oe(I,1),U=oe(O,1);for(O=oe(O,2),I=oe(I,2);!C(O);){var x=U.add(O);0>=x.l(V)&&(P=P.add(I),U=x),O=oe(O,1),I=oe(I,1)}return R=B(V,P.j(R)),new Q(P,R)}for(P=T;0<=V.l(R);){for(I=Math.max(1,Math.floor(V.m()/R.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),U=g(I),x=U.j(R);M(x)||0<x.l(V);)I-=O,U=g(I),x=U.j(R);C(U)&&(U=w),P=P.add(U),V=B(V,x)}return new Q(P,V)}n.A=function(V){return se(this,V).h},n.and=function(V){for(var R=Math.max(this.g.length,V.g.length),I=[],O=0;O<R;O++)I[O]=this.i(O)&V.i(O);return new c(I,this.h&V.h)},n.or=function(V){for(var R=Math.max(this.g.length,V.g.length),I=[],O=0;O<R;O++)I[O]=this.i(O)|V.i(O);return new c(I,this.h|V.h)},n.xor=function(V){for(var R=Math.max(this.g.length,V.g.length),I=[],O=0;O<R;O++)I[O]=this.i(O)^V.i(O);return new c(I,this.h^V.h)};function re(V){for(var R=V.g.length+1,I=[],O=0;O<R;O++)I[O]=V.i(O)<<1|V.i(O-1)>>>31;return new c(I,V.h)}function oe(V,R){var I=R>>5;R%=32;for(var O=V.g.length-I,P=[],U=0;U<O;U++)P[U]=0<R?V.i(U+I)>>>R|V.i(U+I+1)<<32-R:V.i(U+I);return new c(P,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,FE=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,Hr=c}).apply(typeof hv<"u"?hv:typeof self<"u"?self:typeof window<"u"?window:{});var Gc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HE,Pl,GE,nh,jm,YE,QE,KE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,v){return h==Array.prototype||h==Object.prototype||(h[y]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gc=="object"&&Gc];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=t(this);function o(h,y){if(y)e:{var v=s;h=h.split(".");for(var b=0;b<h.length-1;b++){var j=h[b];if(!(j in v))break e;v=v[j]}h=h[h.length-1],b=v[h],y=y(b),y!=b&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}function u(h,y){h instanceof String&&(h+="");var v=0,b=!1,j={next:function(){if(!b&&v<h.length){var W=v++;return{value:y(W,h[W]),done:!1}}return b=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(h){return h||function(){return u(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function g(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,v){return h.call.apply(h.bind,arguments)}function T(h,y,v){if(!h)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,b),h.apply(y,j)}}return function(){return h.apply(y,arguments)}}function w(h,y,v){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:T,w.apply(null,arguments)}function S(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),h.apply(this,b)}}function C(h,y){function v(){}v.prototype=y.prototype,h.aa=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(b,j,W){for(var ue=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)ue[Ue-2]=arguments[Ue];return y.prototype[j].apply(b,ue)}}function M(h){const y=h.length;if(0<y){const v=Array(y);for(let b=0;b<y;b++)v[b]=h[b];return v}return[]}function N(h,y){for(let v=1;v<arguments.length;v++){const b=arguments[v];if(m(b)){const j=h.length||0,W=b.length||0;h.length=j+W;for(let ue=0;ue<W;ue++)h[j+ue]=b[ue]}else h.push(b)}}class B{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function X(h){return/^[\s\xa0]*$/.test(h)}function Q(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function se(h){return se[" "](h),h}se[" "]=function(){};var re=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function oe(h,y,v){for(const b in h)y.call(v,h[b],b,h)}function V(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function R(h){const y={};for(const v in h)y[v]=h[v];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(h,y){let v,b;for(let j=1;j<arguments.length;j++){b=arguments[j];for(v in b)h[v]=b[v];for(let W=0;W<I.length;W++)v=I[W],Object.prototype.hasOwnProperty.call(b,v)&&(h[v]=b[v])}}function P(h){var y=1;h=h.split(":");const v=[];for(;0<y&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function U(h){d.setTimeout(()=>{throw h},0)}function x(){var h=Ie;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class me{constructor(){this.h=this.g=null}add(y,v){const b=Le.get();b.set(y,v),this.h?this.h.next=b:this.g=b,this.h=b}}var Le=new B(()=>new $,h=>h.reset());class ${constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,he=!1,Ie=new me,k=()=>{const h=d.Promise.resolve(void 0);ae=()=>{h.then(ie)}};var ie=()=>{for(var h;h=x();){try{h.h.call(h.g)}catch(v){U(v)}var y=Le;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}he=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var _e=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};d.addEventListener("test",v,y),d.removeEventListener("test",v,y)}catch{}return h})();function Ne(h,y){if(le.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,b=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(re){e:{try{se(y.nodeName);var j=!0;break e}catch{}j=!1}j||(y=null)}}else v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement);this.relatedTarget=y,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:be[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ne.aa.h.call(this)}}C(Ne,le);var be={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Mt="closure_listenable_"+(1e6*Math.random()|0),et=0;function Kn(h,y,v,b,j){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!b,this.ha=j,this.key=++et,this.da=this.fa=!1}function or(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ei(h){this.src=h,this.g={},this.h=0}Ei.prototype.add=function(h,y,v,b,j){var W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);var ue=ns(h,y,b,j);return-1<ue?(y=h[ue],v||(y.fa=!1)):(y=new Kn(y,this.src,W,!!b,j),y.fa=v,h.push(y)),y};function ts(h,y){var v=y.type;if(v in h.g){var b=h.g[v],j=Array.prototype.indexOf.call(b,y,void 0),W;(W=0<=j)&&Array.prototype.splice.call(b,j,1),W&&(or(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function ns(h,y,v,b){for(var j=0;j<h.length;++j){var W=h[j];if(!W.da&&W.listener==y&&W.capture==!!v&&W.ha==b)return j}return-1}var is="closure_lm_"+(1e6*Math.random()|0),To={};function vu(h,y,v,b,j){if(Array.isArray(y)){for(var W=0;W<y.length;W++)vu(h,y[W],v,b,j);return null}return v=Eu(v),h&&h[Mt]?h.K(y,v,g(b)?!!b.capture:!1,j):Tn(h,y,v,!1,b,j)}function Tn(h,y,v,b,j,W){if(!y)throw Error("Invalid event type");var ue=g(j)?!!j.capture:!!j,Ue=na(h);if(Ue||(h[is]=Ue=new Ei(h)),v=Ue.add(y,v,b,ue,W),v.proxy)return v;if(b=rf(),v.proxy=b,b.src=h,b.listener=v,h.addEventListener)_e||(j=ue),j===void 0&&(j=!1),h.addEventListener(y.toString(),b,j);else if(h.attachEvent)h.attachEvent(rs(y.toString()),b);else if(h.addListener&&h.removeListener)h.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function rf(){function h(v){return y.call(h.src,h.listener,v)}const y=sf;return h}function wo(h,y,v,b,j){if(Array.isArray(y))for(var W=0;W<y.length;W++)wo(h,y[W],v,b,j);else b=g(b)?!!b.capture:!!b,v=Eu(v),h&&h[Mt]?(h=h.i,y=String(y).toString(),y in h.g&&(W=h.g[y],v=ns(W,v,b,j),-1<v&&(or(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete h.g[y],h.h--)))):h&&(h=na(h))&&(y=h.g[y.toString()],h=-1,y&&(h=ns(y,v,b,j)),(v=-1<h?y[h]:null)&&ta(v))}function ta(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Mt])ts(y.i,h);else{var v=h.type,b=h.proxy;y.removeEventListener?y.removeEventListener(v,b,h.capture):y.detachEvent?y.detachEvent(rs(v),b):y.addListener&&y.removeListener&&y.removeListener(b),(v=na(y))?(ts(v,h),v.h==0&&(v.src=null,y[is]=null)):or(h)}}}function rs(h){return h in To?To[h]:To[h]="on"+h}function sf(h,y){if(h.da)h=!0;else{y=new Ne(y,this);var v=h.listener,b=h.ha||h.src;h.fa&&ta(h),h=v.call(b,y)}return h}function na(h){return h=h[is],h instanceof Ei?h:null}var Ao="__closure_events_fn_"+(1e9*Math.random()>>>0);function Eu(h){return typeof h=="function"?h:(h[Ao]||(h[Ao]=function(y){return h.handleEvent(y)}),h[Ao])}function ut(){ce.call(this),this.i=new Ei(this),this.M=this,this.F=null}C(ut,ce),ut.prototype[Mt]=!0,ut.prototype.removeEventListener=function(h,y,v,b){wo(this,h,y,v,b)};function Ye(h,y){var v,b=h.F;if(b)for(v=[];b;b=b.F)v.push(b);if(h=h.M,b=y.type||y,typeof y=="string")y=new le(y,h);else if(y instanceof le)y.target=y.target||h;else{var j=y;y=new le(b,h),O(y,j)}if(j=!0,v)for(var W=v.length-1;0<=W;W--){var ue=y.g=v[W];j=cn(ue,b,!0,y)&&j}if(ue=y.g=h,j=cn(ue,b,!0,y)&&j,j=cn(ue,b,!1,y)&&j,v)for(W=0;W<v.length;W++)ue=y.g=v[W],j=cn(ue,b,!1,y)&&j}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var v=h.g[y],b=0;b<v.length;b++)or(v[b]);delete h.g[y],h.h--}}this.F=null},ut.prototype.K=function(h,y,v,b){return this.i.add(String(h),y,!1,v,b)},ut.prototype.L=function(h,y,v,b){return this.i.add(String(h),y,!0,v,b)};function cn(h,y,v,b){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var j=!0,W=0;W<y.length;++W){var ue=y[W];if(ue&&!ue.da&&ue.capture==v){var Ue=ue.listener,Rt=ue.ha||ue.src;ue.fa&&ts(h.i,ue),j=Ue.call(Rt,b)!==!1&&j}}return j&&!b.defaultPrevented}function Qt(h,y,v){if(typeof h=="function")v&&(h=w(h,v));else if(h&&typeof h.handleEvent=="function")h=w(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function Tu(h){h.g=Qt(()=>{h.g=null,h.i&&(h.i=!1,Tu(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class af extends ce{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Tu(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ss(h){ce.call(this),this.h=h,this.g={}}C(ss,ce);var as=[];function os(h){oe(h.g,function(y,v){this.g.hasOwnProperty(v)&&ta(y)},h),h.g={}}ss.prototype.N=function(){ss.aa.N.call(this),os(this)},ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ln=d.JSON.stringify,ia=d.JSON.parse,ls=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function bo(){}bo.prototype.h=null;function So(h){return h.h||(h.h=h.i())}function Ro(){}var Ti={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wi(){le.call(this,"d")}C(wi,le);function Co(){le.call(this,"c")}C(Co,le);var $n={},Io=null;function lr(){return Io=Io||new ut}$n.La="serverreachability";function ra(h){le.call(this,$n.La,h)}C(ra,le);function ur(h){const y=lr();Ye(y,new ra(y))}$n.STAT_EVENT="statevent";function wu(h,y){le.call(this,$n.STAT_EVENT,h),this.stat=y}C(wu,le);function rt(h){const y=lr();Ye(y,new wu(y,h))}$n.Ma="timingevent";function St(h,y){le.call(this,$n.Ma,h),this.size=y}C(St,le);function yt(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function wn(){this.g=!0}wn.prototype.xa=function(){this.g=!1};function xo(h,y,v,b,j,W){h.info(function(){if(h.g)if(W)for(var ue="",Ue=W.split("&"),Rt=0;Rt<Ue.length;Rt++){var ze=Ue[Rt].split("=");if(1<ze.length){var Vt=ze[0];ze=ze[1];var Ct=Vt.split("_");ue=2<=Ct.length&&Ct[1]=="type"?ue+(Vt+"="+ze+"&"):ue+(Vt+"=redacted&")}}else ue=null;else ue=W;return"XMLHTTP REQ ("+b+") [attempt "+j+"]: "+y+`
`+v+`
`+ue})}function of(h,y,v,b,j,W,ue){h.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+j+"]: "+y+`
`+v+`
`+W+" "+ue})}function cr(h,y,v,b){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+us(h,v)+(b?" "+b:"")})}function Au(h,y){h.info(function(){return"TIMEOUT: "+y})}wn.prototype.info=function(){};function us(h,y){if(!h.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var b=v[h];if(!(2>b.length)){var j=b[1];if(Array.isArray(j)&&!(1>j.length)){var W=j[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ue=1;ue<j.length;ue++)j[ue]=""}}}}return Ln(v)}catch{return y}}var hr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ai={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xn;function Wn(){}C(Wn,bo),Wn.prototype.g=function(){return new XMLHttpRequest},Wn.prototype.i=function(){return{}},Xn=new Wn;function en(h,y,v,b){this.j=h,this.i=y,this.l=v,this.R=b||1,this.U=new ss(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ft}function ft(){this.i=null,this.g="",this.h=!1}var No={},sa={};function Un(h,y,v){h.L=1,h.v=ms(hn(y)),h.m=v,h.P=!0,bi(h,null)}function bi(h,y){h.F=Date.now(),cs(h),h.A=hn(h.v);var v=h.A,b=h.R;Array.isArray(b)||(b=[String(b)]),ko(v.i,"t",b),h.C=0,v=h.j.J,h.h=new ft,h.g=zu(h.j,v?y:null,!h.m),0<h.O&&(h.M=new af(w(h.Y,h,h.g),h.O)),y=h.U,v=h.g,b=h.ca;var j="readystatechange";Array.isArray(j)||(j&&(as[0]=j.toString()),j=as);for(var W=0;W<j.length;W++){var ue=vu(v,j[W],b||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=h.H?R(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),ur(),xo(h.i,h.u,h.A,h.l,h.R,h.m)}en.prototype.ca=function(h){h=h.target;const y=this.M;y&&Rn(h)==3?y.j():this.Y(h)},en.prototype.Y=function(h){try{if(h==this.g)e:{const Ct=Rn(this.g);var y=this.g.Ba();const Mi=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||Du(this.g)))){this.J||Ct!=4||y==7||(y==8||0>=Mi?ur(3):ur(2)),fr(this);var v=this.g.Z();this.X=v;t:if(bu(this)){var b=Du(this.g);h="";var j=b.length,W=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zt(this),Zn(this);var ue="";break t}this.h.i=new d.TextDecoder}for(y=0;y<j;y++)this.h.h=!0,h+=this.h.i.decode(b[y],{stream:!(W&&y==j-1)});b.length=0,this.h.g+=h,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=v==200,of(this.i,this.u,this.A,this.l,this.R,Ct,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,Rt=this.g;if((Ue=Rt.g?Rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(Ue)){var ze=Ue;break t}}ze=null}if(v=ze)cr(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hs(this,v);else{this.o=!1,this.s=3,rt(12),zt(this),Zn(this);break e}}if(this.P){v=!0;let Bt;for(;!this.J&&this.C<ue.length;)if(Bt=Su(this,ue),Bt==sa){Ct==4&&(this.s=4,rt(14),v=!1),cr(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==No){this.s=4,rt(15),cr(this.i,this.l,ue,"[Invalid Chunk]"),v=!1;break}else cr(this.i,this.l,Bt,null),hs(this,Bt);if(bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||ue.length!=0||this.h.h||(this.s=1,rt(16),v=!1),this.o=this.o&&v,!v)cr(this.i,this.l,ue,"[Invalid Chunked Response]"),zt(this),Zn(this);else if(0<ue.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),ws(Vt),Vt.M=!0,rt(11))}}else cr(this.i,this.l,ue,null),hs(this,ue);Ct==4&&zt(this),this.o&&!this.J&&(Ct==4?ku(this.j,this):(this.o=!1,cs(this)))}else ff(this.g),v==400&&0<ue.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),zt(this),Zn(this)}}}catch{}finally{}};function bu(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Su(h,y){var v=h.C,b=y.indexOf(`
`,v);return b==-1?sa:(v=Number(y.substring(v,b)),isNaN(v)?No:(b+=1,b+v>y.length?sa:(y=y.slice(b,b+v),h.C=b+v,y)))}en.prototype.cancel=function(){this.J=!0,zt(this)};function cs(h){h.S=Date.now()+h.I,Ru(h,h.I)}function Ru(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=yt(w(h.ba,h),y)}function fr(h){h.B&&(d.clearTimeout(h.B),h.B=null)}en.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Au(this.i,this.A),this.L!=2&&(ur(),rt(17)),zt(this),this.s=2,Zn(this)):Ru(this,this.S-h)};function Zn(h){h.j.G==0||h.J||ku(h.j,h)}function zt(h){fr(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,os(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function hs(h,y){try{var v=h.j;if(v.G!=0&&(v.g==h||Do(v.h,h))){if(!h.K&&Do(v.h,h)&&v.G==3){try{var b=v.Da.g.parse(y)}catch{b=null}if(Array.isArray(b)&&b.length==3){var j=b;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)ya(v),pa(v);else break e;jo(v),rt(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=yt(w(v.Za,v),6e3));if(1>=oa(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Di(v,11)}else if((h.K||v.g==h)&&ya(v),!X(y))for(j=v.Da.g.parse(y),y=0;y<j.length;y++){let ze=j[y];if(v.T=ze[0],ze=ze[1],v.G==2)if(ze[0]=="c"){v.K=ze[1],v.ia=ze[2];const Vt=ze[3];Vt!=null&&(v.la=Vt,v.j.info("VER="+v.la));const Ct=ze[4];Ct!=null&&(v.Aa=Ct,v.j.info("SVER="+v.Aa));const Mi=ze[5];Mi!=null&&typeof Mi=="number"&&0<Mi&&(b=1.5*Mi,v.L=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;const Bt=h.g;if(Bt){const si=Bt.g?Bt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(si){var W=b.h;W.g||si.indexOf("spdy")==-1&&si.indexOf("quic")==-1&&si.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(la(W,W.h),W.h=null))}if(b.D){const Fo=Bt.g?Bt.g.getResponseHeader("X-HTTP-Session-Id"):null;Fo&&(b.ya=Fo,$e(b.I,b.D,Fo))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),b=v;var ue=h;if(b.qa=Uu(b,b.J?b.ia:null,b.W),ue.K){tn(b.h,ue);var Ue=ue,Rt=b.L;Rt&&(Ue.I=Rt),Ue.B&&(fr(Ue),cs(Ue)),b.g=ue}else Vu(b);0<v.i.length&&ga(v)}else ze[0]!="stop"&&ze[0]!="close"||Di(v,7);else v.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Di(v,7):zo(v):ze[0]!="noop"&&v.l&&v.l.ta(ze),v.v=0)}}ur(4)}catch{}}var Cu=class{constructor(h,y){this.g=h,this.map=y}};function Si(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function aa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function oa(h){return h.h?1:h.g?h.g.size:0}function Do(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function la(h,y){h.g?h.g.add(y):h.h=y}function tn(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Si.prototype.cancel=function(){if(this.i=Mo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Mo(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.D);return y}return M(h.i)}function lf(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var y=[],v=h.length,b=0;b<v;b++)y.push(h[b]);return y}y=[],v=0;for(b in h)y[v++]=h[b];return y}function ua(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var y=[];h=h.length;for(var v=0;v<h;v++)y.push(v);return y}y=[],v=0;for(const b in h)y[v++]=b;return y}}}function Oo(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var v=ua(h),b=lf(h),j=b.length,W=0;W<j;W++)y.call(void 0,b[W],v&&v[W],h)}var fs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uf(h,y){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var b=h[v].indexOf("="),j=null;if(0<=b){var W=h[v].substring(0,b);j=h[v].substring(b+1)}else W=h[v];y(W,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function _t(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof _t){this.h=h.h,ds(this,h.j),this.o=h.o,this.g=h.g,dr(this,h.s),this.l=h.l;var y=h.i,v=new Ci;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Ri(this,v),this.m=h.m}else h&&(y=String(h).match(fs))?(this.h=!1,ds(this,y[1]||"",!0),this.o=An(y[2]||""),this.g=An(y[3]||"",!0),dr(this,y[4]),this.l=An(y[5]||"",!0),Ri(this,y[6]||"",!0),this.m=An(y[7]||"")):(this.h=!1,this.i=new Ci(null,this.h))}_t.prototype.toString=function(){var h=[],y=this.j;y&&h.push(ps(y,Vo,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(ps(y,Vo,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(ps(v,v.charAt(0)=="/"?cf:Po,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",ps(v,ca)),h.join("")};function hn(h){return new _t(h)}function ds(h,y,v){h.j=v?An(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function dr(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function Ri(h,y,v){y instanceof Ci?(h.i=y,xu(h.i,h.h)):(v||(y=ps(y,hf)),h.i=new Ci(y,h.h))}function $e(h,y,v){h.i.set(y,v)}function ms(h){return $e(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function An(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ps(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,Iu),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Iu(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Vo=/[#\/\?@]/g,Po=/[#\?:]/g,cf=/[#\?]/g,hf=/[#\?@]/g,ca=/#/g;function Ci(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function bn(h){h.g||(h.g=new Map,h.h=0,h.i&&uf(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}n=Ci.prototype,n.add=function(h,y){bn(this),this.i=null,h=Jn(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Ii(h,y){bn(h),y=Jn(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function xi(h,y){return bn(h),y=Jn(h,y),h.g.has(y)}n.forEach=function(h,y){bn(this),this.g.forEach(function(v,b){v.forEach(function(j){h.call(y,j,b,this)},this)},this)},n.na=function(){bn(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let b=0;b<y.length;b++){const j=h[b];for(let W=0;W<j.length;W++)v.push(y[b])}return v},n.V=function(h){bn(this);let y=[];if(typeof h=="string")xi(this,h)&&(y=y.concat(this.g.get(Jn(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)y=y.concat(h[v])}return y},n.set=function(h,y){return bn(this),this.i=null,h=Jn(this,h),xi(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function ko(h,y,v){Ii(h,y),0<v.length&&(h.i=null,h.g.set(Jn(h,y),M(v)),h.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var b=y[v];const W=encodeURIComponent(String(b)),ue=this.V(b);for(b=0;b<ue.length;b++){var j=W;ue[b]!==""&&(j+="="+encodeURIComponent(String(ue[b]))),h.push(j)}}return this.i=h.join("&")};function Jn(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function xu(h,y){y&&!h.j&&(bn(h),h.i=null,h.g.forEach(function(v,b){var j=b.toLowerCase();b!=j&&(Ii(this,b),ko(this,j,v))},h)),h.j=y}function gs(h,y){const v=new wn;if(d.Image){const b=new Image;b.onload=S(Sn,v,"TestLoadImage: loaded",!0,y,b),b.onerror=S(Sn,v,"TestLoadImage: error",!1,y,b),b.onabort=S(Sn,v,"TestLoadImage: abort",!1,y,b),b.ontimeout=S(Sn,v,"TestLoadImage: timeout",!1,y,b),d.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=h}else y(!1)}function zn(h,y){const v=new wn,b=new AbortController,j=setTimeout(()=>{b.abort(),Sn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:b.signal}).then(W=>{clearTimeout(j),W.ok?Sn(v,"TestPingServer: ok",!0,y):Sn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(j),Sn(v,"TestPingServer: error",!1,y)})}function Sn(h,y,v,b,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),b(v)}catch{}}function ys(){this.g=new ls}function ei(h,y,v){const b=v||"";try{Oo(h,function(j,W){let ue=j;g(j)&&(ue=Ln(j)),y.push(b+W+"="+encodeURIComponent(ue))})}catch(j){throw y.push(b+"type="+encodeURIComponent("_badmap")),j}}function mr(h){this.l=h.Ub||null,this.j=h.eb||!1}C(mr,bo),mr.prototype.g=function(){return new Ni(this.l,this.j)},mr.prototype.i=(function(h){return function(){return h}})({});function Ni(h,y){ut.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Ni,ut),n=Ni.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,ni(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ti(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lo(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lo(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?ti(this):ni(this),this.readyState==3&&Lo(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,ti(this))},n.Qa=function(h){this.g&&(this.response=h,ti(this))},n.ga=function(){this.g&&ti(this)};function ti(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ni(h)}n.setRequestHeader=function(h,y){this.u.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function ni(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ni.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Uo(h){let y="";return oe(h,function(v,b){y+=b,y+=":",y+=v,y+=`\r
`}),y}function Ot(h,y,v){e:{for(b in v){var b=!1;break e}b=!0}b||(v=Uo(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):$e(h,y,v))}function He(h){ut.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(He,ut);var ha=/^https?$/i,_s=["POST","PUT"];n=He.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,y,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xn.g(),this.v=this.o?So(this.o):So(Xn),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(W){Nu(this,W);return}if(h=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var j in b)v.set(j,b[j]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const W of b.keys())v.set(W,b.get(W));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),j=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(_s,y,void 0))||b||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ue]of v)this.g.setRequestHeader(W,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vs(this),this.u=!0,this.g.send(h),this.u=!1}catch(W){Nu(this,W)}};function Nu(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,fa(h),ii(h)}function fa(h){h.A||(h.A=!0,Ye(h,"complete"),Ye(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ye(this,"complete"),Ye(this,"abort"),ii(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ii(this,!0)),He.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?da(this):this.bb())},n.bb=function(){da(this)};function da(h){if(h.h&&typeof c<"u"&&(!h.v[1]||Rn(h)!=4||h.Z()!=2)){if(h.u&&Rn(h)==4)Qt(h.Ea,0,h);else if(Ye(h,"readystatechange"),Rn(h)==4){h.h=!1;try{const ue=h.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var b;if(b=ue===0){var j=String(h.D).match(fs)[1]||null;!j&&d.self&&d.self.location&&(j=d.self.location.protocol.slice(0,-1)),b=!ha.test(j?j.toLowerCase():"")}v=b}if(v)Ye(h,"complete"),Ye(h,"success");else{h.m=6;try{var W=2<Rn(h)?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.Z()+"]",fa(h)}}finally{ii(h)}}}}function ii(h,y){if(h.g){vs(h);const v=h.g,b=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Ye(h,"ready");try{v.onreadystatechange=b}catch{}}}function vs(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function Rn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),ia(y)}};function Du(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ff(h){const y={};h=(h.g&&2<=Rn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<h.length;b++){if(X(h[b]))continue;var v=P(h[b]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=y[j]||[];y[j]=W,W.push(v)}V(y,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Es(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function ma(h){this.Aa=0,this.i=[],this.j=new wn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Es("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Es("baseRetryDelayMs",5e3,h),this.cb=Es("retryDelaySeedMs",1e4,h),this.Wa=Es("forwardChannelMaxRetries",2,h),this.wa=Es("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Si(h&&h.concurrentRequestLimit),this.Da=new ys,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ma.prototype,n.la=8,n.G=1,n.connect=function(h,y,v,b){rt(0),this.W=h,this.H=y||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.I=Uu(this,null,this.W),ga(this)};function zo(h){if(Mu(h),h.G==3){var y=h.U++,v=hn(h.I);if($e(v,"SID",h.K),$e(v,"RID",y),$e(v,"TYPE","terminate"),Ts(h,v),y=new en(h,h.j,y),y.L=2,y.v=ms(hn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=y.v,v=!0),v||(y.g=zu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),cs(y)}Lu(h)}function pa(h){h.g&&(ws(h),h.g.cancel(),h.g=null)}function Mu(h){pa(h),h.u&&(d.clearTimeout(h.u),h.u=null),ya(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function ga(h){if(!aa(h.h)&&!h.s){h.s=!0;var y=h.Ga;ae||k(),he||(ae(),he=!0),Ie.add(y,h),h.B=0}}function df(h,y){return oa(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=yt(w(h.Ga,h,y),qo(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const j=new en(this,this.j,h);let W=this.o;if(this.S&&(W?(W=R(W),O(W,this.S)):W=this.S),this.m!==null||this.O||(j.H=W,W=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(y+=b,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Ou(this,j,y),v=hn(this.I),$e(v,"RID",h),$e(v,"CVER",22),this.D&&$e(v,"X-HTTP-Session-Id",this.D),Ts(this,v),W&&(this.O?y="headers="+encodeURIComponent(String(Uo(W)))+"&"+y:this.m&&Ot(v,this.m,W)),la(this.h,j),this.Ua&&$e(v,"TYPE","init"),this.P?($e(v,"$req",y),$e(v,"SID","null"),j.T=!0,Un(j,v,null)):Un(j,v,y),this.G=2}}else this.G==3&&(h?Bo(this,h):this.i.length==0||aa(this.h)||Bo(this))};function Bo(h,y){var v;y?v=y.l:v=h.U++;const b=hn(h.I);$e(b,"SID",h.K),$e(b,"RID",v),$e(b,"AID",h.T),Ts(h,b),h.m&&h.o&&Ot(b,h.m,h.o),v=new en(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),y&&(h.i=y.D.concat(h.i)),y=Ou(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),la(h.h,v),Un(v,b,y)}function Ts(h,y){h.H&&oe(h.H,function(v,b){$e(y,b,v)}),h.l&&Oo({},function(v,b){$e(y,b,v)})}function Ou(h,y,v){v=Math.min(h.i.length,v);var b=h.l?w(h.l.Na,h.l,h):null;e:{var j=h.i;let W=-1;for(;;){const ue=["count="+v];W==-1?0<v?(W=j[0].g,ue.push("ofs="+W)):W=0:ue.push("ofs="+W);let Ue=!0;for(let Rt=0;Rt<v;Rt++){let ze=j[Rt].g;const Vt=j[Rt].map;if(ze-=W,0>ze)W=Math.max(0,j[Rt].g-100),Ue=!1;else try{ei(Vt,ue,"req"+ze+"_")}catch{b&&b(Vt)}}if(Ue){b=ue.join("&");break e}}}return h=h.i.splice(0,v),y.D=h,b}function Vu(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;ae||k(),he||(ae(),he=!0),Ie.add(y,h),h.v=0}}function jo(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=yt(w(h.Fa,h),qo(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Pu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=yt(w(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),pa(this),Pu(this))};function ws(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Pu(h){h.g=new en(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=hn(h.qa);$e(y,"RID","rpc"),$e(y,"SID",h.K),$e(y,"AID",h.T),$e(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&$e(y,"TO",h.ja),$e(y,"TYPE","xmlhttp"),Ts(h,y),h.m&&h.o&&Ot(y,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=ms(hn(y)),v.m=null,v.P=!0,bi(v,h)}n.Za=function(){this.C!=null&&(this.C=null,pa(this),jo(this),rt(19))};function ya(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function ku(h,y){var v=null;if(h.g==y){ya(h),ws(h),h.g=null;var b=2}else if(Do(h.h,y))v=y.D,tn(h.h,y),b=1;else return;if(h.G!=0){if(y.o)if(b==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var j=h.B;b=lr(),Ye(b,new St(b,v)),ga(h)}else Vu(h);else if(j=y.s,j==3||j==0&&0<y.X||!(b==1&&df(h,y)||b==2&&jo(h)))switch(v&&0<v.length&&(y=h.h,y.i=y.i.concat(v)),j){case 1:Di(h,5);break;case 4:Di(h,10);break;case 3:Di(h,6);break;default:Di(h,2)}}}function qo(h,y){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*y}function Di(h,y){if(h.j.info("Error code "+y),y==2){var v=w(h.fb,h),b=h.Xa;const j=!b;b=new _t(b||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ds(b,"https"),ms(b),j?gs(b.toString(),v):zn(b.toString(),v)}else rt(2);h.G=0,h.l&&h.l.sa(y),Lu(h),Mu(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function Lu(h){if(h.G=0,h.ka=[],h.l){const y=Mo(h.h);(y.length!=0||h.i.length!=0)&&(N(h.ka,y),N(h.ka,h.i),h.h.i.length=0,M(h.i),h.i.length=0),h.l.ra()}}function Uu(h,y,v){var b=v instanceof _t?hn(v):new _t(v);if(b.g!="")y&&(b.g=y+"."+b.g),dr(b,b.s);else{var j=d.location;b=j.protocol,y=y?y+"."+j.hostname:j.hostname,j=+j.port;var W=new _t(null);b&&ds(W,b),y&&(W.g=y),j&&dr(W,j),v&&(W.l=v),b=W}return v=h.D,y=h.ya,v&&y&&$e(b,v,y),$e(b,"VER",h.la),Ts(h,b),b}function zu(h,y,v){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new He(new mr({eb:v})):new He(h.pa),y.Ha(h.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bu(){}n=Bu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function _a(){}_a.prototype.g=function(h,y){return new nn(h,y)};function nn(h,y){ut.call(this),this.g=new ma(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!X(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!X(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new ri(this)}C(nn,ut),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){zo(this.g)},nn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=Ln(h),h=v);y.i.push(new Cu(y.Ya++,h)),y.G==3&&ga(y)},nn.prototype.N=function(){this.g.l=null,delete this.j,zo(this.g),delete this.g,nn.aa.N.call(this)};function ju(h){wi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}C(ju,wi);function qu(){Co.call(this),this.status=1}C(qu,Co);function ri(h){this.g=h}C(ri,Bu),ri.prototype.ua=function(){Ye(this.g,"a")},ri.prototype.ta=function(h){Ye(this.g,new ju(h))},ri.prototype.sa=function(h){Ye(this.g,new qu)},ri.prototype.ra=function(){Ye(this.g,"b")},_a.prototype.createWebChannel=_a.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,KE=function(){return new _a},QE=function(){return lr()},YE=$n,jm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hr.NO_ERROR=0,hr.TIMEOUT=8,hr.HTTP_ERROR=6,nh=hr,Ai.COMPLETE="complete",GE=Ai,Ro.EventType=Ti,Ti.OPEN="a",Ti.CLOSE="b",Ti.ERROR="c",Ti.MESSAGE="d",ut.prototype.listen=ut.prototype.K,Pl=Ro,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,HE=He}).apply(typeof Gc<"u"?Gc:typeof self<"u"?self:typeof window<"u"?window:{});const fv="@firebase/firestore",dv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new pp("@firebase/firestore");function Qa(){return $s.logLevel}function de(n,...e){if($s.logLevel<=Ve.DEBUG){const t=e.map(Ip);$s.debug(`Firestore (${go}): ${n}`,...t)}}function er(n,...e){if($s.logLevel<=Ve.ERROR){const t=e.map(Ip);$s.error(`Firestore (${go}): ${n}`,...t)}}function io(n,...e){if($s.logLevel<=Ve.WARN){const t=e.map(Ip);$s.warn(`Firestore (${go}): ${n}`,...t)}}function Ip(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,$E(n,s,t)}function $E(n,e,t){let s=`FIRESTORE (${go}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw er(s),new Error(s)}function Ge(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||$E(e,o,s)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends ir{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Wt.UNAUTHENTICATED)))}shutdown(){}}class QI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class KI{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ge(this.o===void 0,42304);let s=this.i;const o=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let u=new Fs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Fs,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const m=u;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},d=m=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Fs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ge(typeof s.accessToken=="string",31837,{l:s}),new XE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class $I{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XI{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new $I(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class mv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ge(this.o===void 0,3512);const s=u=>{u.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,de("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new mv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ge(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new mv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=ZI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<t&&(s+=e.charAt(o[u]%62))}return s}}function Pe(n,e){return n<e?-1:n>e?1:0}function qm(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),u=e.charAt(s);if(o!==u)return Em(o)===Em(u)?Pe(o,u):Em(o)?1:-1}return Pe(n.length,e.length)}const JI=55296,ex=57343;function Em(n){const e=n.charCodeAt(0);return e>=JI&&e<=ex}function ro(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="__name__";class hi{constructor(e,t,s){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&we(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return hi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const u=hi.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return Pe(e.length,t.length)}static compareSegments(e,t){const s=hi.isNumericId(e),o=hi.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?hi.extractNumericId(e).compare(hi.extractNumericId(t)):qm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hr.fromString(e.substring(4,e.length-2))}}class nt extends hi{construct(e,t,s){return new nt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new fe(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new nt(t)}static emptyPath(){return new nt([])}}const tx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gt extends hi{construct(e,t,s){return new Gt(e,t,s)}static isValidIdentifier(e){return tx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===pv}static keyField(){return new Gt([pv])}static fromServerFormat(e){const t=[];let s="",o=0;const u=()=>{if(s.length===0)throw new fe(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new fe(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new fe(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(s+=d,o++):(u(),o++)}if(u(),c)throw new fe(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gt(t)}static emptyPath(){return new Gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(nt.fromString(e))}static fromName(e){return new ye(nt.fromString(e).popFirst(5))}static empty(){return new ye(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(n,e,t){if(!t)throw new fe(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nx(n,e,t,s){if(e===!0&&s===!0)throw new fe(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gv(n){if(!ye.isDocumentKey(n))throw new fe(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yv(n){if(ye.isDocumentKey(n))throw new fe(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ZE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Lh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function di(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Lh(n);throw new fe(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(n,e){const t={typeString:n};return e&&(t.value=e),t}function du(n,e){if(!ZE(n))throw new fe(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){t=`Expected '${s}' field to equal '${u.value}'`;break}}if(t)throw new fe(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=-62135596800,vv=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*vv);return new it(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_v)throw new fe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vv}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(du(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_v;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:bt("string",it._jsonSchemaVersion),seconds:bt("number"),nanoseconds:bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new it(0,0))}static max(){return new Se(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=-1;function ix(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(s===1e9?new it(t+1,0):new it(t,s));return new Qr(o,ye.empty(),e)}function rx(n){return new Qr(n.readTime,n.key,Xl)}class Qr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Qr(Se.min(),ye.empty(),Xl)}static max(){return new Qr(Se.max(),ye.empty(),Xl)}}function sx(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:Pe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ox{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==ax)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,s)=>{t(e)}))}static reject(e){return new ne(((t,s)=>{s(e)}))}static waitFor(e){return new ne(((t,s)=>{let o=0,u=0,c=!1;e.forEach((d=>{++o,d.next((()=>{++u,c&&u===o&&t()}),(m=>s(m)))})),c=!0,u===o&&t()}))}static or(e){let t=ne.resolve(!1);for(const s of e)t=t.next((o=>o?ne.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,u)=>{s.push(t.call(this,o,u))})),this.waitFor(s)}static mapArray(e,t){return new ne(((s,o)=>{const u=e.length,c=new Array(u);let d=0;for(let m=0;m<u;m++){const g=m;t(e[g]).next((_=>{c[g]=_,++d,d===u&&s(c)}),(_=>o(_)))}}))}static doWhile(e,t){return new ne(((s,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):s()};u()}))}}function lx(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function _o(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Uh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np=-1;function zh(n){return n==null}function Eh(n){return n===0&&1/n==-1/0}function ux(n){return typeof n=="number"&&Number.isInteger(n)&&!Eh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="";function cx(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ev(e)),e=hx(n.get(t),e);return Ev(e)}function hx(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const u=n.charAt(o);switch(u){case"\0":t+="";break;case JE:t+="";break;default:t+=u}}return t}function Ev(n){return n+JE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Jr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,t){this.comparator=e,this.root=t||Ht.EMPTY}insert(e,t){return new lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yc(this.root,e,this.comparator,!0)}}class Yc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?s(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,t,s,o,u){this.key=e,this.value=t,this.color=s??Ht.RED,this.left=o??Ht.EMPTY,this.right=u??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,u){return new Ht(e??this.key,t??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,s),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ht.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,s,o,u){return this}insert(e,t,s){return new Ht(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wv(this.data.getIterator())}getIteratorFrom(e){return new wv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Nt(this.comparator);return t.data=e,t}}class wv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new En([])}unionWith(e){let t=new Nt(Gt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new En(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ro(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new tT("Invalid base64 string: "+u):u}})(e);return new Yt(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(e);return new Yt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const fx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(n){if(Ge(!!n,39018),typeof n=="string"){let e=0;const t=fx.exec(n);if(Ge(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:pt(n.seconds),nanos:pt(n.nanos)}}function pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function $r(n){return typeof n=="string"?Yt.fromBase64String(n):Yt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="server_timestamp",iT="__type__",rT="__previous_value__",sT="__local_write_time__";function Dp(n){return(n?.mapValue?.fields||{})[iT]?.stringValue===nT}function Bh(n){const e=n.mapValue.fields[rT];return Dp(e)?Bh(e):e}function Wl(n){const e=Kr(n.mapValue.fields[sT].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,t,s,o,u,c,d,m,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=_}}const Th="(default)";class Zl{constructor(e,t){this.projectId=e,this.database=t||Th}static empty(){return new Zl("","")}get isDefaultDatabase(){return this.database===Th}isEqual(e){return e instanceof Zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="__type__",mx="__max__",Qc={mapValue:{}},oT="__vector__",wh="value";function Xr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Dp(n)?4:gx(n)?9007199254740991:px(n)?10:11:we(28295,{value:n})}function _i(n,e){if(n===e)return!0;const t=Xr(n);if(t!==Xr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wl(n).isEqual(Wl(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=Kr(o.timestampValue),d=Kr(u.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,u){return $r(o.bytesValue).isEqual($r(u.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,u){return pt(o.geoPointValue.latitude)===pt(u.geoPointValue.latitude)&&pt(o.geoPointValue.longitude)===pt(u.geoPointValue.longitude)})(n,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return pt(o.integerValue)===pt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=pt(o.doubleValue),d=pt(u.doubleValue);return c===d?Eh(c)===Eh(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return ro(n.arrayValue.values||[],e.arrayValue.values||[],_i);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},d=u.mapValue.fields||{};if(Tv(c)!==Tv(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!_i(c[m],d[m])))return!1;return!0})(n,e);default:return we(52216,{left:n})}}function Jl(n,e){return(n.values||[]).find((t=>_i(t,e)))!==void 0}function so(n,e){if(n===e)return 0;const t=Xr(n),s=Xr(e);if(t!==s)return Pe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(n.booleanValue,e.booleanValue);case 2:return(function(u,c){const d=pt(u.integerValue||u.doubleValue),m=pt(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return Av(n.timestampValue,e.timestampValue);case 4:return Av(Wl(n),Wl(e));case 5:return qm(n.stringValue,e.stringValue);case 6:return(function(u,c){const d=$r(u),m=$r(c);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(u,c){const d=u.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const _=Pe(d[g],m[g]);if(_!==0)return _}return Pe(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(u,c){const d=Pe(pt(u.latitude),pt(c.latitude));return d!==0?d:Pe(pt(u.longitude),pt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return bv(n.arrayValue,e.arrayValue);case 10:return(function(u,c){const d=u.fields||{},m=c.fields||{},g=d[wh]?.arrayValue,_=m[wh]?.arrayValue,T=Pe(g?.values?.length||0,_?.values?.length||0);return T!==0?T:bv(g,_)})(n.mapValue,e.mapValue);case 11:return(function(u,c){if(u===Qc.mapValue&&c===Qc.mapValue)return 0;if(u===Qc.mapValue)return 1;if(c===Qc.mapValue)return-1;const d=u.fields||{},m=Object.keys(d),g=c.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let T=0;T<m.length&&T<_.length;++T){const w=qm(m[T],_[T]);if(w!==0)return w;const S=so(d[m[T]],g[_[T]]);if(S!==0)return S}return Pe(m.length,_.length)})(n.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function Av(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pe(n,e);const t=Kr(n),s=Kr(e),o=Pe(t.seconds,s.seconds);return o!==0?o:Pe(t.nanos,s.nanos)}function bv(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const u=so(t[o],s[o]);if(u)return u}return Pe(t.length,s.length)}function ao(n){return Fm(n)}function Fm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Kr(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return $r(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ye.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const u of t.values||[])o?o=!1:s+=",",s+=Fm(u);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const c of s)u?u=!1:o+=",",o+=`${c}:${Fm(t.fields[c])}`;return o+"}"})(n.mapValue):we(61005,{value:n})}function ih(n){switch(Xr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bh(n);return e?16+ih(e):16;case 5:return 2*n.stringValue.length;case 6:return $r(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+ih(u)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return Jr(s.fields,((u,c)=>{o+=u.length+ih(c)})),o})(n.mapValue);default:throw we(13486,{value:n})}}function Sv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Hm(n){return!!n&&"integerValue"in n}function Mp(n){return!!n&&"arrayValue"in n}function Rv(n){return!!n&&"nullValue"in n}function Cv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rh(n){return!!n&&"mapValue"in n}function px(n){return(n?.mapValue?.fields||{})[aT]?.stringValue===oT}function jl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Jr(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=jl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jl(n.arrayValue.values[t]);return e}return{...n}}function gx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===mx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!rh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jl(t)}setAll(e){let t=Gt.emptyPath(),s={},o=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,s,o),s={},o=[],t=d.popLast()}c?s[d.lastSegment()]=jl(c):o.push(d.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,s,o)}delete(e){const t=this.field(e.popLast());rh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _i(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];rh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Jr(t,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new un(jl(this.value))}}function lT(n){const e=[];return Jr(n.fields,((t,s)=>{const o=new Gt([t]);if(rh(s)){const u=lT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)})),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,t,s,o,u,c,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=u,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Zt(e,0,Se.min(),Se.min(),Se.min(),un.empty(),0)}static newFoundDocument(e,t,s,o){return new Zt(e,1,t,Se.min(),s,o,0)}static newNoDocument(e,t){return new Zt(e,2,t,Se.min(),Se.min(),un.empty(),0)}static newUnknownDocument(e,t){return new Zt(e,3,t,Se.min(),Se.min(),un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,t){this.position=e,this.inclusive=t}}function Iv(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const u=e[o],c=n.position[o];if(u.field.isKeyField()?s=ye.comparator(ye.fromName(c.referenceValue),t.key):s=so(c,t.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function xv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!_i(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t="asc"){this.field=e,this.dir=t}}function yx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{}class At extends uT{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new vx(e,t,s):t==="array-contains"?new wx(e,s):t==="in"?new Ax(e,s):t==="not-in"?new bx(e,s):t==="array-contains-any"?new Sx(e,s):new At(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new Ex(e,s):new Tx(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(so(t,this.value)):t!==null&&Xr(this.value)===Xr(t)&&this.matchesComparison(so(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends uT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Yn(e,t)}matches(e){return cT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cT(n){return n.op==="and"}function hT(n){return _x(n)&&cT(n)}function _x(n){for(const e of n.filters)if(e instanceof Yn)return!1;return!0}function Gm(n){if(n instanceof At)return n.field.canonicalString()+n.op.toString()+ao(n.value);if(hT(n))return n.filters.map((e=>Gm(e))).join(",");{const e=n.filters.map((t=>Gm(t))).join(",");return`${n.op}(${e})`}}function fT(n,e){return n instanceof At?(function(s,o){return o instanceof At&&s.op===o.op&&s.field.isEqual(o.field)&&_i(s.value,o.value)})(n,e):n instanceof Yn?(function(s,o){return o instanceof Yn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,c,d)=>u&&fT(c,o.filters[d])),!0):!1})(n,e):void we(19439)}function dT(n){return n instanceof At?(function(t){return`${t.field.canonicalString()} ${t.op} ${ao(t.value)}`})(n):n instanceof Yn?(function(t){return t.op.toString()+" {"+t.getFilters().map(dT).join(" ,")+"}"})(n):"Filter"}class vx extends At{constructor(e,t,s){super(e,t,s),this.key=ye.fromName(s.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ex extends At{constructor(e,t){super(e,"in",t),this.keys=mT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Tx extends At{constructor(e,t){super(e,"not-in",t),this.keys=mT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function mT(n,e){return(e.arrayValue?.values||[]).map((t=>ye.fromName(t.referenceValue)))}class wx extends At{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mp(t)&&Jl(t.arrayValue,this.value)}}class Ax extends At{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Jl(this.value.arrayValue,t)}}class bx extends At{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Jl(this.value.arrayValue,t)}}class Sx extends At{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Jl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,t=null,s=[],o=[],u=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=c,this.endAt=d,this.Te=null}}function Nv(n,e=null,t=[],s=[],o=null,u=null,c=null){return new Rx(n,e,t,s,o,u,c)}function Op(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Gm(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),zh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>ao(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>ao(s))).join(",")),e.Te=t}return e.Te}function Vp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yx(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!fT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xv(n.startAt,e.startAt)&&xv(n.endAt,e.endAt)}function Ym(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,t=null,s=[],o=[],u=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Cx(n,e,t,s,o,u,c,d){return new vo(n,e,t,s,o,u,c,d)}function Pp(n){return new vo(n)}function Dv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pT(n){return n.collectionGroup!==null}function ql(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Nt(Gt.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new eu(u,s))})),t.has(Gt.keyField().canonicalString())||e.Ie.push(new eu(Gt.keyField(),s))}return e.Ie}function mi(n){const e=Re(n);return e.Ee||(e.Ee=Ix(e,ql(n))),e.Ee}function Ix(n,e){if(n.limitType==="F")return Nv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new eu(o.field,u)}));const t=n.endAt?new Ah(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Ah(n.startAt.position,n.startAt.inclusive):null;return Nv(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Qm(n,e){const t=n.filters.concat([e]);return new vo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Km(n,e,t){return new vo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jh(n,e){return Vp(mi(n),mi(e))&&n.limitType===e.limitType}function gT(n){return`${Op(mi(n))}|lt:${n.limitType}`}function Ka(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>dT(o))).join(", ")}]`),zh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>ao(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>ao(o))).join(",")),`Target(${s})`})(mi(n))}; limitType=${n.limitType})`}function qh(n,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ye.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(n,e)&&(function(s,o){for(const u of ql(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,d,m){const g=Iv(c,d,m);return c.inclusive?g<=0:g<0})(s.startAt,ql(s),o)||s.endAt&&!(function(c,d,m){const g=Iv(c,d,m);return c.inclusive?g>=0:g>0})(s.endAt,ql(s),o))})(n,e)}function xx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function yT(n){return(e,t)=>{let s=!1;for(const o of ql(n)){const u=Nx(o,e,t);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function Nx(n,e,t){const s=n.field.isKeyField()?ye.comparator(e.key,t.key):(function(u,c,d){const m=c.data.field(u),g=d.data.field(u);return m!==null&&g!==null?so(m,g):we(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return we(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Jr(this.inner,((t,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return eT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=new lt(ye.comparator);function tr(){return Dx}const _T=new lt(ye.comparator);function kl(...n){let e=_T;for(const t of n)e=e.insert(t.key,t);return e}function vT(n){let e=_T;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function js(){return Fl()}function ET(){return Fl()}function Fl(){return new Zs((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Mx=new lt(ye.comparator),Ox=new Nt(ye.comparator);function ke(...n){let e=Ox;for(const t of n)e=e.add(t);return e}const Vx=new Nt(Pe);function Px(){return Vx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eh(e)?"-0":e}}function TT(n){return{integerValue:""+n}}function kx(n,e){return ux(e)?TT(e):kp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(){this._=void 0}}function Lx(n,e,t){return n instanceof tu?(function(o,u){const c={fields:{[iT]:{stringValue:nT},[sT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Dp(u)&&(u=Bh(u)),u&&(c.fields[rT]=u),{mapValue:c}})(t,e):n instanceof nu?AT(n,e):n instanceof iu?bT(n,e):(function(o,u){const c=wT(o,u),d=Mv(c)+Mv(o.Ae);return Hm(c)&&Hm(o.Ae)?TT(d):kp(o.serializer,d)})(n,e)}function Ux(n,e,t){return n instanceof nu?AT(n,e):n instanceof iu?bT(n,e):t}function wT(n,e){return n instanceof bh?(function(s){return Hm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class tu extends Fh{}class nu extends Fh{constructor(e){super(),this.elements=e}}function AT(n,e){const t=ST(e);for(const s of n.elements)t.some((o=>_i(o,s)))||t.push(s);return{arrayValue:{values:t}}}class iu extends Fh{constructor(e){super(),this.elements=e}}function bT(n,e){let t=ST(e);for(const s of n.elements)t=t.filter((o=>!_i(o,s)));return{arrayValue:{values:t}}}class bh extends Fh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Mv(n){return pt(n.integerValue||n.doubleValue)}function ST(n){return Mp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,t){this.field=e,this.transform=t}}function Bx(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof nu&&o instanceof nu||s instanceof iu&&o instanceof iu?ro(s.elements,o.elements,_i):s instanceof bh&&o instanceof bh?_i(s.Ae,o.Ae):s instanceof tu&&o instanceof tu})(n.transform,e.transform)}class jx{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Hh{}function RT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Lp(n.key,Pn.none()):new mu(n.key,n.data,Pn.none());{const t=n.data,s=un.empty();let o=new Nt(Gt.comparator);for(let u of e.fields)if(!o.has(u)){let c=t.field(u);c===null&&u.length>1&&(u=u.popLast(),c=t.field(u)),c===null?s.delete(u):s.set(u,c),o=o.add(u)}return new es(n.key,s,new En(o.toArray()),Pn.none())}}function qx(n,e,t){n instanceof mu?(function(o,u,c){const d=o.value.clone(),m=Vv(o.fieldTransforms,u,c.transformResults);d.setAll(m),u.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof es?(function(o,u,c){if(!sh(o.precondition,u))return void u.convertToUnknownDocument(c.version);const d=Vv(o.fieldTransforms,u,c.transformResults),m=u.data;m.setAll(CT(o)),m.setAll(d),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Hl(n,e,t,s){return n instanceof mu?(function(u,c,d,m){if(!sh(u.precondition,c))return d;const g=u.value.clone(),_=Pv(u.fieldTransforms,m,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,s):n instanceof es?(function(u,c,d,m){if(!sh(u.precondition,c))return d;const g=Pv(u.fieldTransforms,m,c),_=c.data;return _.setAll(CT(u)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(n,e,t,s):(function(u,c,d){return sh(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function Fx(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),u=wT(s.transform,o||null);u!=null&&(t===null&&(t=un.empty()),t.set(s.field,u))}return t||null}function Ov(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&ro(s,o,((u,c)=>Bx(u,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class mu extends Hh{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class es extends Hh{constructor(e,t,s,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function CT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function Vv(n,e,t){const s=new Map;Ge(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const u=n[o],c=u.transform,d=e.data.field(u.field);s.set(u.field,Ux(c,d,t[o]))}return s}function Pv(n,e,t){const s=new Map;for(const o of n){const u=o.transform,c=t.data.field(o.field);s.set(o.field,Lx(u,c,e))}return s}class Lp extends Hh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hx extends Hh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&qx(u,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Hl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Hl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=ET();return this.mutations.forEach((o=>{const u=e.get(o.key),c=u.overlayedDocument;let d=this.applyToLocalView(c,u.mutatedFields);d=t.has(o.key)?null:d;const m=RT(c,d);m!==null&&s.set(o.key,m),c.isValidDocument()||c.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ke())}isEqual(e){return this.batchId===e.batchId&&ro(this.mutations,e.mutations,((t,s)=>Ov(t,s)))&&ro(this.baseMutations,e.baseMutations,((t,s)=>Ov(t,s)))}}class Up{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Ge(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return Mx})();const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,s[c].version);return new Up(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,je;function Kx(n){switch(n){case ee.OK:return we(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function IT(n){if(n===void 0)return er("GRPC error has no .code"),ee.UNKNOWN;switch(n){case Tt.OK:return ee.OK;case Tt.CANCELLED:return ee.CANCELLED;case Tt.UNKNOWN:return ee.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return ee.INTERNAL;case Tt.UNAVAILABLE:return ee.UNAVAILABLE;case Tt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Tt.NOT_FOUND:return ee.NOT_FOUND;case Tt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Tt.ABORTED:return ee.ABORTED;case Tt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Tt.DATA_LOSS:return ee.DATA_LOSS;default:return we(39323,{code:n})}}(je=Tt||(Tt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=new Hr([4294967295,4294967295],0);function kv(n){const e=$x().encode(n),t=new FE;return t.update(e),new Uint8Array(t.digest())}function Lv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Hr([t,s],0),new Hr([o,u],0)]}class zp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ll(`Invalid padding: ${t}`);if(s<0)throw new Ll(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ll(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ll(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Hr.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Hr.fromNumber(s)));return o.compare(Xx)===1&&(o=new Hr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=kv(e),[s,o]=Lv(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,o,u);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new zp(u,o,t);return s.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=kv(e),[s,o]=Lv(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,o,u);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ll extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,t,s,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,pu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Gh(Se.min(),o,new lt(Pe),tr(),ke())}}class pu{constructor(e,t,s,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new pu(s,t,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class xT{constructor(e,t){this.targetId=e,this.Ce=t}}class NT{constructor(e,t,s=Yt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Uv{constructor(){this.ve=0,this.Fe=zv(),this.Me=Yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),t=ke(),s=ke();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:we(38017,{changeType:u})}})),new pu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=zv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Wx{constructor(e){this.Ge=e,this.ze=new Map,this.je=tr(),this.Je=Kc(),this.He=Kc(),this.Ye=new lt(Pe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(Ym(u))if(s===0){const c=new ye(u.path);this.et(t,c,Zt.newNoDocument(c,Se.min()))}else Ge(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=t;let c,d;try{c=$r(s).toUint8Array()}catch(m){if(m instanceof tT)return io("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new zp(c,o,u)}catch(m){return io(m instanceof Ll?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((u=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(d)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,c)=>{const d=this.ot(c);if(d){if(u.current&&Ym(d.target)){const m=new ye(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,Zt.newNoDocument(m,e))}u.Be&&(t.set(c,u.ke()),u.qe())}}));let s=ke();this.He.forEach(((u,c)=>{let d=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(e)));const o=new Gh(e,t,this.Ye,this.je,s);return this.je=tr(),this.Je=Kc(),this.He=Kc(),this.Ye=new lt(Pe),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Uv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Nt(Pe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Nt(Pe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Uv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Kc(){return new lt(ye.comparator)}function zv(){return new lt(ye.comparator)}const Zx={asc:"ASCENDING",desc:"DESCENDING"},Jx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},e3={and:"AND",or:"OR"};class t3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $m(n,e){return n.useProto3Json||zh(e)?e:{value:e}}function Sh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function n3(n,e){return Sh(n,e.toTimestamp())}function pi(n){return Ge(!!n,49232),Se.fromTimestamp((function(t){const s=Kr(t);return new it(s.seconds,s.nanos)})(n))}function Bp(n,e){return Xm(n,e).canonicalString()}function Xm(n,e){const t=(function(o){return new nt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function MT(n){const e=nt.fromString(n);return Ge(LT(e),10190,{key:e.toString()}),e}function Wm(n,e){return Bp(n.databaseId,e.path)}function Tm(n,e){const t=MT(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(VT(t))}function OT(n,e){return Bp(n.databaseId,e)}function i3(n){const e=MT(n);return e.length===4?nt.emptyPath():VT(e)}function Zm(n){return new nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function VT(n){return Ge(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Bv(n,e,t){return{name:Wm(n,e),fields:t.value.mapValue.fields}}function r3(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:we(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(g,_){return g.useProto3Json?(Ge(_===void 0||typeof _=="string",58123),Yt.fromBase64String(_||"")):(Ge(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Yt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const _=g.code===void 0?ee.UNKNOWN:IT(g.code);return new fe(_,g.message||"")})(c);t=new NT(s,o,u,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Tm(n,s.document.name),u=pi(s.document.updateTime),c=s.document.createTime?pi(s.document.createTime):Se.min(),d=new un({mapValue:{fields:s.document.fields}}),m=Zt.newFoundDocument(o,u,c,d),g=s.targetIds||[],_=s.removedTargetIds||[];t=new ah(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Tm(n,s.document),u=s.readTime?pi(s.readTime):Se.min(),c=Zt.newNoDocument(o,u),d=s.removedTargetIds||[];t=new ah([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Tm(n,s.document),u=s.removedTargetIds||[];t=new ah([],u,o,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,c=new Qx(o,u),d=s.targetId;t=new xT(d,c)}}return t}function s3(n,e){let t;if(e instanceof mu)t={update:Bv(n,e.key,e.value)};else if(e instanceof Lp)t={delete:Wm(n,e.key)};else if(e instanceof es)t={update:Bv(n,e.key,e.data),updateMask:m3(e.fieldMask)};else{if(!(e instanceof Hx))return we(16599,{Vt:e.type});t={verify:Wm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(u,c){const d=c.transform;if(d instanceof tu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof nu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof iu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof bh)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw we(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:n3(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:we(27497)})(n,e.precondition)),t}function a3(n,e){return n&&n.length>0?(Ge(e!==void 0,14353),n.map((t=>(function(o,u){let c=o.updateTime?pi(o.updateTime):pi(u);return c.isEqual(Se.min())&&(c=pi(u)),new jx(c,o.transformResults||[])})(t,e)))):[]}function o3(n,e){return{documents:[OT(n,e.path)]}}function l3(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=OT(n,o);const u=(function(g){if(g.length!==0)return kT(Yn.create(g,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const c=(function(g){if(g.length!==0)return g.map((_=>(function(w){return{field:$a(w.field),direction:h3(w.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=$m(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:o}}function u3(n){let e=i3(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Ge(s===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];t.where&&(u=(function(T){const w=PT(T);return w instanceof Yn&&hT(w)?w.getFilters():[w]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((w=>(function(C){return new eu(Xa(C.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(w)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let w;return w=typeof T=="object"?T.value:T,zh(w)?null:w})(t.limit));let m=null;t.startAt&&(m=(function(T){const w=!!T.before,S=T.values||[];return new Ah(S,w)})(t.startAt));let g=null;return t.endAt&&(g=(function(T){const w=!T.before,S=T.values||[];return new Ah(S,w)})(t.endAt)),Cx(e,o,c,u,d,"F",m,g)}function c3(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function PT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Xa(t.unaryFilter.field);return At.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Xa(t.unaryFilter.field);return At.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Xa(t.unaryFilter.field);return At.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Xa(t.unaryFilter.field);return At.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(n):n.fieldFilter!==void 0?(function(t){return At.create(Xa(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Yn.create(t.compositeFilter.filters.map((s=>PT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(n):we(30097,{filter:n})}function h3(n){return Zx[n]}function f3(n){return Jx[n]}function d3(n){return e3[n]}function $a(n){return{fieldPath:n.canonicalString()}}function Xa(n){return Gt.fromServerFormat(n.fieldPath)}function kT(n){return n instanceof At?(function(t){if(t.op==="=="){if(Cv(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NAN"}};if(Rv(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Cv(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NOT_NAN"}};if(Rv(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(t.field),op:f3(t.op),value:t.value}}})(n):n instanceof Yn?(function(t){const s=t.getFilters().map((o=>kT(o)));return s.length===1?s[0]:{compositeFilter:{op:d3(t.op),filters:s}}})(n):we(54877,{filter:n})}function m3(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function LT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,t,s,o,u=Se.min(),c=Se.min(),d=Yt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e){this.yt=e}}function g3(n){const e=u3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Km(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(){this.Cn=new _3}addToCollectionParentIndex(e,t){return this.Cn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Qr.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Qr.min())}updateCollectionGroup(e,t,s){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class _3{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Nt(nt.comparator),u=!o.has(s);return this.index[t]=o.add(s),u}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Nt(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UT=41943040;class ln{static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(UT,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new oo(0)}static cr(){return new oo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="LruGarbageCollector",v3=1048576;function Fv([n,e],[t,s]){const o=Pe(n,t);return o===0?Pe(e,s):o}class E3{constructor(e){this.Ir=e,this.buffer=new Nt(Fv),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Fv(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class T3{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(qv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){_o(t)?de(qv,"Ignoring IndexedDB error during garbage collection: ",t):await yo(t)}await this.Vr(3e5)}))}}class w3{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(Uh.ce);const s=new E3(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(jv)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jv):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,u,c,d,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,d=Date.now(),this.removeTargets(e,s,t)))).next((T=>(u=T,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(g=Date.now(),Qa()<=Ve.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${u} targets in `+(m-d)+`ms
	Removed ${T} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function A3(n,e){return new w3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(){this.changes=new Zs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ne.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Hl(s.mutation,o,En.empty(),it.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,ke()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=ke()){const o=js();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((u=>{let c=kl();return u.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=js();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,ke())))}populateOverlays(e,t,s){const o=[];return s.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,s,o){let u=tr();const c=Fl(),d=(function(){return Fl()})();return t.forEach(((m,g)=>{const _=s.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof es)?u=u.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),Hl(_.mutation,g,_.mutation.getFieldMask(),it.now())):c.set(g.key,En.empty())})),this.recalculateAndSaveOverlays(e,u).next((m=>(m.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>d.set(g,new S3(_,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=Fl();let o=new lt(((c,d)=>c-d)),u=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let _=s.get(m)||En.empty();_=d.applyToLocalView(g,_),s.set(m,_);const T=(o.get(d.batchId)||ke()).add(m);o=o.insert(d.batchId,T)}))})).next((()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,_=m.value,T=ET();_.forEach((w=>{if(!u.has(w)){const S=RT(t.get(w),s.get(w));S!==null&&T.set(w,S),u=u.add(w)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,T))}return ne.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return ye.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-u.size):ne.resolve(js());let d=Xl,m=u;return c.next((g=>ne.forEach(g,((_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),u.get(_)?ne.resolve():this.remoteDocumentCache.getEntry(e,_).next((w=>{m=m.insert(_,w)}))))).next((()=>this.populateOverlays(e,g,u))).next((()=>this.computeViews(e,m,g,ke()))).next((_=>({batchId:d,changes:vT(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((s=>{let o=kl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const u=t.collectionGroup;let c=kl();return this.indexManager.getCollectionParents(e,u).next((d=>ne.forEach(d,(m=>{const g=(function(T,w){return new vo(w,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,m.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next((_=>{_.forEach(((T,w)=>{c=c.insert(T,w)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u,o)))).next((c=>{u.forEach(((m,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,Zt.newInvalidDocument(_)))}));let d=kl();return c.forEach(((m,g)=>{const _=u.get(m);_!==void 0&&Hl(_.mutation,g,En.empty(),it.now()),qh(t,g)&&(d=d.insert(m,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:pi(o.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:g3(o.bundledQuery),readTime:pi(o.readTime)}})(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(){this.overlays=new lt(ye.comparator),this.qr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const s=js();return ne.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,u)=>{this.St(e,t,u)})),ne.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),ne.resolve()}getOverlaysForCollection(e,t,s){const o=js(),u=t.length+1,c=new ye(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===u&&m.largestBatchId>s&&o.set(m.getKey(),m)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let u=new lt(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let _=u.get(g.largestBatchId);_===null&&(_=js(),u=u.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=js(),m=u.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,_)=>d.set(g,_))),!(d.size()>=o)););return ne.resolve(d)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new Yx(t,s));let u=this.qr.get(t);u===void 0&&(u=ke(),this.qr.set(t,u)),this.qr.set(t,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(){this.Qr=new Nt(Ut.$r),this.Ur=new Nt(Ut.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Ut(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Ut(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new ye(new nt([])),s=new Ut(t,e),o=new Ut(t,e+1),u=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ye(new nt([])),s=new Ut(t,e),o=new Ut(t,e+1);let u=ke();return this.Ur.forEachInRange([s,o],(c=>{u=u.add(c.key)})),u}containsKey(e){const t=new Ut(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ut{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ye.comparator(e.key,t.key)||Pe(e.Yr,t.Yr)}static Kr(e,t){return Pe(e.Yr,t.Yr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Nt(Ut.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Gx(u,t,s,o);this.mutationQueue.push(c);for(const d of o)this.Zr=this.Zr.add(new Ut(d.key,u)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),u=o<0?0:o;return ne.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Np:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ut(t,0),o=new Ut(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(c=>{const d=this.Xr(c.Yr);u.push(d)})),ne.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Nt(Pe);return t.forEach((o=>{const u=new Ut(o,0),c=new Ut(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(d=>{s=s.add(d.Yr)}))})),ne.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let u=s;ye.isDocumentKey(u)||(u=u.child(""));const c=new Ut(new ye(u),0);let d=new Nt(Pe);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(d=d.add(m.Yr)),!0)}),c),ne.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ge(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ne.forEach(t.mutations,(o=>{const u=new Ut(o.key,t.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Ut(t,0),o=this.Zr.firstAfterOrEqual(s);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e){this.ri=e,this.docs=(function(){return new lt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),u=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ne.resolve(s?s.document.mutableCopy():Zt.newInvalidDocument(t))}getEntries(e,t){let s=tr();return t.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Zt.newInvalidDocument(o))})),ne.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let u=tr();const c=t.path,d=new ye(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||sx(rx(_),s)<=0||(o.has(_.key)||qh(t,_))&&(u=u.insert(_.key,_.mutableCopy()))}return ne.resolve(u)}getAllFromCollectionGroup(e,t,s,o){we(9500)}ii(e,t){return ne.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new M3(this)}getSize(e){return ne.resolve(this.size)}}class M3 extends b3{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e){this.persistence=e,this.si=new Zs((t=>Op(t)),Vp),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new jp,this.targetCount=0,this.ai=oo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new oo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Pr(t),ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,s){let o=0;const u=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),ne.waitFor(u).next((()=>o))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ne.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ne.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((c=>{u.push(o.markPotentiallyOrphaned(e,c))})),ne.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ne.resolve(s)}containsKey(e,t){return ne.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,t){this.ui={},this.overlays={},this.ci=new Uh(0),this.li=!1,this.li=!0,this.hi=new x3,this.referenceDelegate=e(this),this.Pi=new O3(this),this.indexManager=new y3,this.remoteDocumentCache=(function(o){return new D3(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new p3(t),this.Ii=new C3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new I3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new N3(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){de("MemoryPersistence","Starting transaction:",e);const o=new V3(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return ne.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class V3 extends ox{constructor(e){super(),this.currentSequenceNumber=e}}class qp{constructor(e){this.persistence=e,this.Ri=new jp,this.Vi=null}static mi(e){return new qp(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ne.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(s=>{const o=ye.fromPath(s);return this.gi(e,o).next((u=>{u||t.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ne.or([()=>ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Rh{constructor(e,t){this.persistence=e,this.pi=new Zs((s=>cx(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=A3(this,t)}static mi(e,t){return new Rh(e,t)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ne.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?ne.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((d=>{d||(s++,u.removeEntry(c,Se.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ih(e.data.value)),t}br(e,t,s){return ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ne.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=ke(),o=ke();for(const u of t.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Fp(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return uS()?8:lx(Jt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const u={result:null};return this.ys(e,t).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(e,t,o,s).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new P3;return this.Ss(e,t,c).next((d=>{if(u.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>u.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(Qa()<=Ve.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Ka(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(Qa()<=Ve.DEBUG&&de("QueryEngine","Query:",Ka(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Qa()<=Ve.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Ka(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mi(t))):ne.resolve())}ys(e,t){if(Dv(t))return ne.resolve(null);let s=mi(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Km(t,null,"F"),s=mi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const c=ke(...u);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,s).next((m=>{const g=this.Ds(t,d);return this.Cs(t,g,c,m.readTime)?this.ys(e,Km(t,null,"F")):this.vs(e,g,t,m)}))))})))))}ws(e,t,s,o){return Dv(t)||o.isEqual(Se.min())?ne.resolve(null):this.ps.getDocuments(e,s).next((u=>{const c=this.Ds(t,u);return this.Cs(t,c,s,o)?ne.resolve(null):(Qa()<=Ve.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ka(t)),this.vs(e,c,t,ix(o,Xl)).next((d=>d)))}))}Ds(e,t){let s=new Nt(yT(e));return t.forEach(((o,u)=>{qh(e,u)&&(s=s.add(u))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,s){return Qa()<=Ve.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Ka(t)),this.ps.getDocumentsMatchingQuery(e,t,Qr.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(t.forEach((c=>{u=u.insert(c.key,c)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="LocalStore",L3=3e8;class U3{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new lt(Pe),this.xs=new Zs((u=>Op(u)),Vp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new R3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function z3(n,e,t,s){return new U3(n,e,t,s)}async function BT(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((u=>{const c=[],d=[];let m=ke();for(const g of o){c.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of u){d.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(s,m).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function B3(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,g,_){const T=g.batch,w=T.keys();let S=ne.resolve();return w.forEach((C=>{S=S.next((()=>_.getEntry(m,C))).next((M=>{const N=g.docVersions.get(C);Ge(N!==null,48541),M.version.compareTo(N)<0&&(T.applyToRemoteDocument(M,g),M.isValidDocument()&&(M.setReadTime(g.commitVersion),_.addEntry(M)))}))})),S.next((()=>d.mutationQueue.removeMutationBatch(m,T)))})(t,s,e,u).next((()=>u.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let m=ke();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function jT(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function j3(n,e){const t=Re(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((_,T)=>{const w=o.get(T);if(!w)return;d.push(t.Pi.removeMatchingKeys(u,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(u,_.addedDocuments,T))));let S=w.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?S=S.withResumeToken(Yt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):_.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(_.resumeToken,s)),o=o.insert(T,S),(function(M,N,B){return M.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=L3?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(w,S,_)&&d.push(t.Pi.updateTargetData(u,S))}));let m=tr(),g=ke();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(u,_))})),d.push(q3(u,c,e.documentUpdates).next((_=>{m=_.ks,g=_.qs}))),!s.isEqual(Se.min())){const _=t.Pi.getLastRemoteSnapshotVersion(u).next((T=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));d.push(_)}return ne.waitFor(d).next((()=>c.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,m,g))).next((()=>m))})).then((u=>(t.Ms=o,u)))}function q3(n,e,t){let s=ke(),o=ke();return t.forEach((u=>s=s.add(u))),e.getEntries(n,s).next((u=>{let c=tr();return t.forEach(((d,m)=>{const g=u.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(d)),m.isNoDocument()&&m.version.isEqual(Se.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):de(Hp,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)})),{ks:c,qs:o}}))}function F3(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Np),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function H3(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((u=>u?(o=u,ne.resolve(o)):t.Pi.allocateTargetId(s).next((c=>(o=new Br(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Jm(n,e,t){const s=Re(n),o=s.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",u,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!_o(c))throw c;de(Hp,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function Hv(n,e,t){const s=Re(n);let o=Se.min(),u=ke();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,_){const T=Re(m),w=T.xs.get(_);return w!==void 0?ne.resolve(T.Ms.get(w)):T.Pi.getTargetData(g,_)})(s,c,mi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,d.targetId).next((m=>{u=m}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?o:Se.min(),t?u:ke()))).next((d=>(G3(s,xx(e),d),{documents:d,Qs:u})))))}function G3(n,e,t){let s=n.Os.get(e)||Se.min();t.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),n.Os.set(e,s)}class Gv{constructor(){this.activeTargetIds=Px()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Y3{constructor(){this.Mo=new Gv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Gv,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="ConnectivityMonitor";class Qv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(Yv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(Yv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c=null;function ep(){return $c===null?$c=(function(){return 268435456+Math.round(2147483648*Math.random())})():$c++,"0x"+$c.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="RestConnection",K3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Th?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,u){const c=ep(),d=this.zo(e,t.toUriEncodedString());de(wm,`Sending RPC '${e}' ${c}:`,d,s);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,o,u);const{host:g}=new URL(d),_=fo(g);return this.Jo(e,d,m,s,_).then((T=>(de(wm,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw io(wm,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",s),T}))}Ho(e,t,s,o,u,c){return this.Go(e,t,s,o,u)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+go})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const s=K3[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class W3 extends $3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,u){const c=ep();return new Promise(((d,m)=>{const g=new HE;g.setWithCredentials(!0),g.listenOnce(GE.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case nh.NO_ERROR:const T=g.getResponseJson();de(Xt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case nh.TIMEOUT:de(Xt,`RPC '${e}' ${c} timed out`),m(new fe(ee.DEADLINE_EXCEEDED,"Request time out"));break;case nh.HTTP_ERROR:const w=g.getStatus();if(de(Xt,`RPC '${e}' ${c} failed with status:`,w,"response text:",g.getResponseText()),w>0){let S=g.getResponseJson();Array.isArray(S)&&(S=S[0]);const C=S?.error;if(C&&C.status&&C.message){const M=(function(B){const X=B.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(X)>=0?X:ee.UNKNOWN})(C.status);m(new fe(M,C.message))}else m(new fe(ee.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new fe(ee.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{de(Xt,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(o);de(Xt,`RPC '${e}' ${c} sending request:`,o),g.send(t,"POST",_,s,15)}))}T_(e,t,s){const o=ep(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=KE(),d=QE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const _=u.join("");de(Xt,`Creating RPC '${e}' stream ${o}: ${_}`,m);const T=c.createWebChannel(_,m);this.I_(T);let w=!1,S=!1;const C=new X3({Yo:N=>{S?de(Xt,`Not sending because RPC '${e}' stream ${o} is closed:`,N):(w||(de(Xt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),w=!0),de(Xt,`RPC '${e}' stream ${o} sending:`,N),T.send(N))},Zo:()=>T.close()}),M=(N,B,X)=>{N.listen(B,(Q=>{try{X(Q)}catch(se){setTimeout((()=>{throw se}),0)}}))};return M(T,Pl.EventType.OPEN,(()=>{S||(de(Xt,`RPC '${e}' stream ${o} transport opened.`),C.o_())})),M(T,Pl.EventType.CLOSE,(()=>{S||(S=!0,de(Xt,`RPC '${e}' stream ${o} transport closed`),C.a_(),this.E_(T))})),M(T,Pl.EventType.ERROR,(N=>{S||(S=!0,io(Xt,`RPC '${e}' stream ${o} transport errored. Name:`,N.name,"Message:",N.message),C.a_(new fe(ee.UNAVAILABLE,"The operation could not be completed")))})),M(T,Pl.EventType.MESSAGE,(N=>{if(!S){const B=N.data[0];Ge(!!B,16349);const X=B,Q=X?.error||X[0]?.error;if(Q){de(Xt,`RPC '${e}' stream ${o} received error:`,Q);const se=Q.status;let re=(function(R){const I=Tt[R];if(I!==void 0)return IT(I)})(se),oe=Q.message;re===void 0&&(re=ee.INTERNAL,oe="Unknown error status: "+se+" with message "+Q.message),S=!0,C.a_(new fe(re,oe)),T.close()}else de(Xt,`RPC '${e}' stream ${o} received:`,B),C.u_(B)}})),M(d,YE.STAT_EVENT,(N=>{N.stat===jm.PROXY?de(Xt,`RPC '${e}' stream ${o} detected buffering proxy`):N.stat===jm.NOPROXY&&de(Xt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{C.__()}),0),C}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(n){return new t3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,t,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="PersistentStream";class FT{constructor(e,t,s,o,u,c,d,m){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(er(t.toString()),er("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new fe(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(Kv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(de(Kv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Z3 extends FT{constructor(e,t,s,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=r3(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Se.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Se.min():c.readTime?pi(c.readTime):Se.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Zm(this.serializer),t.addTarget=(function(u,c){let d;const m=c.target;if(d=Ym(m)?{documents:o3(u,m)}:{query:l3(u,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=DT(u,c.resumeToken);const g=$m(u,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Se.min())>0){d.readTime=Sh(u,c.snapshotVersion.toTimestamp());const g=$m(u,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const s=c3(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Zm(this.serializer),t.removeTarget=e,this.q_(t)}}class J3 extends FT{constructor(e,t,s,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=a3(e.writeResults,e.commitTime),s=pi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Zm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>s3(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{}class t4 extends e4{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new fe(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(e,Xm(t,s),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(ee.UNKNOWN,u.toString())}))}Ho(e,t,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,Xm(t,s),o,c,d,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new fe(ee.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class n4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(er(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="RemoteStore";class i4{constructor(e,t,s,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Js(this)&&(de(Xs,"Restarting streams for network reachability change."),await(async function(m){const g=Re(m);g.Ea.add(4),await gu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Qh(g)})(this))}))})),this.Ra=new n4(s,o)}}async function Qh(n){if(Js(n))for(const e of n.da)await e(!0)}async function gu(n){for(const e of n.da)await e(!1)}function HT(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Kp(t)?Qp(t):Eo(t).O_()&&Yp(t,e))}function Gp(n,e){const t=Re(n),s=Eo(t);t.Ia.delete(e),s.O_()&&GT(t,e),t.Ia.size===0&&(s.O_()?s.L_():Js(t)&&t.Ra.set("Unknown"))}function Yp(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Eo(n).Y_(e)}function GT(n,e){n.Va.Ue(e),Eo(n).Z_(e)}function Qp(n){n.Va=new Wx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Eo(n).start(),n.Ra.ua()}function Kp(n){return Js(n)&&!Eo(n).x_()&&n.Ia.size>0}function Js(n){return Re(n).Ea.size===0}function YT(n){n.Va=void 0}async function r4(n){n.Ra.set("Online")}async function s4(n){n.Ia.forEach(((e,t)=>{Yp(n,e)}))}async function a4(n,e){YT(n),Kp(n)?(n.Ra.ha(e),Qp(n)):n.Ra.set("Unknown")}async function o4(n,e,t){if(n.Ra.set("Online"),e instanceof NT&&e.state===2&&e.cause)try{await(async function(o,u){const c=u.cause;for(const d of u.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(s){de(Xs,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ch(n,s)}else if(e instanceof ah?n.Va.Ze(e):e instanceof xT?n.Va.st(e):n.Va.tt(e),!t.isEqual(Se.min()))try{const s=await jT(n.localStore);t.compareTo(s)>=0&&await(function(u,c){const d=u.Va.Tt(c);return d.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=u.Ia.get(g);_&&u.Ia.set(g,_.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,g)=>{const _=u.Ia.get(m);if(!_)return;u.Ia.set(m,_.withResumeToken(Yt.EMPTY_BYTE_STRING,_.snapshotVersion)),GT(u,m);const T=new Br(_.target,m,g,_.sequenceNumber);Yp(u,T)})),u.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){de(Xs,"Failed to raise snapshot:",s),await Ch(n,s)}}async function Ch(n,e,t){if(!_o(e))throw e;n.Ea.add(1),await gu(n),n.Ra.set("Offline"),t||(t=()=>jT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{de(Xs,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Qh(n)}))}function QT(n,e){return e().catch((t=>Ch(n,t,e)))}async function Kh(n){const e=Re(n),t=Wr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Np;for(;l4(e);)try{const o=await F3(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,u4(e,o)}catch(o){await Ch(e,o)}KT(e)&&$T(e)}function l4(n){return Js(n)&&n.Ta.length<10}function u4(n,e){n.Ta.push(e);const t=Wr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function KT(n){return Js(n)&&!Wr(n).x_()&&n.Ta.length>0}function $T(n){Wr(n).start()}async function c4(n){Wr(n).ra()}async function h4(n){const e=Wr(n);for(const t of n.Ta)e.ea(t.mutations)}async function f4(n,e,t){const s=n.Ta.shift(),o=Up.from(s,e,t);await QT(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Kh(n)}async function d4(n,e){e&&Wr(n).X_&&await(async function(s,o){if((function(c){return Kx(c)&&c!==ee.ABORTED})(o.code)){const u=s.Ta.shift();Wr(s).B_(),await QT(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Kh(s)}})(n,e),KT(n)&&$T(n)}async function $v(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),de(Xs,"RemoteStore received new credentials");const s=Js(t);t.Ea.add(3),await gu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Qh(t)}async function m4(n,e){const t=Re(n);e?(t.Ea.delete(2),await Qh(t)):e||(t.Ea.add(2),await gu(t),t.Ra.set("Unknown"))}function Eo(n){return n.ma||(n.ma=(function(t,s,o){const u=Re(t);return u.sa(),new Z3(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(n.datastore,n.asyncQueue,{Xo:r4.bind(null,n),t_:s4.bind(null,n),r_:a4.bind(null,n),H_:o4.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Kp(n)?Qp(n):n.Ra.set("Unknown")):(await n.ma.stop(),YT(n))}))),n.ma}function Wr(n){return n.fa||(n.fa=(function(t,s,o){const u=Re(t);return u.sa(),new J3(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:c4.bind(null,n),r_:d4.bind(null,n),ta:h4.bind(null,n),na:f4.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Kh(n)):(await n.fa.stop(),n.Ta.length>0&&(de(Xs,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,t,s,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,u){const c=Date.now()+s,d=new $p(e,t,c,o,u);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xp(n,e){if(er("AsyncQueue",`${e}: ${n}`),_o(n))return new fe(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{static emptySet(e){return new eo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ye.comparator(t.key,s.key):(t,s)=>ye.comparator(t.key,s.key),this.keyedMap=kl(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof eo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new eo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(){this.ga=new lt(ye.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class lo{constructor(e,t,s,o,u,c,d,m,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,o,u){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new lo(e,t,eo.emptySet(t),c,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class g4{constructor(){this.queries=Wv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Re(t),u=o.queries;o.queries=Wv(),u.forEach(((c,d)=>{for(const m of d.Sa)m.onError(s)}))})(this,new fe(ee.ABORTED,"Firestore shutting down"))}}function Wv(){return new Zs((n=>gT(n)),jh)}async function y4(n,e){const t=Re(n);let s=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new p4,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=Xp(c,`Initialization of query '${Ka(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&Wp(t)}async function _4(n,e){const t=Re(n),s=e.query;let o=3;const u=t.queries.get(s);if(u){const c=u.Sa.indexOf(e);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function v4(n,e){const t=Re(n);let s=!1;for(const o of e){const u=o.query,c=t.queries.get(u);if(c){for(const d of c.Sa)d.Fa(o)&&(s=!0);c.wa=o}}s&&Wp(t)}function E4(n,e,t){const s=Re(n),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);s.queries.delete(e)}function Wp(n){n.Ca.forEach((e=>{e.next()}))}var tp,Zv;(Zv=tp||(tp={})).Ma="default",Zv.Cache="cache";class T4{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new lo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==tp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e){this.key=e}}class WT{constructor(e){this.key=e}}class w4{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ke(),this.mutatedKeys=ke(),this.eu=yT(e),this.tu=new eo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Xv,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,T)=>{const w=o.get(_),S=qh(this.query,T)?T:null,C=!!w&&this.mutatedKeys.has(w.key),M=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let N=!1;w&&S?w.data.isEqual(S.data)?C!==M&&(s.track({type:3,doc:S}),N=!0):this.su(w,S)||(s.track({type:2,doc:S}),N=!0,(m&&this.eu(S,m)>0||g&&this.eu(S,g)<0)&&(d=!0)):!w&&S?(s.track({type:0,doc:S}),N=!0):w&&!S&&(s.track({type:1,doc:w}),N=!0,(m||g)&&(d=!0)),N&&(S?(c=c.add(S),u=M?u.add(_):u.delete(_)):(c=c.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),u=u.delete(_.key),s.track({type:1,doc:_})}return{tu:c,iu:s,Cs:d,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,T)=>(function(S,C){const M=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:N})}};return M(S)-M(C)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(s),o=o??!1;const d=t&&!o?this._u():[],m=this.Xa.size===0&&this.current&&!o?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new lo(this.query,e.tu,u,c,e.mutatedKeys,m===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Xv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ke(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new WT(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new XT(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=ke();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return lo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Zp="SyncEngine";class A4{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class b4{constructor(e){this.key=e,this.hu=!1}}class S4{constructor(e,t,s,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Zs((d=>gT(d)),jh),this.Iu=new Map,this.Eu=new Set,this.du=new lt(ye.comparator),this.Au=new Map,this.Ru=new jp,this.Vu={},this.mu=new Map,this.fu=oo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function R4(n,e,t=!0){const s=i2(n);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await ZT(s,e,t,!0),o}async function C4(n,e){const t=i2(n);await ZT(t,e,!0,!1)}async function ZT(n,e,t,s){const o=await H3(n.localStore,mi(e)),u=o.targetId,c=n.sharedClientState.addLocalQueryTarget(u,t);let d;return s&&(d=await I4(n,e,u,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&HT(n.remoteStore,o),d}async function I4(n,e,t,s,o){n.pu=(T,w,S)=>(async function(M,N,B,X){let Q=N.view.ru(B);Q.Cs&&(Q=await Hv(M.localStore,N.query,!1).then((({documents:V})=>N.view.ru(V,Q))));const se=X&&X.targetChanges.get(N.targetId),re=X&&X.targetMismatches.get(N.targetId)!=null,oe=N.view.applyChanges(Q,M.isPrimaryClient,se,re);return e1(M,N.targetId,oe.au),oe.snapshot})(n,T,w,S);const u=await Hv(n.localStore,e,!0),c=new w4(e,u.Qs),d=c.ru(u.documents),m=pu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),g=c.applyChanges(d,n.isPrimaryClient,m);e1(n,t,g.au);const _=new A4(e,t,c);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function x4(n,e,t){const s=Re(n),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((c=>!jh(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Jm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Gp(s.remoteStore,o.targetId),np(s,o.targetId)})).catch(yo)):(np(s,o.targetId),await Jm(s.localStore,o.targetId,!0))}async function N4(n,e){const t=Re(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Gp(t.remoteStore,s.targetId))}async function D4(n,e,t){const s=U4(n);try{const o=await(function(c,d){const m=Re(c),g=it.now(),_=d.reduce(((S,C)=>S.add(C.key)),ke());let T,w;return m.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let C=tr(),M=ke();return m.Ns.getEntries(S,_).next((N=>{C=N,C.forEach(((B,X)=>{X.isValidDocument()||(M=M.add(B))}))})).next((()=>m.localDocuments.getOverlayedDocuments(S,C))).next((N=>{T=N;const B=[];for(const X of d){const Q=Fx(X,T.get(X.key).overlayedDocument);Q!=null&&B.push(new es(X.key,Q,lT(Q.value.mapValue),Pn.exists(!0)))}return m.mutationQueue.addMutationBatch(S,g,B,d)})).next((N=>{w=N;const B=N.applyToLocalDocumentSet(T,M);return m.documentOverlayCache.saveOverlays(S,N.batchId,B)}))})).then((()=>({batchId:w.batchId,changes:vT(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,d,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new lt(Pe)),g=g.insert(d,m),c.Vu[c.currentUser.toKey()]=g})(s,o.batchId,t),await yu(s,o.changes),await Kh(s.remoteStore)}catch(o){const u=Xp(o,"Failed to persist write");t.reject(u)}}async function JT(n,e){const t=Re(n);try{const s=await j3(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const c=t.Au.get(u);c&&(Ge(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Ge(c.hu,14607):o.removedDocuments.size>0&&(Ge(c.hu,42227),c.hu=!1))})),await yu(t,s,e)}catch(s){await yo(s)}}function Jv(n,e,t){const s=Re(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((u,c)=>{const d=c.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(c,d){const m=Re(c);m.onlineState=d;let g=!1;m.queries.forEach(((_,T)=>{for(const w of T.Sa)w.va(d)&&(g=!0)})),g&&Wp(m)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function M4(n,e,t){const s=Re(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),u=o&&o.key;if(u){let c=new lt(ye.comparator);c=c.insert(u,Zt.newNoDocument(u,Se.min()));const d=ke().add(u),m=new Gh(Se.min(),new Map,new lt(Pe),c,d);await JT(s,m),s.du=s.du.remove(u),s.Au.delete(e),Jp(s)}else await Jm(s.localStore,e,!1).then((()=>np(s,e,t))).catch(yo)}async function O4(n,e){const t=Re(n),s=e.batch.batchId;try{const o=await B3(t.localStore,e);t2(t,s,null),e2(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await yu(t,o)}catch(o){await yo(o)}}async function V4(n,e,t){const s=Re(n);try{const o=await(function(c,d){const m=Re(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return m.mutationQueue.lookupMutationBatch(g,d).next((T=>(Ge(T!==null,37113),_=T.keys(),m.mutationQueue.removeMutationBatch(g,T)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>m.localDocuments.getDocuments(g,_)))}))})(s.localStore,e);t2(s,e,t),e2(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await yu(s,o)}catch(o){await yo(o)}}function e2(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function t2(n,e,t){const s=Re(n);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function np(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||n2(n,s)}))}function n2(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Gp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Jp(n))}function e1(n,e,t){for(const s of t)s instanceof XT?(n.Ru.addReference(s.key,e),P4(n,s)):s instanceof WT?(de(Zp,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||n2(n,s.key)):we(19791,{wu:s})}function P4(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(de(Zp,"New document in limbo: "+t),n.Eu.add(s),Jp(n))}function Jp(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ye(nt.fromString(e)),s=n.fu.next();n.Au.set(s,new b4(t)),n.du=n.du.insert(t,s),HT(n.remoteStore,new Br(mi(Pp(t.path)),s,"TargetPurposeLimboResolution",Uh.ce))}}async function yu(n,e,t){const s=Re(n),o=[],u=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,m)=>{c.push(s.pu(m,e,t).then((g=>{if((g||t)&&s.isPrimaryClient){const _=g?!g.fromCache:t?.targetChanges.get(m.targetId)?.current;s.sharedClientState.updateQueryState(m.targetId,_?"current":"not-current")}if(g){o.push(g);const _=Fp.As(m.targetId,g);u.push(_)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(m,g){const _=Re(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ne.forEach(g,(w=>ne.forEach(w.Es,(S=>_.persistence.referenceDelegate.addReference(T,w.targetId,S))).next((()=>ne.forEach(w.ds,(S=>_.persistence.referenceDelegate.removeReference(T,w.targetId,S)))))))))}catch(T){if(!_o(T))throw T;de(Hp,"Failed to update sequence numbers: "+T)}for(const T of g){const w=T.targetId;if(!T.fromCache){const S=_.Ms.get(w),C=S.snapshotVersion,M=S.withLastLimboFreeSnapshotVersion(C);_.Ms=_.Ms.insert(w,M)}}})(s.localStore,u))}async function k4(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){de(Zp,"User change. New user:",e.toKey());const s=await BT(t.localStore,e);t.currentUser=e,(function(u,c){u.mu.forEach((d=>{d.forEach((m=>{m.reject(new fe(ee.CANCELLED,c))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await yu(t,s.Ls)}}function L4(n,e){const t=Re(n),s=t.Au.get(e);if(s&&s.hu)return ke().add(s.key);{let o=ke();const u=t.Iu.get(e);if(!u)return o;for(const c of u){const d=t.Tu.get(c);o=o.unionWith(d.view.nu)}return o}}function i2(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=JT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M4.bind(null,e),e.Pu.H_=v4.bind(null,e.eventManager),e.Pu.yu=E4.bind(null,e.eventManager),e}function U4(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=O4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V4.bind(null,e),e}class Ih{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return z3(this.persistence,new k3,e.initialUser,this.serializer)}Cu(e){return new zT(qp.mi,this.serializer)}Du(e){return new Y3}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ih.provider={build:()=>new Ih};class z4 extends Ih{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ge(this.persistence.referenceDelegate instanceof Rh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new T3(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new zT((s=>Rh.mi(s,t)),this.serializer)}}class ip{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Jv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=k4.bind(null,this.syncEngine),await m4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new g4})()}createDatastore(e){const t=Yh(e.databaseInfo.databaseId),s=(function(u){return new W3(u)})(e.databaseInfo);return(function(u,c,d,m){return new t4(u,c,d,m)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,u,c,d){return new i4(s,o,u,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Jv(this.syncEngine,t,0)),(function(){return Qv.v()?new Qv:new Q3})())}createSyncEngine(e,t){return(function(o,u,c,d,m,g,_){const T=new S4(o,u,c,d,m,g);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Re(t);de(Xs,"RemoteStore shutting down."),s.Ea.add(5),await gu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ip.provider={build:()=>new ip};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):er("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="FirestoreClient";class j4{constructor(e,t,s,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Wt.UNAUTHENTICATED,this.clientId=xp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async c=>{de(Zr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(de(Zr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Xp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function bm(n,e){n.asyncQueue.verifyOperationInProgress(),de(Zr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await BT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function t1(n,e){n.asyncQueue.verifyOperationInProgress();const t=await q4(n);de(Zr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>$v(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>$v(e.remoteStore,o))),n._onlineComponents=e}async function q4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(Zr,"Using user provided OfflineComponentProvider");try{await bm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;io("Error using user provided cache. Falling back to memory cache: "+t),await bm(n,new Ih)}}else de(Zr,"Using default OfflineComponentProvider"),await bm(n,new z4(void 0));return n._offlineComponents}async function r2(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(Zr,"Using user provided OnlineComponentProvider"),await t1(n,n._uninitializedComponentsProvider._online)):(de(Zr,"Using default OnlineComponentProvider"),await t1(n,new ip))),n._onlineComponents}function F4(n){return r2(n).then((e=>e.syncEngine))}async function n1(n){const e=await r2(n),t=e.eventManager;return t.onListen=R4.bind(null,e.syncEngine),t.onUnlisten=x4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=C4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=N4.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="firestore.googleapis.com",r1=!0;class s1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=a2,this.ssl=r1}else this.host=e.host,this.ssl=e.ssl??r1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<v3)throw new fe(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=s2(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new fe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new fe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new fe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $h{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new YI;switch(s.type){case"firstParty":return new XI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new fe(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=i1.get(t);s&&(de("ComponentProvider","Removing Datastore"),i1.delete(t),s.terminate())})(this),Promise.resolve()}}function H4(n,e,t,s={}){n=di(n,$h);const o=fo(e),u=n._getSettings(),c={...u,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(nE(`https://${d}`),iE("Firestore",!0)),u.host!==a2&&u.host!==d&&io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...u,host:d,ssl:o,emulatorOptions:s};if(!Gs(m,c)&&(n._setSettings(m),s.mockUserToken)){let g,_;if(typeof s.mockUserToken=="string")g=s.mockUserToken,_=Wt.MOCK_USER;else{g=eS(s.mockUserToken,n._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new fe(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Wt(T)}n._authCredentials=new QI(new XE(g,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ea(this.firestore,e,this._query)}}class gt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}toJSON(){return{type:gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(du(t,gt._jsonSchema))return new gt(e,s||null,new ye(nt.fromString(t.referencePath)))}}gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:bt("string",gt._jsonSchemaVersion),referencePath:bt("string")};class Gr extends ea{constructor(e,t,s){super(e,t,Pp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new ye(e))}withConverter(e){return new Gr(this.firestore,e,this._path)}}function a1(n,e,...t){if(n=Dt(n),WE("collection","path",e),n instanceof $h){const s=nt.fromString(e,...t);return yv(s),new Gr(n,null,s)}{if(!(n instanceof gt||n instanceof Gr))throw new fe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(nt.fromString(e,...t));return yv(s),new Gr(n.firestore,null,s)}}function xh(n,e,...t){if(n=Dt(n),arguments.length===1&&(e=xp.newId()),WE("doc","path",e),n instanceof $h){const s=nt.fromString(e,...t);return gv(s),new gt(n,null,new ye(s))}{if(!(n instanceof gt||n instanceof Gr))throw new fe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(nt.fromString(e,...t));return gv(s),new gt(n.firestore,n instanceof Gr?n.converter:null,new ye(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="AsyncQueue";class l1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qT(this,"async_queue_retry"),this._c=()=>{const s=Am();s&&de(o1,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Am();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Am();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Fs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!_o(e))throw e;de(o1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,er("INTERNAL UNHANDLED ERROR: ",u1(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=$p.createAndSchedule(this,e,t,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:u1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function u1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(n,["next","error","complete"])}class Ws extends $h{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new l1,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new l1(e),this._firestoreClient=void 0,await e}}}function G4(n,e){const t=typeof n=="object"?n:oE(),s=typeof n=="string"?n:Th,o=yp(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=Zb("firestore");u&&H4(o,...u)}return o}function o2(n){if(n._terminated)throw new fe(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Y4(n),n._firestoreClient}function Y4(n){const e=n._freezeSettings(),t=(function(o,u,c,d){return new dx(o,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,s2(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new j4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vn(Yt.fromBase64String(e))}catch(t){throw new fe(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vn(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(du(e,Vn._jsonSchema))return Vn.fromBase64String(e.bytes)}}Vn._jsonSchemaVersion="firestore/bytes/1.0",Vn._jsonSchema={type:bt("string",Vn._jsonSchemaVersion),bytes:bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gi._jsonSchemaVersion}}static fromJSON(e){if(du(e,gi._jsonSchema))return new gi(e.latitude,e.longitude)}}gi._jsonSchemaVersion="firestore/geoPoint/1.0",gi._jsonSchema={type:bt("string",gi._jsonSchemaVersion),latitude:bt("number"),longitude:bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(du(e,yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new yi(e.vectorValues);throw new fe(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:bt("string",yi._jsonSchemaVersion),vectorValues:bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=/^__.*__$/;class K4{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new es(e,this.data,this.fieldMask,t,this.fieldTransforms):new mu(e,this.data,t,this.fieldTransforms)}}class l2{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new es(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function u2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:n})}}class eg{constructor(e,t,s,o,u,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new eg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Nh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(u2(this.Ac)&&Q4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $4{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Yh(e)}Cc(e,t,s,o=!1){return new eg({Ac:e,methodName:t,Dc:s,path:Gt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zh(n){const e=n._freezeSettings(),t=Yh(n._databaseId);return new $4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function c2(n,e,t,s,o,u={}){const c=n.Cc(u.merge||u.mergeFields?2:0,e,t,o);ng("Data must be an object, but it was:",c,s);const d=h2(s,c);let m,g;if(u.merge)m=new En(c.fieldMask),g=c.fieldTransforms;else if(u.mergeFields){const _=[];for(const T of u.mergeFields){const w=rp(e,T,t);if(!c.contains(w))throw new fe(ee.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);d2(_,w)||_.push(w)}m=new En(_),g=c.fieldTransforms.filter((T=>m.covers(T.field)))}else m=null,g=c.fieldTransforms;return new K4(new un(d),m,g)}class Jh extends Wh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jh}}class tg extends Wh{_toFieldTransform(e){return new zx(e.path,new tu)}isEqual(e){return e instanceof tg}}function X4(n,e,t,s){const o=n.Cc(1,e,t);ng("Data must be an object, but it was:",o,s);const u=[],c=un.empty();Jr(s,((m,g)=>{const _=ig(e,m,t);g=Dt(g);const T=o.yc(_);if(g instanceof Jh)u.push(_);else{const w=_u(g,T);w!=null&&(u.push(_),c.set(_,w))}}));const d=new En(u);return new l2(c,d,o.fieldTransforms)}function W4(n,e,t,s,o,u){const c=n.Cc(1,e,t),d=[rp(e,s,t)],m=[o];if(u.length%2!=0)throw new fe(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<u.length;w+=2)d.push(rp(e,u[w])),m.push(u[w+1]);const g=[],_=un.empty();for(let w=d.length-1;w>=0;--w)if(!d2(g,d[w])){const S=d[w];let C=m[w];C=Dt(C);const M=c.yc(S);if(C instanceof Jh)g.push(S);else{const N=_u(C,M);N!=null&&(g.push(S),_.set(S,N))}}const T=new En(g);return new l2(_,T,c.fieldTransforms)}function Z4(n,e,t,s=!1){return _u(t,n.Cc(s?4:3,e))}function _u(n,e){if(f2(n=Dt(n)))return ng("Unsupported field value:",e,n),h2(n,e);if(n instanceof Wh)return(function(s,o){if(!u2(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let c=0;for(const d of s){let m=_u(d,o.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),u.push(m),c++}return{arrayValue:{values:u}}})(n,e)}return(function(s,o){if((s=Dt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return kx(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=it.fromDate(s);return{timestampValue:Sh(o.serializer,u)}}if(s instanceof it){const u=new it(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Sh(o.serializer,u)}}if(s instanceof gi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Vn)return{bytesValue:DT(o.serializer,s._byteString)};if(s instanceof gt){const u=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Bp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof yi)return(function(c,d){return{mapValue:{fields:{[aT]:{stringValue:oT},[wh]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw d.Sc("VectorValues must only contain numeric values.");return kp(d.serializer,g)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Lh(s)}`)})(n,e)}function h2(n,e){const t={};return eT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jr(n,((s,o)=>{const u=_u(o,e.mc(s));u!=null&&(t[s]=u)})),{mapValue:{fields:t}}}function f2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof it||n instanceof gi||n instanceof Vn||n instanceof gt||n instanceof Wh||n instanceof yi)}function ng(n,e,t){if(!f2(t)||!ZE(t)){const s=Lh(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function rp(n,e,t){if((e=Dt(e))instanceof Xh)return e._internalPath;if(typeof e=="string")return ig(n,e);throw Nh("Field path arguments must be of type string or ",n,!1,void 0,t)}const J4=new RegExp("[~\\*/\\[\\]]");function ig(n,e,t){if(e.search(J4)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xh(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Nh(n,e,t,s,o){const u=s&&!s.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(u||c)&&(m+=" (found",u&&(m+=` in field ${s}`),c&&(m+=` in document ${o}`),m+=")"),new fe(ee.INVALID_ARGUMENT,d+n+m)}function d2(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,t,s,o,u){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ef("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class eN extends m2{data(){return super.data()}}function ef(n,e){return typeof e=="string"?ig(n,e):e instanceof Xh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rg{}class p2 extends rg{}function nN(n,e,...t){let s=[];e instanceof rg&&s.push(e),s=s.concat(t),(function(u){const c=u.filter((m=>m instanceof sg)).length,d=u.filter((m=>m instanceof tf)).length;if(c>1||c>0&&d>0)throw new fe(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)n=o._apply(n);return n}class tf extends p2{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new tf(e,t,s)}_apply(e){const t=this._parse(e);return g2(e._query,t),new ea(e.firestore,e.converter,Qm(e._query,t))}_parse(e){const t=Zh(e.firestore);return(function(u,c,d,m,g,_,T){let w;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new fe(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){f1(T,_);const C=[];for(const M of T)C.push(h1(m,u,M));w={arrayValue:{values:C}}}else w=h1(m,u,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||f1(T,_),w=Z4(d,c,T,_==="in"||_==="not-in");return At.create(g,_,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function iN(n,e,t){const s=e,o=ef("where",n);return tf._create(o,s,t)}class sg extends rg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sg(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Yn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,u){let c=o;const d=u.getFlattenedFilters();for(const m of d)g2(c,m),c=Qm(c,m)})(e._query,t),new ea(e.firestore,e.converter,Qm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ag extends p2{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ag(e,t)}_apply(e){const t=(function(o,u,c){if(o.startAt!==null)throw new fe(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new fe(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new eu(u,c)})(e._query,this._field,this._direction);return new ea(e.firestore,e.converter,(function(o,u){const c=o.explicitOrderBy.concat([u]);return new vo(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function rN(n,e="asc"){const t=e,s=ef("orderBy",n);return ag._create(s,t)}function h1(n,e,t){if(typeof(t=Dt(t))=="string"){if(t==="")throw new fe(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pT(e)&&t.indexOf("/")!==-1)throw new fe(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(nt.fromString(t));if(!ye.isDocumentKey(s))throw new fe(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Sv(n,new ye(s))}if(t instanceof gt)return Sv(n,t._key);throw new fe(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lh(t)}.`)}function f1(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function g2(n,e){const t=(function(o,u){for(const c of o)for(const d of c.getFlattenedFilters())if(u.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new fe(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class sN{convertValue(e,t="none"){switch(Xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Jr(e,((o,u)=>{s[o]=this.convertValue(u,t)})),s}convertVectorValue(e){const t=e.fields?.[wh].arrayValue?.values?.map((s=>pt(s.doubleValue)));return new yi(t)}convertGeoPoint(e){return new gi(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Bh(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Wl(e));default:return null}}convertTimestamp(e){const t=Kr(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=nt.fromString(e);Ge(LT(s),9688,{name:e});const o=new Zl(s.get(1),s.get(3)),u=new ye(s.popFirst(5));return o.isEqual(t)||er(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Ul{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hs extends m2{constructor(e,t,s,o,u,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(ef("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Hs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Hs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hs._jsonSchema={type:bt("string",Hs._jsonSchemaVersion),bundleSource:bt("string","DocumentSnapshot"),bundleName:bt("string"),bundle:bt("string")};class oh extends Hs{data(e={}){return super.data(e)}}class to{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ul(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new oh(this._firestore,this._userDataWriter,s.key,s,new Ul(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((d=>{const m=new oh(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Ul(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>u||d.type!==3)).map((d=>{const m=new oh(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Ul(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:aN(d.type),doc:m,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=to._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}to._jsonSchemaVersion="firestore/querySnapshot/1.0",to._jsonSchema={type:bt("string",to._jsonSchemaVersion),bundleSource:bt("string","QuerySnapshot"),bundleName:bt("string"),bundle:bt("string")};class _2 extends sN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,t)}}function oN(n,e,t){n=di(n,gt);const s=di(n.firestore,Ws),o=y2(n.converter,e);return nf(s,[c2(Zh(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Pn.none())])}function lN(n,e,t,...s){n=di(n,gt);const o=di(n.firestore,Ws),u=Zh(o);let c;return c=typeof(e=Dt(e))=="string"||e instanceof Xh?W4(u,"updateDoc",n._key,e,t,s):X4(u,"updateDoc",n._key,e),nf(o,[c.toMutation(n._key,Pn.exists(!0))])}function uN(n){return nf(di(n.firestore,Ws),[new Lp(n._key,Pn.none())])}function cN(n,e){const t=di(n.firestore,Ws),s=xh(n),o=y2(n.converter,e);return nf(t,[c2(Zh(n.firestore),"addDoc",s._key,o,n.converter!==null,{}).toMutation(s._key,Pn.exists(!1))]).then((()=>s))}function hN(n,...e){n=Dt(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||c1(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(c1(e[s])){const m=e[s];e[s]=m.next?.bind(m),e[s+1]=m.error?.bind(m),e[s+2]=m.complete?.bind(m)}let u,c,d;if(n instanceof gt)c=di(n.firestore,Ws),d=Pp(n._key.path),u={next:m=>{e[s]&&e[s](fN(c,n,m))},error:e[s+1],complete:e[s+2]};else{const m=di(n,ea);c=di(m.firestore,Ws),d=m._query;const g=new _2(c);u={next:_=>{e[s]&&e[s](new to(c,g,m,_))},error:e[s+1],complete:e[s+2]},tN(n._query)}return(function(g,_,T,w){const S=new B4(w),C=new T4(_,S,T);return g.asyncQueue.enqueueAndForget((async()=>y4(await n1(g),C))),()=>{S.Nu(),g.asyncQueue.enqueueAndForget((async()=>_4(await n1(g),C)))}})(o2(c),d,o,u)}function nf(n,e){return(function(s,o){const u=new Fs;return s.asyncQueue.enqueueAndForget((async()=>D4(await F4(s),o,u))),u.promise})(o2(n),e)}function fN(n,e,t){const s=t.docs.get(e._key),o=new _2(n);return new Hs(n,o,e._key,s,new Ul(t.hasPendingWrites,t.fromCache),e.converter)}function Sm(){return new tg("serverTimestamp")}(function(e,t=!0){(function(o){go=o})(mo),no(new Ys("firestore",((s,{instanceIdentifier:o,options:u})=>{const c=s.getProvider("app").getImmediate(),d=new Ws(new KI(s.getProvider("auth-internal")),new WI(c,s.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new fe(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zl(g.options.projectId,_)})(c,o),c);return u={useFetchStreams:t,...u},d._setSettings(u),d}),"PUBLIC").setMultipleInstances(!0)),Fr(fv,dv,e),Fr(fv,dv,"esm2020")})();function dN(n){return au({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(n)}function Gl(n){let e=n[0],t=n[1],s=n[2];return Math.sqrt(e*e+t*t+s*s)}function sp(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}function mN(n,e,t,s){return n[0]=e,n[1]=t,n[2]=s,n}function d1(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function m1(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function pN(n,e,t){return n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n}function gN(n,e,t){return n[0]=e[0]/t[0],n[1]=e[1]/t[1],n[2]=e[2]/t[2],n}function Rm(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n}function yN(n,e){let t=e[0]-n[0],s=e[1]-n[1],o=e[2]-n[2];return Math.sqrt(t*t+s*s+o*o)}function _N(n,e){let t=e[0]-n[0],s=e[1]-n[1],o=e[2]-n[2];return t*t+s*s+o*o}function p1(n){let e=n[0],t=n[1],s=n[2];return e*e+t*t+s*s}function vN(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}function EN(n,e){return n[0]=1/e[0],n[1]=1/e[1],n[2]=1/e[2],n}function ap(n,e){let t=e[0],s=e[1],o=e[2],u=t*t+s*s+o*o;return u>0&&(u=1/Math.sqrt(u)),n[0]=e[0]*u,n[1]=e[1]*u,n[2]=e[2]*u,n}function v2(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function g1(n,e,t){let s=e[0],o=e[1],u=e[2],c=t[0],d=t[1],m=t[2];return n[0]=o*m-u*d,n[1]=u*c-s*m,n[2]=s*d-o*c,n}function TN(n,e,t,s){let o=e[0],u=e[1],c=e[2];return n[0]=o+s*(t[0]-o),n[1]=u+s*(t[1]-u),n[2]=c+s*(t[2]-c),n}function wN(n,e,t,s,o){const u=Math.exp(-s*o);let c=e[0],d=e[1],m=e[2];return n[0]=t[0]+(c-t[0])*u,n[1]=t[1]+(d-t[1])*u,n[2]=t[2]+(m-t[2])*u,n}function AN(n,e,t){let s=e[0],o=e[1],u=e[2],c=t[3]*s+t[7]*o+t[11]*u+t[15];return c=c||1,n[0]=(t[0]*s+t[4]*o+t[8]*u+t[12])/c,n[1]=(t[1]*s+t[5]*o+t[9]*u+t[13])/c,n[2]=(t[2]*s+t[6]*o+t[10]*u+t[14])/c,n}function bN(n,e,t){let s=e[0],o=e[1],u=e[2],c=t[3]*s+t[7]*o+t[11]*u+t[15];return c=c||1,n[0]=(t[0]*s+t[4]*o+t[8]*u)/c,n[1]=(t[1]*s+t[5]*o+t[9]*u)/c,n[2]=(t[2]*s+t[6]*o+t[10]*u)/c,n}function SN(n,e,t){let s=e[0],o=e[1],u=e[2];return n[0]=s*t[0]+o*t[3]+u*t[6],n[1]=s*t[1]+o*t[4]+u*t[7],n[2]=s*t[2]+o*t[5]+u*t[8],n}function RN(n,e,t){let s=e[0],o=e[1],u=e[2],c=t[0],d=t[1],m=t[2],g=t[3],_=d*u-m*o,T=m*s-c*u,w=c*o-d*s,S=d*w-m*T,C=m*_-c*w,M=c*T-d*_,N=g*2;return _*=N,T*=N,w*=N,S*=2,C*=2,M*=2,n[0]=s+_+S,n[1]=o+T+C,n[2]=u+w+M,n}const CN=(function(){const n=[0,0,0],e=[0,0,0];return function(t,s){sp(n,t),sp(e,s),ap(n,n),ap(e,e);let o=v2(n,e);return o>1?0:o<-1?Math.PI:Math.acos(o)}})();function IN(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]}class wt extends Array{constructor(e=0,t=e,s=e){return super(e,t,s),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,t=e,s=e){return e.length?this.copy(e):(mN(this,e,t,s),this)}copy(e){return sp(this,e),this}add(e,t){return t?d1(this,e,t):d1(this,this,e),this}sub(e,t){return t?m1(this,e,t):m1(this,this,e),this}multiply(e){return e.length?pN(this,this,e):Rm(this,this,e),this}divide(e){return e.length?gN(this,this,e):Rm(this,this,1/e),this}inverse(e=this){return EN(this,e),this}len(){return Gl(this)}distance(e){return e?yN(this,e):Gl(this)}squaredLen(){return p1(this)}squaredDistance(e){return e?_N(this,e):p1(this)}negate(e=this){return vN(this,e),this}cross(e,t){return t?g1(this,e,t):g1(this,this,e),this}scale(e){return Rm(this,this,e),this}normalize(){return ap(this,this),this}dot(e){return v2(this,e)}equals(e){return IN(this,e)}applyMatrix3(e){return SN(this,this,e),this}applyMatrix4(e){return AN(this,this,e),this}scaleRotateMatrix4(e){return bN(this,this,e),this}applyQuaternion(e){return RN(this,this,e),this}angle(e){return CN(this,e)}lerp(e,t){return TN(this,this,e,t),this}smoothLerp(e,t,s){return wN(this,this,e,t,s),this}clone(){return new wt(this[0],this[1],this[2])}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}transformDirection(e){const t=this[0],s=this[1],o=this[2];return this[0]=e[0]*t+e[4]*s+e[8]*o,this[1]=e[1]*t+e[5]*s+e[9]*o,this[2]=e[2]*t+e[6]*s+e[10]*o,this.normalize()}}const y1=new wt;let xN=1,NN=1,_1=!1;class E2{constructor(e,t={}){e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=t,this.id=xN++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let s in t)this.addAttribute(s,t[s])}addAttribute(e,t){if(this.attributes[e]=t,t.id=NN++,t.size=t.size||1,t.type=t.type||(t.data.constructor===Float32Array?this.gl.FLOAT:t.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),t.target=e==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,t.normalized=t.normalized||!1,t.stride=t.stride||0,t.offset=t.offset||0,t.count=t.count||(t.stride?t.data.byteLength/t.stride:t.data.length/t.size),t.divisor=t.instanced||0,t.needsUpdate=!1,t.usage=t.usage||this.gl.STATIC_DRAW,t.buffer||this.updateAttribute(t),t.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==t.count*t.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,t.count*t.divisor);this.instancedCount=t.count*t.divisor}else e==="index"?this.drawRange.count=t.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,t.count))}updateAttribute(e){const t=!e.buffer;t&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),t?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((t,{name:s,type:o})=>{if(!this.attributes[s]){console.warn(`active attribute ${s} not being supplied`);return}const u=this.attributes[s];this.gl.bindBuffer(u.target,u.buffer),this.glState.boundBuffer=u.buffer;let c=1;o===35674&&(c=2),o===35675&&(c=3),o===35676&&(c=4);const d=u.size/c,m=c===1?0:c*c*4,g=c===1?0:c*4;for(let _=0;_<c;_++)this.gl.vertexAttribPointer(t+_,d,u.type,u.normalized,u.stride+m,u.offset+_*g),this.gl.enableVertexAttribArray(t+_),this.gl.renderer.vertexAttribDivisor(t+_,u.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:t=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((o,{name:u})=>{const c=this.attributes[u];c.needsUpdate&&this.updateAttribute(c)});let s=2;this.attributes.index?.type===this.gl.UNSIGNED_INT&&(s=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(t,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*s,this.instancedCount):this.gl.renderer.drawArraysInstanced(t,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(t,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*s):this.gl.drawArrays(t,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;if(e.data)return e;if(!_1)return console.warn("No position buffer data found to compute bounds"),_1=!0}computeBoundingBox(e){e||(e=this.getPosition());const t=e.data,s=e.size;this.bounds||(this.bounds={min:new wt,max:new wt,center:new wt,scale:new wt,radius:1/0});const o=this.bounds.min,u=this.bounds.max,c=this.bounds.center,d=this.bounds.scale;o.set(1/0),u.set(-1/0);for(let m=0,g=t.length;m<g;m+=s){const _=t[m],T=t[m+1],w=t[m+2];o.x=Math.min(_,o.x),o.y=Math.min(T,o.y),o.z=Math.min(w,o.z),u.x=Math.max(_,u.x),u.y=Math.max(T,u.y),u.z=Math.max(w,u.z)}d.sub(u,o),c.add(o,u).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const t=e.data,s=e.size;this.bounds||this.computeBoundingBox(e);let o=0;for(let u=0,c=t.length;u<c;u+=s)y1.fromArray(t,u),o=Math.max(o,this.bounds.center.squaredDistance(y1));this.bounds.radius=Math.sqrt(o)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let DN=1;const v1={};class T2{constructor(e,{vertex:t,fragment:s,uniforms:o={},transparent:u=!1,cullFace:c=e.BACK,frontFace:d=e.CCW,depthTest:m=!0,depthWrite:g=!0,depthFunc:_=e.LEQUAL}={}){e.canvas||console.error("gl not passed as first argument to Program"),this.gl=e,this.uniforms=o,this.id=DN++,t||console.warn("vertex shader not supplied"),s||console.warn("fragment shader not supplied"),this.transparent=u,this.cullFace=c,this.frontFace=d,this.depthTest=m,this.depthWrite=g,this.depthFunc=_,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:t,fragment:s})}setShaders({vertex:e,fragment:t}){if(e&&(this.gl.shaderSource(this.vertexShader,e),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${E1(e)}`)),t&&(this.gl.shaderSource(this.fragmentShader,t),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${E1(t)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let s=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let c=0;c<s;c++){let d=this.gl.getActiveUniform(this.program,c);this.uniformLocations.set(d,this.gl.getUniformLocation(this.program,d.name));const m=d.name.match(/(\w+)/g);d.uniformName=m[0],d.nameComponents=m.slice(1)}this.attributeLocations=new Map;const o=[],u=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let c=0;c<u;c++){const d=this.gl.getActiveAttrib(this.program,c),m=this.gl.getAttribLocation(this.program,d.name);m!==-1&&(o[m]=d.name,this.attributeLocations.set(d,m))}this.attributeOrder=o.join("")}setBlendFunc(e,t,s,o){this.blendFunc.src=e,this.blendFunc.dst=t,this.blendFunc.srcAlpha=s,this.blendFunc.dstAlpha=o,e&&(this.transparent=!0)}setBlendEquation(e,t){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=t}setStencilFunc(e,t,s){this.stencilRef=t,this.stencilFunc.func=e,this.stencilFunc.ref=t,this.stencilFunc.mask=s}setStencilOp(e,t,s){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=t,this.stencilOp.depthPass=s}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:e=!1}={}){let t=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((o,u)=>{let c=this.uniforms[u.uniformName];for(const d of u.nameComponents){if(!c)break;if(d in c)c=c[d];else{if(Array.isArray(c.value))break;c=void 0;break}}if(!c)return T1(`Active uniform ${u.name} has not been supplied`);if(c&&c.value===void 0)return T1(`${u.name} uniform is missing a value parameter`);if(c.value.texture)return t=t+1,c.value.update(t),Cm(this.gl,u.type,o,t);if(c.value.length&&c.value[0].texture){const d=[];return c.value.forEach(m=>{t=t+1,m.update(t),d.push(t)}),Cm(this.gl,u.type,o,d)}Cm(this.gl,u.type,o,c.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function Cm(n,e,t,s){s=s.length?MN(s):s;const o=n.renderer.state.uniformLocations.get(t);if(s.length)if(o===void 0||o.length!==s.length)n.renderer.state.uniformLocations.set(t,s.slice(0));else{if(ON(o,s))return;o.set?o.set(s):VN(o,s),n.renderer.state.uniformLocations.set(t,o)}else{if(o===s)return;n.renderer.state.uniformLocations.set(t,s)}switch(e){case 5126:return s.length?n.uniform1fv(t,s):n.uniform1f(t,s);case 35664:return n.uniform2fv(t,s);case 35665:return n.uniform3fv(t,s);case 35666:return n.uniform4fv(t,s);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return s.length?n.uniform1iv(t,s):n.uniform1i(t,s);case 35671:case 35667:return n.uniform2iv(t,s);case 35672:case 35668:return n.uniform3iv(t,s);case 35673:case 35669:return n.uniform4iv(t,s);case 35674:return n.uniformMatrix2fv(t,!1,s);case 35675:return n.uniformMatrix3fv(t,!1,s);case 35676:return n.uniformMatrix4fv(t,!1,s)}}function E1(n){let e=n.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function MN(n){const e=n.length,t=n[0].length;if(t===void 0)return n;const s=e*t;let o=v1[s];o||(v1[s]=o=new Float32Array(s));for(let u=0;u<e;u++)o.set(n[u],u*t);return o}function ON(n,e){if(n.length!==e.length)return!1;for(let t=0,s=n.length;t<s;t++)if(n[t]!==e[t])return!1;return!0}function VN(n,e){for(let t=0,s=n.length;t<s;t++)n[t]=e[t]}let Im=0;function T1(n){Im>100||(console.warn(n),Im++,Im>100&&console.warn("More than 100 program warnings - stopping logs."))}const xm=new wt;let PN=1;class w2{constructor({canvas:e=document.createElement("canvas"),width:t=300,height:s=150,dpr:o=1,alpha:u=!1,depth:c=!0,stencil:d=!1,antialias:m=!1,premultipliedAlpha:g=!1,preserveDrawingBuffer:_=!1,powerPreference:T="default",autoClear:w=!0,webgl:S=2}={}){const C={alpha:u,depth:c,stencil:d,antialias:m,premultipliedAlpha:g,preserveDrawingBuffer:_,powerPreference:T};this.dpr=o,this.alpha=u,this.color=!0,this.depth=c,this.stencil=d,this.premultipliedAlpha=g,this.autoClear=w,this.id=PN++,S===2&&(this.gl=e.getContext("webgl2",C)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",C)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(t,s),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,t){this.width=e,this.height=t,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=t*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:t+"px"})}setViewport(e,t,s=0,o=0){this.state.viewport.width===e&&this.state.viewport.height===t||(this.state.viewport.width=e,this.state.viewport.height=t,this.state.viewport.x=s,this.state.viewport.y=o,this.gl.viewport(s,o,e,t))}setScissor(e,t,s=0,o=0){this.gl.scissor(s,o,e,t)}enable(e){this.state[e]!==!0&&(this.gl.enable(e),this.state[e]=!0)}disable(e){this.state[e]!==!1&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,t,s,o){this.state.blendFunc.src===e&&this.state.blendFunc.dst===t&&this.state.blendFunc.srcAlpha===s&&this.state.blendFunc.dstAlpha===o||(this.state.blendFunc.src=e,this.state.blendFunc.dst=t,this.state.blendFunc.srcAlpha=s,this.state.blendFunc.dstAlpha=o,s!==void 0?this.gl.blendFuncSeparate(e,t,s,o):this.gl.blendFunc(e,t))}setBlendEquation(e,t){e=e||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===t)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=t,t!==void 0?this.gl.blendEquationSeparate(e,t):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,t,s){this.state.stencilFunc===e&&this.state.stencilRef===t&&this.state.stencilFuncMask===s||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=t||0,this.state.stencilFuncMask=s||0,this.gl.stencilFunc(e||this.gl.ALWAYS,t||0,s||0))}setStencilOp(e,t,s){this.state.stencilFail===e&&this.state.stencilDepthFail===t&&this.state.stencilDepthPass===s||(this.state.stencilFail=e,this.state.stencilDepthFail=t,this.state.stencilDepthPass=s,this.gl.stencilOp(e,t,s))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:t=null}={}){this.state.framebuffer!==t&&(this.state.framebuffer=t,this.gl.bindFramebuffer(e,t))}getExtension(e,t,s){return t&&this.gl[t]?this.gl[t].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),t?this.extensions[e]?this.extensions[e][s].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:e.zDepth!==t.zDepth?e.zDepth-t.zDepth:t.id-e.id}sortTransparent(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.zDepth!==t.zDepth?t.zDepth-e.zDepth:t.id-e.id}sortUI(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:t.id-e.id}getRenderList({scene:e,camera:t,frustumCull:s,sort:o}){let u=[];if(t&&s&&t.updateFrustum(),e.traverse(c=>{if(!c.visible)return!0;c.draw&&(s&&c.frustumCulled&&t&&!t.frustumIntersectsMesh(c)||u.push(c))}),o){const c=[],d=[],m=[];u.forEach(g=>{g.program.transparent?g.program.depthTest?d.push(g):m.push(g):c.push(g),g.zDepth=0,!(g.renderOrder!==0||!g.program.depthTest||!t)&&(g.worldMatrix.getTranslation(xm),xm.applyMatrix4(t.projectionViewMatrix),g.zDepth=xm.z)}),c.sort(this.sortOpaque),d.sort(this.sortTransparent),m.sort(this.sortUI),u=c.concat(d,m)}return u}render({scene:e,camera:t,target:s=null,update:o=!0,sort:u=!0,frustumCull:c=!0,clear:d}){s===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(s),this.setViewport(s.width,s.height)),(d||this.autoClear&&d!==!1)&&(this.depth&&(!s||s.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!s||s.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),o&&e.updateMatrixWorld(),t&&t.updateMatrixWorld(),this.getRenderList({scene:e,camera:t,frustumCull:c,sort:u}).forEach(g=>{g.draw({camera:t})})}}function kN(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}function LN(n,e,t,s,o){return n[0]=e,n[1]=t,n[2]=s,n[3]=o,n}function UN(n,e){let t=e[0],s=e[1],o=e[2],u=e[3],c=t*t+s*s+o*o+u*u;return c>0&&(c=1/Math.sqrt(c)),n[0]=t*c,n[1]=s*c,n[2]=o*c,n[3]=u*c,n}function zN(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}function BN(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function jN(n,e,t){t=t*.5;let s=Math.sin(t);return n[0]=s*e[0],n[1]=s*e[1],n[2]=s*e[2],n[3]=Math.cos(t),n}function w1(n,e,t){let s=e[0],o=e[1],u=e[2],c=e[3],d=t[0],m=t[1],g=t[2],_=t[3];return n[0]=s*_+c*d+o*g-u*m,n[1]=o*_+c*m+u*d-s*g,n[2]=u*_+c*g+s*m-o*d,n[3]=c*_-s*d-o*m-u*g,n}function qN(n,e,t){t*=.5;let s=e[0],o=e[1],u=e[2],c=e[3],d=Math.sin(t),m=Math.cos(t);return n[0]=s*m+c*d,n[1]=o*m+u*d,n[2]=u*m-o*d,n[3]=c*m-s*d,n}function FN(n,e,t){t*=.5;let s=e[0],o=e[1],u=e[2],c=e[3],d=Math.sin(t),m=Math.cos(t);return n[0]=s*m-u*d,n[1]=o*m+c*d,n[2]=u*m+s*d,n[3]=c*m-o*d,n}function HN(n,e,t){t*=.5;let s=e[0],o=e[1],u=e[2],c=e[3],d=Math.sin(t),m=Math.cos(t);return n[0]=s*m+o*d,n[1]=o*m-s*d,n[2]=u*m+c*d,n[3]=c*m-u*d,n}function GN(n,e,t,s){let o=e[0],u=e[1],c=e[2],d=e[3],m=t[0],g=t[1],_=t[2],T=t[3],w,S,C,M,N;return S=o*m+u*g+c*_+d*T,S<0&&(S=-S,m=-m,g=-g,_=-_,T=-T),1-S>1e-6?(w=Math.acos(S),C=Math.sin(w),M=Math.sin((1-s)*w)/C,N=Math.sin(s*w)/C):(M=1-s,N=s),n[0]=M*o+N*m,n[1]=M*u+N*g,n[2]=M*c+N*_,n[3]=M*d+N*T,n}function YN(n,e){let t=e[0],s=e[1],o=e[2],u=e[3],c=t*t+s*s+o*o+u*u,d=c?1/c:0;return n[0]=-t*d,n[1]=-s*d,n[2]=-o*d,n[3]=u*d,n}function QN(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3],n}function KN(n,e){let t=e[0]+e[4]+e[8],s;if(t>0)s=Math.sqrt(t+1),n[3]=.5*s,s=.5/s,n[0]=(e[5]-e[7])*s,n[1]=(e[6]-e[2])*s,n[2]=(e[1]-e[3])*s;else{let o=0;e[4]>e[0]&&(o=1),e[8]>e[o*3+o]&&(o=2);let u=(o+1)%3,c=(o+2)%3;s=Math.sqrt(e[o*3+o]-e[u*3+u]-e[c*3+c]+1),n[o]=.5*s,s=.5/s,n[3]=(e[u*3+c]-e[c*3+u])*s,n[u]=(e[u*3+o]+e[o*3+u])*s,n[c]=(e[c*3+o]+e[o*3+c])*s}return n}function $N(n,e,t="YXZ"){let s=Math.sin(e[0]*.5),o=Math.cos(e[0]*.5),u=Math.sin(e[1]*.5),c=Math.cos(e[1]*.5),d=Math.sin(e[2]*.5),m=Math.cos(e[2]*.5);return t==="XYZ"?(n[0]=s*c*m+o*u*d,n[1]=o*u*m-s*c*d,n[2]=o*c*d+s*u*m,n[3]=o*c*m-s*u*d):t==="YXZ"?(n[0]=s*c*m+o*u*d,n[1]=o*u*m-s*c*d,n[2]=o*c*d-s*u*m,n[3]=o*c*m+s*u*d):t==="ZXY"?(n[0]=s*c*m-o*u*d,n[1]=o*u*m+s*c*d,n[2]=o*c*d+s*u*m,n[3]=o*c*m-s*u*d):t==="ZYX"?(n[0]=s*c*m-o*u*d,n[1]=o*u*m+s*c*d,n[2]=o*c*d-s*u*m,n[3]=o*c*m+s*u*d):t==="YZX"?(n[0]=s*c*m+o*u*d,n[1]=o*u*m+s*c*d,n[2]=o*c*d-s*u*m,n[3]=o*c*m-s*u*d):t==="XZY"&&(n[0]=s*c*m-o*u*d,n[1]=o*u*m-s*c*d,n[2]=o*c*d+s*u*m,n[3]=o*c*m+s*u*d),n}const XN=kN,WN=LN,ZN=zN,JN=UN;class eD extends Array{constructor(e=0,t=0,s=0,o=1){super(e,t,s,o),this.onChange=()=>{},this._target=this;const u=["0","1","2","3"];return new Proxy(this,{set(c,d){const m=Reflect.set(...arguments);return m&&u.includes(d)&&c.onChange(),m}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){return BN(this._target),this.onChange(),this}set(e,t,s,o){return e.length?this.copy(e):(WN(this._target,e,t,s,o),this.onChange(),this)}rotateX(e){return qN(this._target,this._target,e),this.onChange(),this}rotateY(e){return FN(this._target,this._target,e),this.onChange(),this}rotateZ(e){return HN(this._target,this._target,e),this.onChange(),this}inverse(e=this._target){return YN(this._target,e),this.onChange(),this}conjugate(e=this._target){return QN(this._target,e),this.onChange(),this}copy(e){return XN(this._target,e),this.onChange(),this}normalize(e=this._target){return JN(this._target,e),this.onChange(),this}multiply(e,t){return t?w1(this._target,e,t):w1(this._target,this._target,e),this.onChange(),this}dot(e){return ZN(this._target,e)}fromMatrix3(e){return KN(this._target,e),this.onChange(),this}fromEuler(e,t){return $N(this._target,e,e.order),t||this.onChange(),this}fromAxisAngle(e,t){return jN(this._target,e,t),this.onChange(),this}slerp(e,t){return GN(this._target,this._target,e,t),this.onChange(),this}fromArray(e,t=0){return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this._target[3]=e[t+3],this.onChange(),this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}}const tD=1e-6;function nD(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function iD(n,e,t,s,o,u,c,d,m,g,_,T,w,S,C,M,N){return n[0]=e,n[1]=t,n[2]=s,n[3]=o,n[4]=u,n[5]=c,n[6]=d,n[7]=m,n[8]=g,n[9]=_,n[10]=T,n[11]=w,n[12]=S,n[13]=C,n[14]=M,n[15]=N,n}function rD(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function sD(n,e){let t=e[0],s=e[1],o=e[2],u=e[3],c=e[4],d=e[5],m=e[6],g=e[7],_=e[8],T=e[9],w=e[10],S=e[11],C=e[12],M=e[13],N=e[14],B=e[15],X=t*d-s*c,Q=t*m-o*c,se=t*g-u*c,re=s*m-o*d,oe=s*g-u*d,V=o*g-u*m,R=_*M-T*C,I=_*N-w*C,O=_*B-S*C,P=T*N-w*M,U=T*B-S*M,x=w*B-S*N,me=X*x-Q*U+se*P+re*O-oe*I+V*R;return me?(me=1/me,n[0]=(d*x-m*U+g*P)*me,n[1]=(o*U-s*x-u*P)*me,n[2]=(M*V-N*oe+B*re)*me,n[3]=(w*oe-T*V-S*re)*me,n[4]=(m*O-c*x-g*I)*me,n[5]=(t*x-o*O+u*I)*me,n[6]=(N*se-C*V-B*Q)*me,n[7]=(_*V-w*se+S*Q)*me,n[8]=(c*U-d*O+g*R)*me,n[9]=(s*O-t*U-u*R)*me,n[10]=(C*oe-M*se+B*X)*me,n[11]=(T*se-_*oe-S*X)*me,n[12]=(d*I-c*P-m*R)*me,n[13]=(t*P-s*I+o*R)*me,n[14]=(M*Q-C*re-N*X)*me,n[15]=(_*re-T*Q+w*X)*me,n):null}function A2(n){let e=n[0],t=n[1],s=n[2],o=n[3],u=n[4],c=n[5],d=n[6],m=n[7],g=n[8],_=n[9],T=n[10],w=n[11],S=n[12],C=n[13],M=n[14],N=n[15],B=e*c-t*u,X=e*d-s*u,Q=e*m-o*u,se=t*d-s*c,re=t*m-o*c,oe=s*m-o*d,V=g*C-_*S,R=g*M-T*S,I=g*N-w*S,O=_*M-T*C,P=_*N-w*C,U=T*N-w*M;return B*U-X*P+Q*O+se*I-re*R+oe*V}function A1(n,e,t){let s=e[0],o=e[1],u=e[2],c=e[3],d=e[4],m=e[5],g=e[6],_=e[7],T=e[8],w=e[9],S=e[10],C=e[11],M=e[12],N=e[13],B=e[14],X=e[15],Q=t[0],se=t[1],re=t[2],oe=t[3];return n[0]=Q*s+se*d+re*T+oe*M,n[1]=Q*o+se*m+re*w+oe*N,n[2]=Q*u+se*g+re*S+oe*B,n[3]=Q*c+se*_+re*C+oe*X,Q=t[4],se=t[5],re=t[6],oe=t[7],n[4]=Q*s+se*d+re*T+oe*M,n[5]=Q*o+se*m+re*w+oe*N,n[6]=Q*u+se*g+re*S+oe*B,n[7]=Q*c+se*_+re*C+oe*X,Q=t[8],se=t[9],re=t[10],oe=t[11],n[8]=Q*s+se*d+re*T+oe*M,n[9]=Q*o+se*m+re*w+oe*N,n[10]=Q*u+se*g+re*S+oe*B,n[11]=Q*c+se*_+re*C+oe*X,Q=t[12],se=t[13],re=t[14],oe=t[15],n[12]=Q*s+se*d+re*T+oe*M,n[13]=Q*o+se*m+re*w+oe*N,n[14]=Q*u+se*g+re*S+oe*B,n[15]=Q*c+se*_+re*C+oe*X,n}function aD(n,e,t){let s=t[0],o=t[1],u=t[2],c,d,m,g,_,T,w,S,C,M,N,B;return e===n?(n[12]=e[0]*s+e[4]*o+e[8]*u+e[12],n[13]=e[1]*s+e[5]*o+e[9]*u+e[13],n[14]=e[2]*s+e[6]*o+e[10]*u+e[14],n[15]=e[3]*s+e[7]*o+e[11]*u+e[15]):(c=e[0],d=e[1],m=e[2],g=e[3],_=e[4],T=e[5],w=e[6],S=e[7],C=e[8],M=e[9],N=e[10],B=e[11],n[0]=c,n[1]=d,n[2]=m,n[3]=g,n[4]=_,n[5]=T,n[6]=w,n[7]=S,n[8]=C,n[9]=M,n[10]=N,n[11]=B,n[12]=c*s+_*o+C*u+e[12],n[13]=d*s+T*o+M*u+e[13],n[14]=m*s+w*o+N*u+e[14],n[15]=g*s+S*o+B*u+e[15]),n}function oD(n,e,t){let s=t[0],o=t[1],u=t[2];return n[0]=e[0]*s,n[1]=e[1]*s,n[2]=e[2]*s,n[3]=e[3]*s,n[4]=e[4]*o,n[5]=e[5]*o,n[6]=e[6]*o,n[7]=e[7]*o,n[8]=e[8]*u,n[9]=e[9]*u,n[10]=e[10]*u,n[11]=e[11]*u,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function lD(n,e,t,s){let o=s[0],u=s[1],c=s[2],d=Math.hypot(o,u,c),m,g,_,T,w,S,C,M,N,B,X,Q,se,re,oe,V,R,I,O,P,U,x,me,Le;return Math.abs(d)<tD?null:(d=1/d,o*=d,u*=d,c*=d,m=Math.sin(t),g=Math.cos(t),_=1-g,T=e[0],w=e[1],S=e[2],C=e[3],M=e[4],N=e[5],B=e[6],X=e[7],Q=e[8],se=e[9],re=e[10],oe=e[11],V=o*o*_+g,R=u*o*_+c*m,I=c*o*_-u*m,O=o*u*_-c*m,P=u*u*_+g,U=c*u*_+o*m,x=o*c*_+u*m,me=u*c*_-o*m,Le=c*c*_+g,n[0]=T*V+M*R+Q*I,n[1]=w*V+N*R+se*I,n[2]=S*V+B*R+re*I,n[3]=C*V+X*R+oe*I,n[4]=T*O+M*P+Q*U,n[5]=w*O+N*P+se*U,n[6]=S*O+B*P+re*U,n[7]=C*O+X*P+oe*U,n[8]=T*x+M*me+Q*Le,n[9]=w*x+N*me+se*Le,n[10]=S*x+B*me+re*Le,n[11]=C*x+X*me+oe*Le,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n)}function uD(n,e){return n[0]=e[12],n[1]=e[13],n[2]=e[14],n}function b2(n,e){let t=e[0],s=e[1],o=e[2],u=e[4],c=e[5],d=e[6],m=e[8],g=e[9],_=e[10];return n[0]=Math.hypot(t,s,o),n[1]=Math.hypot(u,c,d),n[2]=Math.hypot(m,g,_),n}function cD(n){let e=n[0],t=n[1],s=n[2],o=n[4],u=n[5],c=n[6],d=n[8],m=n[9],g=n[10];const _=e*e+t*t+s*s,T=o*o+u*u+c*c,w=d*d+m*m+g*g;return Math.sqrt(Math.max(_,T,w))}const S2=(function(){const n=[1,1,1];return function(e,t){let s=n;b2(s,t);let o=1/s[0],u=1/s[1],c=1/s[2],d=t[0]*o,m=t[1]*u,g=t[2]*c,_=t[4]*o,T=t[5]*u,w=t[6]*c,S=t[8]*o,C=t[9]*u,M=t[10]*c,N=d+T+M,B=0;return N>0?(B=Math.sqrt(N+1)*2,e[3]=.25*B,e[0]=(w-C)/B,e[1]=(S-g)/B,e[2]=(m-_)/B):d>T&&d>M?(B=Math.sqrt(1+d-T-M)*2,e[3]=(w-C)/B,e[0]=.25*B,e[1]=(m+_)/B,e[2]=(S+g)/B):T>M?(B=Math.sqrt(1+T-d-M)*2,e[3]=(S-g)/B,e[0]=(m+_)/B,e[1]=.25*B,e[2]=(w+C)/B):(B=Math.sqrt(1+M-d-T)*2,e[3]=(m-_)/B,e[0]=(S+g)/B,e[1]=(w+C)/B,e[2]=.25*B),e}})();function hD(n,e,t,s){let o=Gl([n[0],n[1],n[2]]);const u=Gl([n[4],n[5],n[6]]),c=Gl([n[8],n[9],n[10]]);A2(n)<0&&(o=-o),t[0]=n[12],t[1]=n[13],t[2]=n[14];const m=n.slice(),g=1/o,_=1/u,T=1/c;m[0]*=g,m[1]*=g,m[2]*=g,m[4]*=_,m[5]*=_,m[6]*=_,m[8]*=T,m[9]*=T,m[10]*=T,S2(e,m),s[0]=o,s[1]=u,s[2]=c}function fD(n,e,t,s){const o=n,u=e[0],c=e[1],d=e[2],m=e[3],g=u+u,_=c+c,T=d+d,w=u*g,S=u*_,C=u*T,M=c*_,N=c*T,B=d*T,X=m*g,Q=m*_,se=m*T,re=s[0],oe=s[1],V=s[2];return o[0]=(1-(M+B))*re,o[1]=(S+se)*re,o[2]=(C-Q)*re,o[3]=0,o[4]=(S-se)*oe,o[5]=(1-(w+B))*oe,o[6]=(N+X)*oe,o[7]=0,o[8]=(C+Q)*V,o[9]=(N-X)*V,o[10]=(1-(w+M))*V,o[11]=0,o[12]=t[0],o[13]=t[1],o[14]=t[2],o[15]=1,o}function dD(n,e){let t=e[0],s=e[1],o=e[2],u=e[3],c=t+t,d=s+s,m=o+o,g=t*c,_=s*c,T=s*d,w=o*c,S=o*d,C=o*m,M=u*c,N=u*d,B=u*m;return n[0]=1-T-C,n[1]=_+B,n[2]=w-N,n[3]=0,n[4]=_-B,n[5]=1-g-C,n[6]=S+M,n[7]=0,n[8]=w+N,n[9]=S-M,n[10]=1-g-T,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function mD(n,e,t,s,o){let u=1/Math.tan(e/2),c=1/(s-o);return n[0]=u/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=u,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(o+s)*c,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*o*s*c,n[15]=0,n}function pD(n,e,t,s,o,u,c){let d=1/(e-t),m=1/(s-o),g=1/(u-c);return n[0]=-2*d,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*m,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*g,n[11]=0,n[12]=(e+t)*d,n[13]=(o+s)*m,n[14]=(c+u)*g,n[15]=1,n}function gD(n,e,t,s){let o=e[0],u=e[1],c=e[2],d=s[0],m=s[1],g=s[2],_=o-t[0],T=u-t[1],w=c-t[2],S=_*_+T*T+w*w;S===0?w=1:(S=1/Math.sqrt(S),_*=S,T*=S,w*=S);let C=m*w-g*T,M=g*_-d*w,N=d*T-m*_;return S=C*C+M*M+N*N,S===0&&(g?d+=1e-6:m?g+=1e-6:m+=1e-6,C=m*w-g*T,M=g*_-d*w,N=d*T-m*_,S=C*C+M*M+N*N),S=1/Math.sqrt(S),C*=S,M*=S,N*=S,n[0]=C,n[1]=M,n[2]=N,n[3]=0,n[4]=T*N-w*M,n[5]=w*C-_*N,n[6]=_*M-T*C,n[7]=0,n[8]=_,n[9]=T,n[10]=w,n[11]=0,n[12]=o,n[13]=u,n[14]=c,n[15]=1,n}function b1(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n[9]=e[9]+t[9],n[10]=e[10]+t[10],n[11]=e[11]+t[11],n[12]=e[12]+t[12],n[13]=e[13]+t[13],n[14]=e[14]+t[14],n[15]=e[15]+t[15],n}function S1(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n[9]=e[9]-t[9],n[10]=e[10]-t[10],n[11]=e[11]-t[11],n[12]=e[12]-t[12],n[13]=e[13]-t[13],n[14]=e[14]-t[14],n[15]=e[15]-t[15],n}function yD(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11]*t,n[12]=e[12]*t,n[13]=e[13]*t,n[14]=e[14]*t,n[15]=e[15]*t,n}class Yr extends Array{constructor(e=1,t=0,s=0,o=0,u=0,c=1,d=0,m=0,g=0,_=0,T=1,w=0,S=0,C=0,M=0,N=1){return super(e,t,s,o,u,c,d,m,g,_,T,w,S,C,M,N),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,t,s,o,u,c,d,m,g,_,T,w,S,C,M,N){return e.length?this.copy(e):(iD(this,e,t,s,o,u,c,d,m,g,_,T,w,S,C,M,N),this)}translate(e,t=this){return aD(this,t,e),this}rotate(e,t,s=this){return lD(this,s,e,t),this}scale(e,t=this){return oD(this,t,typeof e=="number"?[e,e,e]:e),this}add(e,t){return t?b1(this,e,t):b1(this,this,e),this}sub(e,t){return t?S1(this,e,t):S1(this,this,e),this}multiply(e,t){return e.length?t?A1(this,e,t):A1(this,this,e):yD(this,this,e),this}identity(){return rD(this),this}copy(e){return nD(this,e),this}fromPerspective({fov:e,aspect:t,near:s,far:o}={}){return mD(this,e,t,s,o),this}fromOrthogonal({left:e,right:t,bottom:s,top:o,near:u,far:c}){return pD(this,e,t,s,o,u,c),this}fromQuaternion(e){return dD(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return sD(this,e),this}compose(e,t,s){return fD(this,e,t,s),this}decompose(e,t,s){return hD(this,e,t,s),this}getRotation(e){return S2(e,this),this}getTranslation(e){return uD(e,this),this}getScaling(e){return b2(e,this),this}getMaxScaleOnAxis(){return cD(this)}lookAt(e,t,s){return gD(this,e,t,s),this}determinant(){return A2(this)}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this[3]=e[t+3],this[4]=e[t+4],this[5]=e[t+5],this[6]=e[t+6],this[7]=e[t+7],this[8]=e[t+8],this[9]=e[t+9],this[10]=e[t+10],this[11]=e[t+11],this[12]=e[t+12],this[13]=e[t+13],this[14]=e[t+14],this[15]=e[t+15],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e[t+4]=this[4],e[t+5]=this[5],e[t+6]=this[6],e[t+7]=this[7],e[t+8]=this[8],e[t+9]=this[9],e[t+10]=this[10],e[t+11]=this[11],e[t+12]=this[12],e[t+13]=this[13],e[t+14]=this[14],e[t+15]=this[15],e}}function _D(n,e,t="YXZ"){return t==="XYZ"?(n[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(n[0]=Math.atan2(-e[9],e[10]),n[2]=Math.atan2(-e[4],e[0])):(n[0]=Math.atan2(e[6],e[5]),n[2]=0)):t==="YXZ"?(n[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(n[1]=Math.atan2(e[8],e[10]),n[2]=Math.atan2(e[1],e[5])):(n[1]=Math.atan2(-e[2],e[0]),n[2]=0)):t==="ZXY"?(n[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(n[1]=Math.atan2(-e[2],e[10]),n[2]=Math.atan2(-e[4],e[5])):(n[1]=0,n[2]=Math.atan2(e[1],e[0]))):t==="ZYX"?(n[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(n[0]=Math.atan2(e[6],e[10]),n[2]=Math.atan2(e[1],e[0])):(n[0]=0,n[2]=Math.atan2(-e[4],e[5]))):t==="YZX"?(n[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(n[0]=Math.atan2(-e[9],e[5]),n[1]=Math.atan2(-e[2],e[0])):(n[0]=0,n[1]=Math.atan2(e[8],e[10]))):t==="XZY"&&(n[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(n[0]=Math.atan2(e[6],e[5]),n[1]=Math.atan2(e[8],e[0])):(n[0]=Math.atan2(-e[9],e[10]),n[1]=0)),n}const R1=new Yr;class vD extends Array{constructor(e=0,t=e,s=e,o="YXZ"){super(e,t,s),this.order=o,this.onChange=()=>{},this._target=this;const u=["0","1","2"];return new Proxy(this,{set(c,d){const m=Reflect.set(...arguments);return m&&u.includes(d)&&c.onChange(),m}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e,t=e,s=e){return e.length?this.copy(e):(this._target[0]=e,this._target[1]=t,this._target[2]=s,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e,t=this.order){return _D(this._target,e,t),this.onChange(),this}fromQuaternion(e,t=this.order,s){return R1.fromQuaternion(e),this._target.fromRotationMatrix(R1,t),s||this.onChange(),this}fromArray(e,t=0){return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}}class R2{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new Yr,this.worldMatrix=new Yr,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new wt,this.quaternion=new eD,this.scale=new wt(1),this.rotation=new vD,this.up=new wt(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e,t=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,t&&e&&e.addChild(this,!1)}addChild(e,t=!0){~this.children.indexOf(e)||this.children.push(e),t&&e.setParent(this,!1)}removeChild(e,t=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),t&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let t=0,s=this.children.length;t<s;t++)this.children[t].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let t=0,s=this.children.length;t<s;t++)this.children[t].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,t=!1){t?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}const ED=new Yr,TD=new wt,wD=new wt;class AD extends R2{constructor(e,{near:t=.1,far:s=100,fov:o=45,aspect:u=1,left:c,right:d,bottom:m,top:g,zoom:_=1}={}){super(),Object.assign(this,{near:t,far:s,fov:o,aspect:u,left:c,right:d,bottom:m,top:g,zoom:_}),this.projectionMatrix=new Yr,this.viewMatrix=new Yr,this.projectionViewMatrix=new Yr,this.worldPosition=new wt,this.type=c||d?"orthographic":"perspective",this.type==="orthographic"?this.orthographic():this.perspective()}perspective({near:e=this.near,far:t=this.far,fov:s=this.fov,aspect:o=this.aspect}={}){return Object.assign(this,{near:e,far:t,fov:s,aspect:o}),this.projectionMatrix.fromPerspective({fov:s*(Math.PI/180),aspect:o,near:e,far:t}),this.type="perspective",this}orthographic({near:e=this.near,far:t=this.far,left:s=this.left||-1,right:o=this.right||1,bottom:u=this.bottom||-1,top:c=this.top||1,zoom:d=this.zoom}={}){return Object.assign(this,{near:e,far:t,left:s,right:o,bottom:u,top:c,zoom:d}),s/=d,o/=d,u/=d,c/=d,this.projectionMatrix.fromOrthogonal({left:s,right:o,bottom:u,top:c,near:e,far:t}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}updateProjectionMatrix(){return this.type==="perspective"?this.perspective():this.orthographic()}lookAt(e){return super.lookAt(e,!0),this}project(e){return e.applyMatrix4(this.viewMatrix),e.applyMatrix4(this.projectionMatrix),this}unproject(e){return e.applyMatrix4(ED.inverse(this.projectionMatrix)),e.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new wt,new wt,new wt,new wt,new wt,new wt]);const e=this.projectionViewMatrix;this.frustum[0].set(e[3]-e[0],e[7]-e[4],e[11]-e[8]).constant=e[15]-e[12],this.frustum[1].set(e[3]+e[0],e[7]+e[4],e[11]+e[8]).constant=e[15]+e[12],this.frustum[2].set(e[3]+e[1],e[7]+e[5],e[11]+e[9]).constant=e[15]+e[13],this.frustum[3].set(e[3]-e[1],e[7]-e[5],e[11]-e[9]).constant=e[15]-e[13],this.frustum[4].set(e[3]-e[2],e[7]-e[6],e[11]-e[10]).constant=e[15]-e[14],this.frustum[5].set(e[3]+e[2],e[7]+e[6],e[11]+e[10]).constant=e[15]+e[14];for(let t=0;t<6;t++){const s=1/this.frustum[t].distance();this.frustum[t].multiply(s),this.frustum[t].constant*=s}}frustumIntersectsMesh(e,t=e.worldMatrix){if(!e.geometry.attributes.position||((!e.geometry.bounds||e.geometry.bounds.radius===1/0)&&e.geometry.computeBoundingSphere(),!e.geometry.bounds))return!0;const s=TD;s.copy(e.geometry.bounds.center),s.applyMatrix4(t);const o=e.geometry.bounds.radius*t.getMaxScaleOnAxis();return this.frustumIntersectsSphere(s,o)}frustumIntersectsSphere(e,t){const s=wD;for(let o=0;o<6;o++){const u=this.frustum[o];if(s.copy(u).dot(e)+u.constant<-t)return!1}return!0}}function bD(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[4],n[4]=e[5],n[5]=e[6],n[6]=e[8],n[7]=e[9],n[8]=e[10],n}function SD(n,e){let t=e[0],s=e[1],o=e[2],u=e[3],c=t+t,d=s+s,m=o+o,g=t*c,_=s*c,T=s*d,w=o*c,S=o*d,C=o*m,M=u*c,N=u*d,B=u*m;return n[0]=1-T-C,n[3]=_-B,n[6]=w+N,n[1]=_+B,n[4]=1-g-C,n[7]=S-M,n[2]=w-N,n[5]=S+M,n[8]=1-g-T,n}function RD(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n}function CD(n,e,t,s,o,u,c,d,m,g){return n[0]=e,n[1]=t,n[2]=s,n[3]=o,n[4]=u,n[5]=c,n[6]=d,n[7]=m,n[8]=g,n}function ID(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function xD(n,e){let t=e[0],s=e[1],o=e[2],u=e[3],c=e[4],d=e[5],m=e[6],g=e[7],_=e[8],T=_*c-d*g,w=-_*u+d*m,S=g*u-c*m,C=t*T+s*w+o*S;return C?(C=1/C,n[0]=T*C,n[1]=(-_*s+o*g)*C,n[2]=(d*s-o*c)*C,n[3]=w*C,n[4]=(_*t-o*m)*C,n[5]=(-d*t+o*u)*C,n[6]=S*C,n[7]=(-g*t+s*m)*C,n[8]=(c*t-s*u)*C,n):null}function C1(n,e,t){let s=e[0],o=e[1],u=e[2],c=e[3],d=e[4],m=e[5],g=e[6],_=e[7],T=e[8],w=t[0],S=t[1],C=t[2],M=t[3],N=t[4],B=t[5],X=t[6],Q=t[7],se=t[8];return n[0]=w*s+S*c+C*g,n[1]=w*o+S*d+C*_,n[2]=w*u+S*m+C*T,n[3]=M*s+N*c+B*g,n[4]=M*o+N*d+B*_,n[5]=M*u+N*m+B*T,n[6]=X*s+Q*c+se*g,n[7]=X*o+Q*d+se*_,n[8]=X*u+Q*m+se*T,n}function ND(n,e,t){let s=e[0],o=e[1],u=e[2],c=e[3],d=e[4],m=e[5],g=e[6],_=e[7],T=e[8],w=t[0],S=t[1];return n[0]=s,n[1]=o,n[2]=u,n[3]=c,n[4]=d,n[5]=m,n[6]=w*s+S*c+g,n[7]=w*o+S*d+_,n[8]=w*u+S*m+T,n}function DD(n,e,t){let s=e[0],o=e[1],u=e[2],c=e[3],d=e[4],m=e[5],g=e[6],_=e[7],T=e[8],w=Math.sin(t),S=Math.cos(t);return n[0]=S*s+w*c,n[1]=S*o+w*d,n[2]=S*u+w*m,n[3]=S*c-w*s,n[4]=S*d-w*o,n[5]=S*m-w*u,n[6]=g,n[7]=_,n[8]=T,n}function MD(n,e,t){let s=t[0],o=t[1];return n[0]=s*e[0],n[1]=s*e[1],n[2]=s*e[2],n[3]=o*e[3],n[4]=o*e[4],n[5]=o*e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n}function OD(n,e){let t=e[0],s=e[1],o=e[2],u=e[3],c=e[4],d=e[5],m=e[6],g=e[7],_=e[8],T=e[9],w=e[10],S=e[11],C=e[12],M=e[13],N=e[14],B=e[15],X=t*d-s*c,Q=t*m-o*c,se=t*g-u*c,re=s*m-o*d,oe=s*g-u*d,V=o*g-u*m,R=_*M-T*C,I=_*N-w*C,O=_*B-S*C,P=T*N-w*M,U=T*B-S*M,x=w*B-S*N,me=X*x-Q*U+se*P+re*O-oe*I+V*R;return me?(me=1/me,n[0]=(d*x-m*U+g*P)*me,n[1]=(m*O-c*x-g*I)*me,n[2]=(c*U-d*O+g*R)*me,n[3]=(o*U-s*x-u*P)*me,n[4]=(t*x-o*O+u*I)*me,n[5]=(s*O-t*U-u*R)*me,n[6]=(M*V-N*oe+B*re)*me,n[7]=(N*se-C*V-B*Q)*me,n[8]=(C*oe-M*se+B*X)*me,n):null}class VD extends Array{constructor(e=1,t=0,s=0,o=0,u=1,c=0,d=0,m=0,g=1){return super(e,t,s,o,u,c,d,m,g),this}set(e,t,s,o,u,c,d,m,g){return e.length?this.copy(e):(CD(this,e,t,s,o,u,c,d,m,g),this)}translate(e,t=this){return ND(this,t,e),this}rotate(e,t=this){return DD(this,t,e),this}scale(e,t=this){return MD(this,t,e),this}multiply(e,t){return t?C1(this,e,t):C1(this,this,e),this}identity(){return ID(this),this}copy(e){return RD(this,e),this}fromMatrix4(e){return bD(this,e),this}fromQuaternion(e){return SD(this,e),this}fromBasis(e,t,s){return this.set(e[0],e[1],e[2],t[0],t[1],t[2],s[0],s[1],s[2]),this}inverse(e=this){return xD(this,e),this}getNormalMatrix(e){return OD(this,e),this}}let PD=0;class C2 extends R2{constructor(e,{geometry:t,program:s,mode:o=e.TRIANGLES,frustumCulled:u=!0,renderOrder:c=0}={}){super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=PD++,this.geometry=t,this.program=s,this.mode=o,this.frustumCulled=u,this.renderOrder=c,this.modelViewMatrix=new Yr,this.normalMatrix=new VD,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(s=>s&&s({mesh:this,camera:e}));let t=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:t}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(s=>s&&s({mesh:this,camera:e}))}}const I1={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#00ff00",blue:"#0000ff",fuchsia:"#ff00ff",cyan:"#00ffff",yellow:"#ffff00",orange:"#ff8000"};function x1(n){n.length===4&&(n=n[0]+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]);const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return e||console.warn(`Unable to convert hex string ${n} to rgb values`),[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255]}function kD(n){return n=parseInt(n),[(n>>16&255)/255,(n>>8&255)/255,(n&255)/255]}function N1(n){return n===void 0?[0,0,0]:arguments.length===3?arguments:isNaN(n)?n[0]==="#"?x1(n):I1[n.toLowerCase()]?x1(I1[n.toLowerCase()]):(console.warn("Color format not recognised"),[0,0,0]):kD(n)}class D1 extends Array{constructor(e){return Array.isArray(e)?super(...e):super(...N1(...arguments))}get r(){return this[0]}get g(){return this[1]}get b(){return this[2]}set r(e){this[0]=e}set g(e){this[1]=e}set b(e){this[2]=e}set(e){return Array.isArray(e)?this.copy(e):this.copy(N1(...arguments))}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this}}class LD extends E2{constructor(e,{attributes:t={}}={}){Object.assign(t,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(e,t)}}const UD=`
attribute vec2 uv;
attribute vec2 position;

varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = vec4(position, 0, 1);
}
`,zD=`
precision highp float;

uniform float uTime;
uniform vec3 uResolution;
uniform vec2 uFocal;
uniform vec2 uRotation;
uniform float uStarSpeed;
uniform float uDensity;
uniform float uHueShift;
uniform float uSpeed;
uniform vec2 uMouse;
uniform float uGlowIntensity;
uniform float uSaturation;
uniform bool uMouseRepulsion;
uniform float uTwinkleIntensity;
uniform float uRotationSpeed;
uniform float uRepulsionStrength;
uniform float uMouseActiveFactor;
uniform float uAutoCenterRepulsion;
uniform bool uTransparent;

varying vec2 vUv;

#define NUM_LAYER 4.0
#define STAR_COLOR_CUTOFF 0.2
#define MAT45 mat2(0.7071, -0.7071, 0.7071, 0.7071)
#define PERIOD 3.0

float Hash21(vec2 p) {
  p = fract(p * vec2(123.34, 456.21));
  p += dot(p, p + 45.32);
  return fract(p.x * p.y);
}

float tri(float x) {
  return abs(fract(x) * 2.0 - 1.0);
}

float tris(float x) {
  float t = fract(x);
  return 1.0 - smoothstep(0.0, 1.0, abs(2.0 * t - 1.0));
}

float trisn(float x) {
  float t = fract(x);
  return 2.0 * (1.0 - smoothstep(0.0, 1.0, abs(2.0 * t - 1.0))) - 1.0;
}

vec3 hsv2rgb(vec3 c) {
  vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

float Star(vec2 uv, float flare) {
  float d = length(uv);
  float m = (0.05 * uGlowIntensity) / d;
  float rays = smoothstep(0.0, 1.0, 1.0 - abs(uv.x * uv.y * 1000.0));
  m += rays * flare * uGlowIntensity;
  uv *= MAT45;
  rays = smoothstep(0.0, 1.0, 1.0 - abs(uv.x * uv.y * 1000.0));
  m += rays * 0.3 * flare * uGlowIntensity;
  m *= smoothstep(1.0, 0.2, d);
  return m;
}

vec3 StarLayer(vec2 uv) {
  vec3 col = vec3(0.0);

  vec2 gv = fract(uv) - 0.5; 
  vec2 id = floor(uv);

  for (int y = -1; y <= 1; y++) {
    for (int x = -1; x <= 1; x++) {
      vec2 offset = vec2(float(x), float(y));
      vec2 si = id + vec2(float(x), float(y));
      float seed = Hash21(si);
      float size = fract(seed * 345.32);
      float glossLocal = tri(uStarSpeed / (PERIOD * seed + 1.0));
      float flareSize = smoothstep(0.9, 1.0, size) * glossLocal;

      float red = smoothstep(STAR_COLOR_CUTOFF, 1.0, Hash21(si + 1.0)) + STAR_COLOR_CUTOFF;
      float blu = smoothstep(STAR_COLOR_CUTOFF, 1.0, Hash21(si + 3.0)) + STAR_COLOR_CUTOFF;
      float grn = min(red, blu) * seed;
      vec3 base = vec3(red, grn, blu);
      
      float hue = atan(base.g - base.r, base.b - base.r) / (2.0 * 3.14159) + 0.5;
      hue = fract(hue + uHueShift / 360.0);
      float sat = length(base - vec3(dot(base, vec3(0.299, 0.587, 0.114)))) * uSaturation;
      float val = max(max(base.r, base.g), base.b);
      base = hsv2rgb(vec3(hue, sat, val));

      vec2 pad = vec2(tris(seed * 34.0 + uTime * uSpeed / 10.0), tris(seed * 38.0 + uTime * uSpeed / 30.0)) - 0.5;

      float star = Star(gv - offset - pad, flareSize);
      vec3 color = base;

      float twinkle = trisn(uTime * uSpeed + seed * 6.2831) * 0.5 + 1.0;
      twinkle = mix(1.0, twinkle, uTwinkleIntensity);
      star *= twinkle;
      
      col += star * size * color;
    }
  }

  return col;
}

void main() {
  vec2 focalPx = uFocal * uResolution.xy;
  vec2 uv = (vUv * uResolution.xy - focalPx) / uResolution.y;

  vec2 mouseNorm = uMouse - vec2(0.5);
  
  if (uAutoCenterRepulsion > 0.0) {
    vec2 centerUV = vec2(0.0, 0.0);
    float centerDist = length(uv - centerUV);
    vec2 repulsion = normalize(uv - centerUV) * (uAutoCenterRepulsion / (centerDist + 0.1));
    uv += repulsion * 0.05;
  } else if (uMouseRepulsion) {
    vec2 mousePosUV = (uMouse * uResolution.xy - focalPx) / uResolution.y;
    float mouseDist = length(uv - mousePosUV);
    vec2 repulsion = normalize(uv - mousePosUV) * (uRepulsionStrength / (mouseDist + 0.1));
    uv += repulsion * 0.05 * uMouseActiveFactor;
  } else {
    vec2 mouseOffset = mouseNorm * 0.1 * uMouseActiveFactor;
    uv += mouseOffset;
  }

  float autoRotAngle = uTime * uRotationSpeed;
  mat2 autoRot = mat2(cos(autoRotAngle), -sin(autoRotAngle), sin(autoRotAngle), cos(autoRotAngle));
  uv = autoRot * uv;

  uv = mat2(uRotation.x, -uRotation.y, uRotation.y, uRotation.x) * uv;

  vec3 col = vec3(0.0);

  for (float i = 0.0; i < 1.0; i += 1.0 / NUM_LAYER) {
    float depth = fract(i + uStarSpeed * uSpeed);
    float scale = mix(20.0 * uDensity, 0.5 * uDensity, depth);
    float fade = depth * smoothstep(1.0, 0.9, depth);
    col += StarLayer(uv * scale + i * 453.32) * fade;
  }

  if (uTransparent) {
    float alpha = length(col);
    alpha = smoothstep(0.0, 0.3, alpha);
    alpha = min(alpha, 1.0);
    gl_FragColor = vec4(col, alpha);
  } else {
    gl_FragColor = vec4(col, 1.0);
  }
}
`;function BD({focal:n=[.5,.5],rotation:e=[1,0],starSpeed:t=.5,density:s=1,hueShift:o=140,disableAnimation:u=!1,speed:c=1,mouseInteraction:d=!0,glowIntensity:m=.3,saturation:g=0,mouseRepulsion:_=!0,repulsionStrength:T=2,twinkleIntensity:w=.3,rotationSpeed:S=.1,autoCenterRepulsion:C=0,transparent:M=!0,...N}){const B=K.useRef(null),X=K.useRef({x:.5,y:.5}),Q=K.useRef({x:.5,y:.5}),se=K.useRef(0),re=K.useRef(0);return K.useEffect(()=>{if(!B.current)return;const oe=B.current,V=new w2({alpha:M,premultipliedAlpha:!1}),R=V.gl;M?(R.enable(R.BLEND),R.blendFunc(R.SRC_ALPHA,R.ONE_MINUS_SRC_ALPHA),R.clearColor(0,0,0,0)):R.clearColor(0,0,0,1);let I;function O(){V.setSize(oe.offsetWidth*1,oe.offsetHeight*1),I&&(I.uniforms.uResolution.value=new D1(R.canvas.width,R.canvas.height,R.canvas.width/R.canvas.height))}window.addEventListener("resize",O,!1),O();const P=new LD(R);I=new T2(R,{vertex:UD,fragment:zD,uniforms:{uTime:{value:0},uResolution:{value:new D1(R.canvas.width,R.canvas.height,R.canvas.width/R.canvas.height)},uFocal:{value:new Float32Array(n)},uRotation:{value:new Float32Array(e)},uStarSpeed:{value:t},uDensity:{value:s},uHueShift:{value:o},uSpeed:{value:c},uMouse:{value:new Float32Array([Q.current.x,Q.current.y])},uGlowIntensity:{value:m},uSaturation:{value:g},uMouseRepulsion:{value:_},uTwinkleIntensity:{value:w},uRotationSpeed:{value:S},uRepulsionStrength:{value:T},uMouseActiveFactor:{value:0},uAutoCenterRepulsion:{value:C},uTransparent:{value:M}}});const U=new C2(R,{geometry:P,program:I});let x;function me(ae){x=requestAnimationFrame(me),u||(I.uniforms.uTime.value=ae*.001,I.uniforms.uStarSpeed.value=ae*.001*t/10);const he=.05;Q.current.x+=(X.current.x-Q.current.x)*he,Q.current.y+=(X.current.y-Q.current.y)*he,re.current+=(se.current-re.current)*he,I.uniforms.uMouse.value[0]=Q.current.x,I.uniforms.uMouse.value[1]=Q.current.y,I.uniforms.uMouseActiveFactor.value=re.current,V.render({scene:U})}x=requestAnimationFrame(me),oe.appendChild(R.canvas);function Le(ae){const he=oe.getBoundingClientRect(),Ie=(ae.clientX-he.left)/he.width,k=1-(ae.clientY-he.top)/he.height;X.current={x:Ie,y:k},se.current=1}function $(){se.current=0}return d&&(oe.addEventListener("mousemove",Le),oe.addEventListener("mouseleave",$)),()=>{cancelAnimationFrame(x),window.removeEventListener("resize",O),d&&(oe.removeEventListener("mousemove",Le),oe.removeEventListener("mouseleave",$)),oe.removeChild(R.canvas),R.getExtension("WEBGL_lose_context")?.loseContext()}},[n,e,t,s,o,u,c,d,m,g,_,w,S,T,C,M]),G.jsx("div",{ref:B,className:"w-full h-full relative",...N})}const jD=K.memo(BD),qD=({user:n,userId:e,onLogout:t})=>G.jsxs("div",{className:"text-center space-y-4",children:[G.jsx("svg",{className:"text-indigo-500 w-16 h-16 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:G.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z",clipRule:"evenodd"})}),G.jsx("h1",{className:"text-3xl font-bold text-white",children:"Welcome!"}),G.jsx("p",{className:"text-gray-200",children:"You are logged in as:"}),G.jsx("p",{className:"text-indigo-300 font-mono break-words text-sm",children:n.email}),G.jsxs("div",{className:"w-full text-left text-sm text-gray-300 mt-4",children:[G.jsx("p",{className:"font-semibold",children:"Your User ID:"}),G.jsx("p",{className:"font-mono break-all mt-1",children:e})]}),G.jsx("button",{onClick:t,className:"w-full bg-red-500 text-white font-semibold py-3 px-4 rounded-lg hover:bg-red-600 transition-colors duration-200",children:"Logout"})]}),FD=({auth:n,db:e})=>{const[t,s]=K.useState(!1),[o,u]=K.useState(!1),[c,d]=K.useState(""),[m,g]=K.useState(""),[_,T]=K.useState(""),[w,S]=K.useState(""),[C,M]=K.useState("");K.useEffect(()=>{S(""),M("")},[t,o]);const N=async Q=>{Q.preventDefault(),S(""),M("");try{if(t){const se=await IC(n,c,m),re=xh(e,`users/${se.user.uid}/profile`);await oN(re,{name:_,email:c,created:new Date}),M("Registration successful! You are now logged in.")}else await xC(n,c,m),M("Login successful!")}catch(se){S(se.message)}},B=async()=>{S(""),M("");try{const Q=new Yi;await JC(n,Q),M("Signed in with Google successfully!")}catch(Q){S(Q.message)}},X=async()=>{S(""),M("");try{await CC(n,c),M("Password reset email sent! Check your inbox."),u(!1),d("")}catch(Q){S(Q.message)}};return G.jsxs(G.Fragment,{children:[G.jsx("h1",{className:"text-3xl font-bold text-center text-white",children:t?"Create Account":o?"Reset Password":"Welcome Back"}),w&&G.jsx("p",{className:"bg-red-100 bg-opacity-80 text-red-700 p-3 rounded-lg text-sm text-center",children:w}),C&&G.jsx("p",{className:"bg-green-100 bg-opacity-80 text-green-700 p-3 rounded-lg text-sm text-center",children:C}),G.jsxs("form",{onSubmit:N,className:"space-y-4",children:[t&&G.jsx("input",{type:"text",value:_,onChange:Q=>T(Q.target.value),placeholder:"Name",className:"w-full p-3 border rounded-lg bg-white bg-opacity-70 text-black",required:!0}),G.jsx("input",{type:"email",value:c,onChange:Q=>d(Q.target.value),placeholder:"Email",className:"w-full p-3 border rounded-lg bg-white bg-opacity-70 text-black",required:!0}),!o&&G.jsx("input",{type:"password",value:m,onChange:Q=>g(Q.target.value),placeholder:"Password",className:"w-full p-3 border rounded-lg bg-white bg-opacity-70 text-black",required:!0}),G.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-200",children:[!o&&G.jsxs("label",{className:"flex items-center cursor-pointer",children:[G.jsx("input",{type:"checkbox",className:"form-checkbox text-indigo-600"}),G.jsx("span",{className:"ml-2",children:"Remember me"})]}),G.jsx("button",{type:"button",onClick:()=>u(!o),className:"text-indigo-300 hover:underline",children:o?"Back to Login":"Forgot your password?"})]}),o?G.jsx("button",{type:"button",onClick:X,className:"w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition",children:"Send Reset Email"}):G.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition",children:t?"Register":"Login"})]}),G.jsxs("div",{className:"relative flex items-center py-2",children:[G.jsx("div",{className:"flex-grow border-t border-gray-300"}),G.jsx("span",{className:"flex-shrink mx-4 text-gray-300 text-sm",children:"Or"}),G.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),G.jsxs("button",{onClick:B,className:"w-full bg-white bg-opacity-80 border text-gray-700 py-3 rounded-lg flex items-center justify-center space-x-2 hover:bg-gray-50 transition",children:[G.jsx(dN,{className:"w-5 h-5"}),G.jsx("span",{children:"Login with Google"})]}),G.jsx("div",{className:"text-center text-sm text-gray-200 mt-4",children:t?G.jsxs("p",{children:["Already have an account?"," ",G.jsx("button",{onClick:()=>s(!1),className:"text-indigo-300 hover:underline font-semibold",children:"Login"})]}):G.jsxs("p",{children:["Don’t have an account?"," ",G.jsx("button",{onClick:()=>s(!0),className:"text-indigo-300 hover:underline font-semibold",children:"Register"})]})})]})},HD=({auth:n,db:e,user:t,userId:s,onLogout:o})=>G.jsxs("div",{className:"relative min-h-screen w-full overflow-hidden bg-black",children:[G.jsx("div",{className:"absolute inset-0 z-0",children:G.jsx(jD,{mouseRepulsion:!0,mouseInteraction:!0,density:1.5,glowIntensity:.5,saturation:.8,hueShift:240})}),G.jsx("div",{className:"relative z-10 flex items-center justify-center min-h-screen",children:G.jsx("div",{className:"w-full max-w-md bg-transparent border border-white border-opacity-60 p-8 rounded-2xl shadow-2xl backdrop-blur-md space-y-6",children:t?G.jsx(qD,{user:t,userId:s,onLogout:o}):G.jsx(FD,{auth:n,db:e})})})]}),GD=["#ffffff","#ffffff","#ffffff"],YD=n=>{n=n.replace(/^#/,""),n.length===3&&(n=n.split("").map(u=>u+u).join(""));const e=parseInt(n,16),t=(e>>16&255)/255,s=(e>>8&255)/255,o=(e&255)/255;return[t,s,o]},QD=`
  attribute vec3 position;
  attribute vec4 random;
  attribute vec3 color;
  
  uniform mat4 modelMatrix;
  uniform mat4 viewMatrix;
  uniform mat4 projectionMatrix;
  uniform float uTime;
  uniform float uSpread;
  uniform float uBaseSize;
  uniform float uSizeRandomness;
  
  varying vec4 vRandom;
  varying vec3 vColor;
  
  void main() {
    vRandom = random;
    vColor = color;
    
    vec3 pos = position * uSpread;
    pos.z *= 10.0;
    
    vec4 mPos = modelMatrix * vec4(pos, 1.0);
    float t = uTime;
    mPos.x += sin(t * random.z + 6.28 * random.w) * mix(0.1, 1.5, random.x);
    mPos.y += sin(t * random.y + 6.28 * random.x) * mix(0.1, 1.5, random.w);
    mPos.z += sin(t * random.w + 6.28 * random.y) * mix(0.1, 1.5, random.z);
    
    vec4 mvPos = viewMatrix * mPos;

    if (uSizeRandomness == 0.0) {
      gl_PointSize = uBaseSize;
    } else {
      gl_PointSize = (uBaseSize * (1.0 + uSizeRandomness * (random.x - 0.5))) / length(mvPos.xyz);
    }

    gl_Position = projectionMatrix * mvPos;
  }
`,KD=`
  precision highp float;
  
  uniform float uTime;
  uniform float uAlphaParticles;
  varying vec4 vRandom;
  varying vec3 vColor;
  
  void main() {
    vec2 uv = gl_PointCoord.xy;
    float d = length(uv - vec2(0.5));
    
    if(uAlphaParticles < 0.5) {
      if(d > 0.5) {
        discard;
      }
      gl_FragColor = vec4(vColor + 0.2 * sin(uv.yxx + uTime + vRandom.y * 6.28), 1.0);
    } else {
      float circle = smoothstep(0.5, 0.4, d) * 0.8;
      gl_FragColor = vec4(vColor + 0.2 * sin(uv.yxx + uTime + vRandom.y * 6.28), circle);
    }
  }
`,$D=({particleCount:n=200,particleSpread:e=10,speed:t=.1,particleColors:s,moveParticlesOnHover:o=!1,particleHoverFactor:u=1,alphaParticles:c=!1,particleBaseSize:d=100,sizeRandomness:m=1,cameraDistance:g=20,disableRotation:_=!1,className:T})=>{const w=K.useRef(null),S=K.useRef({x:0,y:0});return K.useEffect(()=>{const C=w.current;if(!C)return;const M=new w2({depth:!1,alpha:!0}),N=M.gl;C.appendChild(N.canvas),N.clearColor(0,0,0,0);const B=new AD(N,{fov:15});B.position.set(0,0,g);const X=()=>{const $=C.clientWidth,ae=C.clientHeight;M.setSize($,ae),B.perspective({aspect:N.canvas.width/N.canvas.height})};window.addEventListener("resize",X,!1),X();const Q=$=>{const ae=C.getBoundingClientRect(),he=($.clientX-ae.left)/ae.width*2-1,Ie=-(($.clientY-ae.top)/ae.height*2-1);S.current={x:he,y:Ie}};o&&C.addEventListener("mousemove",Q);const se=n,re=new Float32Array(se*3),oe=new Float32Array(se*4),V=new Float32Array(se*3),R=s&&s.length>0?s:GD;for(let $=0;$<se;$++){let ae,he,Ie,k;do ae=Math.random()*2-1,he=Math.random()*2-1,Ie=Math.random()*2-1,k=ae*ae+he*he+Ie*Ie;while(k>1||k===0);const ie=Math.cbrt(Math.random());re.set([ae*ie,he*ie,Ie*ie],$*3),oe.set([Math.random(),Math.random(),Math.random(),Math.random()],$*4);const ce=YD(R[Math.floor(Math.random()*R.length)]);V.set(ce,$*3)}const I=new E2(N,{position:{size:3,data:re},random:{size:4,data:oe},color:{size:3,data:V}}),O=new T2(N,{vertex:QD,fragment:KD,uniforms:{uTime:{value:0},uSpread:{value:e},uBaseSize:{value:d},uSizeRandomness:{value:m},uAlphaParticles:{value:c?1:0}},transparent:!0,depthTest:!1}),P=new C2(N,{mode:N.POINTS,geometry:I,program:O});let U,x=performance.now(),me=0;const Le=$=>{U=requestAnimationFrame(Le);const ae=$-x;x=$,me+=ae*t,O.uniforms.uTime.value=me*.001,o?(P.position.x=-S.current.x*u,P.position.y=-S.current.y*u):(P.position.x=0,P.position.y=0),_||(P.rotation.x=Math.sin(me*2e-4)*.1,P.rotation.y=Math.cos(me*5e-4)*.15,P.rotation.z+=.01*t),M.render({scene:P,camera:B})};return U=requestAnimationFrame(Le),()=>{window.removeEventListener("resize",X),o&&C.removeEventListener("mousemove",Q),cancelAnimationFrame(U),C.contains(N.canvas)&&C.removeChild(N.canvas)}},[n,e,t,o,u,c,d,m,g,_]),G.jsx("div",{ref:w,className:`relative w-full h-full ${T}`})},XD=({user:n,db:e,onLogout:t})=>{const[s,o]=K.useState(""),[u,c]=K.useState([]),[d,m]=K.useState(null),[g,_]=K.useState("");K.useEffect(()=>{if(!n)return;const C=nN(a1(e,"journalNotes"),iN("uid","==",n.uid),rN("createdAt","desc")),M=hN(C,N=>{c(N.docs.map(B=>({id:B.id,...B.data()})))});return()=>M()},[n,e]);const T=async C=>{C.preventDefault(),s.trim()&&(await cN(a1(e,"journalNotes"),{uid:n.uid,text:s,createdAt:Sm(),updatedAt:Sm()}),o(""))},w=async C=>{await lN(xh(e,"journalNotes",C),{text:g,updatedAt:Sm()}),m(null),_("")},S=async C=>{await uN(xh(e,"journalNotes",C))};return G.jsxs("div",{className:"min-h-screen w-full flex flex-col items-center pt-36 pb-12 px-2 relative journal-animated-bg",children:[G.jsx("div",{className:"absolute inset-0 w-full h-full z-0 ",children:G.jsx($D,{particleCount:200,particleSpread:10,speed:.12,alphaParticles:!0,moveParticlesOnHover:!0,className:"!w-full !h-full"})}),G.jsx("div",{className:"absolute top-6 right-8 z-20 flex items-center gap-2",children:G.jsxs("div",{className:"bg-white/10 px-3 py-1 rounded-full text-white text-sm font-medium flex items-center gap-2 shadow",children:[G.jsx("span",{className:"font-semibold",children:n.email}),G.jsx("button",{onClick:t,className:"ml-2 px-3 py-1 rounded-lg bg-red-500 text-white text-xs font-semibold hover:bg-red-600 transition",title:"Logout",children:"Logout"})]})}),G.jsx("div",{className:"w-full max-w-2xl relative z-10 flex justify-center",children:G.jsxs("div",{className:"relative w-full bg-[#23272e]/90 border-4 border-[#d1cdc6] rounded-[32px] shadow-2xl p-0 overflow-hidden diary-paper transition-transform duration-300 hover:scale-105",children:[G.jsx("div",{className:"absolute left-0 top-0 h-full flex flex-col justify-between z-20 px-2 py-6",children:[...Array(8)].map((C,M)=>G.jsx("div",{className:"w-3 h-3 bg-[#bfae8e] rounded-full mb-4 shadow-inner border border-[#e0ddd5]",style:{marginBottom:M!==7?"1.5rem":0}},M))}),G.jsx("div",{className:"absolute top-8 right-10 z-10",children:G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-14 w-14 text-[#bfae8e] opacity-60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:G.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),G.jsx("h2",{className:"text-3xl font-bold text-[#9d9890] text-center mb-2 tracking-tight drop-shadow pt-8 pb-2 font-serif",children:"My Diary"}),G.jsx("div",{className:"flex justify-center mb-4",children:G.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-yellow-400 via-orange-300 to-pink-300 rounded-full"})}),G.jsxs("form",{onSubmit:T,className:"flex flex-col space-y-4 px-8 pb-8",children:[G.jsxs("div",{className:"relative",children:[G.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none",children:[...Array(8)].map((C,M)=>G.jsx("div",{className:"border-b border-dashed border-[#e0cfa9] opacity-60",style:{top:`${(M+1)*2.2}rem`,position:"absolute",left:0,right:0}},M))}),G.jsx("textarea",{className:"w-full h-40 p-6 pt-8 rounded-2xl bg-transparent text-[#e0cfa9] font-mono text-lg border-none focus:outline-none resize-none shadow-none placeholder-[#bfae8e] relative z-10 tracking-wide",style:{fontFamily:'"Indie Flower", "Comic Sans MS", cursive, sans-serif',lineHeight:"2.2rem",background:"transparent",boxShadow:"none",border:"none"},placeholder:"Dear Diary, today I...",value:s,onChange:C=>o(C.target.value),required:!0})]}),G.jsx("button",{type:"submit",className:"self-end bg-gradient-to-r from-yellow-400 to-pink-300 text-[#7c5e2a] px-8 py-2 rounded-xl font-bold shadow-lg transition-transform duration-200 hover:scale-105 hover:from-yellow-500 hover:to-pink-400 focus:outline-none focus:ring-2 focus:ring-yellow-300 font-serif",style:{transition:"transform 0.2s, background 0.3s"},children:"Save Entry"})]})]})}),G.jsxs("div",{className:"w-full max-w-2xl space-y-6 z-10",children:[u.length===0&&G.jsx("div",{className:"text-gray-400 text-center",children:"No notes yet. Start writing your first diary entry!"}),u.map(C=>G.jsxs("div",{className:"relative bg-[#23272e]/90 border-4 border-[#74726e] rounded-[28px] p-8 shadow-xl overflow-hidden transition-all duration-300 group hover:shadow-2xl hover:-translate-y-1 hover:bg-[#23272e]/95 transform rotate-[-1deg] hover:rotate-0 diary-paper",style:{fontFamily:'"Indie Flower", "Comic Sans MS", cursive, sans-serif',lineHeight:"2.2rem"},children:[G.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none",children:[...Array(6)].map((M,N)=>G.jsx("div",{className:"border-b border-dashed border-[#7c5e2a] opacity-40",style:{top:`${(N+1)*2.2}rem`,position:"absolute",left:0,right:0}},N))}),d===C.id?G.jsxs(G.Fragment,{children:[G.jsx("textarea",{className:"w-full h-24 p-3 rounded-xl bg-transparent text-[#e0cfa9] font-mono text-lg border-none focus:outline-none resize-none shadow-none placeholder-[#bfae8e] relative z-10 tracking-wide",style:{fontFamily:'"Indie Flower", "Comic Sans MS", cursive, sans-serif',lineHeight:"2.2rem",background:"transparent",boxShadow:"none",border:"none"},value:g,onChange:M=>_(M.target.value)}),G.jsxs("div",{className:"flex gap-2 justify-end mt-2",children:[G.jsx("button",{onClick:()=>{m(null),_("")},className:"px-5 py-1.5 rounded-lg bg-gray-700/80 text-[#e0cfa9] hover:bg-gray-800/90 transition font-serif",children:"Cancel"}),G.jsx("button",{onClick:()=>w(C.id),className:"px-5 py-1.5 rounded-lg bg-gradient-to-r from-yellow-400 to-pink-300 text-[#7c5e2a] font-bold hover:from-yellow-500 hover:to-pink-400 transition font-serif",children:"Save"})]})]}):G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"whitespace-pre-wrap text-[#e0cfa9] text-lg mb-2 relative z-10",children:C.text}),G.jsxs("div",{className:"flex justify-between items-center text-xs text-[#bfae8e] mt-2 relative z-10 font-serif",children:[G.jsxs("span",{children:["Last edited: ",C.updatedAt&&typeof C.updatedAt.toDate=="function"?C.updatedAt.toDate().toLocaleString():C.updatedAt&&C.updatedAt.seconds?new Date(C.updatedAt.seconds*1e3).toLocaleString():"Just now"]}),G.jsxs("div",{className:"flex gap-2 opacity-80 group-hover:opacity-100 transition",children:[G.jsx("button",{onClick:()=>{m(C.id),_(C.text)},className:"px-4 py-1 rounded-lg bg-yellow-400 text-[#7c5e2a] hover:bg-yellow-500 text-xs font-bold transition font-serif",children:"Edit"}),G.jsx("button",{onClick:()=>S(C.id),className:"px-4 py-1 rounded-lg bg-pink-300 text-[#7c5e2a] hover:bg-pink-400 text-xs font-bold transition font-serif",children:"Delete"})]})]})]})]},C.id))]})]})};var WD="firebase",ZD="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fr(WD,ZD,"app");const JD={apiKey:"AIzaSyAU6UWpw5nU7As9F7S5azpvOhzVSkksx88",authDomain:"gen-ai-596a5.firebaseapp.com",projectId:"gen-ai-596a5",storageBucket:"gen-ai-596a5.firebasestorage.app",messagingSenderId:"275734473351",appId:"1:275734473351:web:a60403485f41d2a163e622",measurementId:"G-SBSR5BT8J6"},I2=aE(JD),Nm=HI(I2),M1=G4(I2);function eM(){const[n,e]=K.useState(null);K.useEffect(()=>{const u=MC(Nm,c=>{e(c)});return()=>u()},[]);const t=n?n.uid:null,s=()=>OC(Nm);function o(){let c=nr().pathname.replace("/","")||"journal";return n?G.jsx(qb,{currentPage:c,user:n}):null}return G.jsxs(wb,{children:[G.jsx(o,{}),G.jsxs(JA,{children:[G.jsx(Ml,{path:"/login",element:n?G.jsx(hm,{to:"/journal",replace:!0}):G.jsx(HD,{auth:Nm,db:M1,user:n,userId:t,onLogout:s})}),G.jsx(Ml,{path:"/journal",element:n?G.jsx(XD,{user:n,db:M1,onLogout:s}):G.jsx(hm,{to:"/login",replace:!0})}),G.jsx(Ml,{path:"/chatbot",element:G.jsx(Fb,{})}),G.jsx(Ml,{path:"/",element:G.jsx(hm,{to:n?"/journal":"/login",replace:!0})})]})]})}uA.createRoot(document.getElementById("root")).render(G.jsx(K.StrictMode,{children:G.jsx(eM,{})}));
